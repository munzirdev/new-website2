import{r as k,a as ac,g as ic,c as Xe,R as lt}from"./vendor-bd6wVIFv.js";import{u as gi,a as Ro,L as zi,c as nc,N as oc,O as je,R as lc}from"./router-BuRWot79.js";import{F as ne,X as _e,A as Ae,I as cc,U as dc,S as sa,a as rt,C as at,b as fe,P as Mt,M as He,c as it,d as uc,e as Ua,f as Dt,g as hc,h as Ee,i as Bi,D as Ha,R as Zs,L as Oo,j as ze,E as Wi,k as ts,l as Qt,m as Hr,n as Qs,H as mc,o as qa,p as Va,q as Mo,T as Ka,r as Ui,s as er,t as ss,u as Ns,v as rs,w as Ct,x as tr,y as Tt,Z as qr,G as Jt,z as sr,B as Io,J as Rt,K as fc,N as xi,O as gc,Q as Ya,V as Vr,W as Hi,Y as xc,_ as Ga,$ as yr,a0 as ja,a1 as qi,a2 as bc,a3 as Vi}from"./icons-ByYwtuRc.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();var Lo={exports:{}},ra={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=k,vc=Symbol.for("react.element"),jc=Symbol.for("react.fragment"),wc=Object.prototype.hasOwnProperty,yc=pc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kc={key:!0,ref:!0,__self:!0,__source:!0};function $o(s,e,t){var r,i={},n=null,o=null;t!==void 0&&(n=""+t),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wc.call(e,r)&&!kc.hasOwnProperty(r)&&(i[r]=e[r]);if(s&&s.defaultProps)for(r in e=s.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vc,type:s,key:n,ref:o,props:i,_owner:yc.current}}ra.Fragment=jc;ra.jsx=$o;ra.jsxs=$o;Lo.exports=ra;var a=Lo.exports,Fo,Ki=ac;Fo=Ki.createRoot,Ki.hydrateRoot;const Pe=({isDarkMode:s})=>{const[e,t]=k.useState({x:0,y:0}),[r,i]=k.useState(!1),[n,o]=k.useState(!1),[l,c]=k.useState(!1);return k.useEffect(()=>{const d=p=>{t({x:p.clientX,y:p.clientY}),i(!0)},u=()=>{i(!0)},h=()=>{i(!1)},m=()=>{c(!0)},f=()=>{c(!1)};document.addEventListener("mousemove",d),document.addEventListener("mouseenter",u),document.addEventListener("mouseleave",h),document.addEventListener("mousedown",m),document.addEventListener("mouseup",f);const b=document.querySelectorAll('button, a, input, select, textarea, [role="button"], [onclick], [tabindex], .interactive'),x=()=>{o(!0)},g=()=>{o(!1)};return b.forEach(p=>{p.addEventListener("mouseenter",x),p.addEventListener("mouseleave",g)}),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseenter",u),document.removeEventListener("mouseleave",h),document.removeEventListener("mousedown",m),document.removeEventListener("mouseup",f),b.forEach(p=>{p.removeEventListener("mouseenter",x),p.removeEventListener("mouseleave",g)})}},[]),typeof window<"u"&&"ontouchstart"in window?null:a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:`
          /* Hide default cursor */
          * {
            cursor: none !important;
          }
          
          /* Show default cursor on touch devices */
          @media (hover: none) and (pointer: coarse) {
            * {
              cursor: auto !important;
            }
            .custom-cursor {
              display: none !important;
            }
          }
        `}}),a.jsxs("div",{className:"custom-cursor fixed pointer-events-none z-[9999] transition-opacity duration-300",style:{left:e.x,top:e.y,opacity:r?1:0,transform:"translate(-50%, -50%)"},children:[a.jsx("div",{className:`absolute w-4 h-4 rounded-full transition-all duration-200 ease-out ${s?"bg-gradient-to-r from-cyan-400 to-sky-400 shadow-lg shadow-cyan-400/60 ring-2 ring-cyan-300/50":"bg-gradient-to-r from-cyan-500 to-sky-500 shadow-lg shadow-cyan-500/60 ring-2 ring-cyan-400/50"} ${l?"scale-75":"scale-100"}`,style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),a.jsx("div",{className:`absolute w-6 h-6 rounded-full transition-all duration-300 ease-out ${s?"border-2 border-cyan-300/60 shadow-lg shadow-cyan-400/40":"border-2 border-cyan-400/60 shadow-lg shadow-cyan-500/40"} ${n?"scale-125 opacity-100":"scale-100 opacity-80"}`,style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),a.jsx("div",{className:`absolute w-12 h-12 rounded-full transition-all duration-400 ease-out ${s?"border border-sky-300/40 shadow-lg shadow-sky-400/30":"border border-sky-400/40 shadow-lg shadow-sky-500/30"} ${n?"scale-150 opacity-60":"scale-100 opacity-40"}`,style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),a.jsx("div",{className:`absolute w-20 h-20 rounded-full transition-all duration-500 ease-out ${s?"border border-cyan-200/30 shadow-lg shadow-cyan-400/20":"border border-cyan-300/30 shadow-lg shadow-cyan-500/20"} ${n?"scale-175 opacity-30":"scale-100 opacity-20"}`,style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),l&&a.jsx("div",{className:`absolute w-16 h-16 rounded-full animate-ping ${s?"bg-cyan-400/40":"bg-cyan-500/40"}`,style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`absolute w-1.5 h-1.5 rounded-full animate-pulse ${s?"bg-cyan-300":"bg-cyan-400"}`,style:{left:"calc(50% - 10px)",top:"calc(50% - 10px)",animationDelay:"0ms"}}),a.jsx("div",{className:`absolute w-1.5 h-1.5 rounded-full animate-pulse ${s?"bg-sky-300":"bg-sky-400"}`,style:{left:"calc(50% + 10px)",top:"calc(50% - 10px)",animationDelay:"200ms"}}),a.jsx("div",{className:`absolute w-1.5 h-1.5 rounded-full animate-pulse ${s?"bg-cyan-300":"bg-cyan-400"}`,style:{left:"calc(50% - 10px)",top:"calc(50% + 10px)",animationDelay:"400ms"}}),a.jsx("div",{className:`absolute w-1.5 h-1.5 rounded-full animate-pulse ${s?"bg-sky-300":"bg-sky-400"}`,style:{left:"calc(50% + 10px)",top:"calc(50% + 10px)",animationDelay:"600ms"}}),a.jsx("div",{className:`absolute w-1 h-1 rounded-full animate-pulse ${s?"bg-cyan-200":"bg-cyan-300"}`,style:{left:"calc(50% - 15px)",top:"calc(50% - 15px)",animationDelay:"100ms"}}),a.jsx("div",{className:`absolute w-1 h-1 rounded-full animate-pulse ${s?"bg-sky-200":"bg-sky-300"}`,style:{left:"calc(50% + 15px)",top:"calc(50% - 15px)",animationDelay:"300ms"}}),a.jsx("div",{className:`absolute w-1 h-1 rounded-full animate-pulse ${s?"bg-cyan-200":"bg-cyan-300"}`,style:{left:"calc(50% - 15px)",top:"calc(50% + 15px)",animationDelay:"500ms"}}),a.jsx("div",{className:`absolute w-1 h-1 rounded-full animate-pulse ${s?"bg-sky-200":"bg-sky-300"}`,style:{left:"calc(50% + 15px)",top:"calc(50% + 15px)",animationDelay:"700ms"}})]})]})]})},_c="modulepreload",Nc=function(s){return"/"+s},Yi={},mr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(t.map(c=>{if(c=Nc(c),c in Yi)return;Yi[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":_c,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&n(l.reason);return e().catch(n)})},Sc=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>mr(async()=>{const{default:r}=await Promise.resolve().then(()=>Es);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class bi extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Cc extends bi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gi extends bi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xi extends bi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xa;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Xa||(Xa={}));var Tc=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class Ec{constructor(e,{headers:t={},customFetch:r,region:i=Xa.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Sc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Tc(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:u}).catch(x=>{throw new Cc(x)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Gi(h);if(!h.ok)throw new Xi(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return f==="application/json"?b=yield h.json():f==="application/octet-stream"?b=yield h.blob():f==="text/event-stream"?b=h:f==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof Xi||i instanceof Gi?i.context:void 0}}})}}var Ue={},pi={},aa={},fr={},ia={},na={},Pc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ss=Pc();const Ac=Ss.fetch,zo=Ss.fetch.bind(Ss),Bo=Ss.Headers,Dc=Ss.Request,Rc=Ss.Response,Es=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bo,Request:Dc,Response:Rc,default:zo,fetch:Ac},Symbol.toStringTag,{value:"Module"})),Oc=ic(Es);var oa={};Object.defineProperty(oa,"__esModule",{value:!0});let Mc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};oa.default=Mc;var Wo=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(na,"__esModule",{value:!0});const Ic=Wo(Oc),Lc=Wo(oa);let $c=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ic.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var o,l,c;let d=null,u=null,h=null,m=n.status,f=n.statusText;if(n.ok){if(this.method!=="HEAD"){const p=await n.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=n.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await n.text();try{d=JSON.parse(x),Array.isArray(d)&&n.status===404&&(u=[],d=null,m=200,f="OK")}catch{n.status===404&&x===""?(m=204,f="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d?.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,f="OK"),d&&this.shouldThrowOnError)throw new Lc.default(d)}return{error:d,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(i=i.catch(n=>{var o,l,c;return{error:{message:`${(o=n?.name)!==null&&o!==void 0?o:"FetchError"}: ${n?.message}`,details:`${(l=n?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=n?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};na.default=$c;var Fc=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ia,"__esModule",{value:!0});const zc=Fc(na);let Bc=class extends zc.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:n=i}={}){const o=n?`${n}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const n=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:n=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ia.default=Bc;var Wc=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fr,"__esModule",{value:!0});const Uc=Wc(ia);let Hc=class extends Uc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};fr.default=Hc;var qc=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(aa,"__esModule",{value:!0});const Ms=qc(fr);let Vc=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let n=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ms.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ms.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:n=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),n||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ms.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new Ms.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ms.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};aa.default=Vc;var la={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.version=void 0;ca.version="0.0.0-automated";Object.defineProperty(la,"__esModule",{value:!0});la.DEFAULT_HEADERS=void 0;const Kc=ca;la.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kc.version}`};var Uo=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pi,"__esModule",{value:!0});const Yc=Uo(aa),Gc=Uo(fr),Xc=la;let Jc=class Ho{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Xc.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Yc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ho(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:n}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=t);const d=Object.assign({},this.headers);return n&&(d.Prefer=`count=${n}`),new Gc.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};pi.default=Jc;var Ps=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.PostgrestError=Ue.PostgrestBuilder=Ue.PostgrestTransformBuilder=Ue.PostgrestFilterBuilder=Ue.PostgrestQueryBuilder=Ue.PostgrestClient=void 0;const qo=Ps(pi);Ue.PostgrestClient=qo.default;const Vo=Ps(aa);Ue.PostgrestQueryBuilder=Vo.default;const Ko=Ps(fr);Ue.PostgrestFilterBuilder=Ko.default;const Yo=Ps(ia);Ue.PostgrestTransformBuilder=Yo.default;const Go=Ps(na);Ue.PostgrestBuilder=Go.default;const Xo=Ps(oa);Ue.PostgrestError=Xo.default;var Zc=Ue.default={PostgrestClient:qo.default,PostgrestQueryBuilder:Vo.default,PostgrestFilterBuilder:Ko.default,PostgrestTransformBuilder:Yo.default,PostgrestBuilder:Go.default,PostgrestError:Xo.default};const{PostgrestClient:Qc,PostgrestQueryBuilder:rx,PostgrestFilterBuilder:ax,PostgrestTransformBuilder:ix,PostgrestBuilder:nx,PostgrestError:ox}=Zc;class ed{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const td="2.15.1",sd=`realtime-js/${td}`,rd="1.0.0",Ja=1e4,ad=1e3,id=100;var qs;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(qs||(qs={}));var ye;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ye||(ye={}));var tt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(tt||(tt={}));var Za;(function(s){s.websocket="websocket"})(Za||(Za={}));var Xt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Xt||(Xt={}));class nd{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),n=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+i));o=o+i;const c=r.decode(e.slice(o,o+n));o=o+n;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Jo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(me||(me={}));const Ji=(s,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,o)=>(n[o]=od(o,s,e,i),n),{})},od=(s,e,t,r)=>{const i=e.find(l=>l.name===s),n=i?.type,o=t[s];return n&&!r.includes(n)?Zo(n,o):Qa(o)},Zo=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return ud(e,t)}switch(s){case me.bool:return ld(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return cd(e);case me.json:case me.jsonb:return dd(e);case me.timestamp:return hd(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Qa(e);default:return Qa(e)}},Qa=s=>s,ld=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},cd=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},dd=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},ud=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let n;const o=s.slice(1,t);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(l=>Zo(e,l))}return s},hd=s=>typeof s=="string"?s.replace(" ","T"):s,Qo=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class wa{constructor(e,t,r={},i=Ja){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zi;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Zi||(Zi={}));class Vs{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vs.syncState(this.state,i,n,o),this.pendingDiffs.forEach(c=>{this.state=Vs.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Vs.syncDiff(this.state,i,n,o),l())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const n=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(n,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=n[d];if(h){const m=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),b=u.filter(g=>f.indexOf(g.presence_ref)<0),x=h.filter(g=>m.indexOf(g.presence_ref)<0);b.length>0&&(l[d]=b),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(n,{joins:l,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:n,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}r(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,i(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qi;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Qi||(Qi={}));var Ks;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ks||(Ks={}));var xt;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(xt||(xt={}));class vi{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wa(this,tt.join,this.params,this.timeout),this.rejoinTimer=new Jo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ye.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tt.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new Vs(this),this.broadcastEndpointURL=Qo(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ye.closed){const{config:{broadcast:n,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Ks.PRESENCE]&&this.bindings[Ks.PRESENCE].length>0,u={},h={broadcast:n,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(xt.CHANNEL_ERROR,m)),this._onClose(()=>e?.(xt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){e?.(xt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,x=(f=b?.length)!==null&&f!==void 0?f:0,g=[];for(let p=0;p<x;p++){const j=b[p],{filter:{event:v,schema:N,table:y,filter:S}}=j,_=m&&m[p];if(_&&_.event===v&&_.schema===N&&_.table===y&&_.filter===S)g.push(Object.assign(Object.assign({},j),{id:_.id}));else{this.unsubscribe(),this.state=ye.errored,e?.(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(xt.SUBSCRIBED);return}}).receive("error",m=>{this.state=ye.errored,e?.(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===ye.joined&&e===Ks.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),d.receive("ok",()=>n("ok")),d.receive("error",()=>n("error")),d.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ye.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new wa(this,tt.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ye.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,n=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(n),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new wa(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>id){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,n;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=tt;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var b,x,g;return((b=f.filter)===null||b===void 0?void 0:b.event)==="*"||((g=(x=f.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(n=this.bindings[o])===null||n===void 0||n.filter(f=>{var b,x,g,p,j,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const N=f.id,y=(b=f.filter)===null||b===void 0?void 0:b.event;return N&&((x=t.ids)===null||x===void 0?void 0:x.includes(N))&&(y==="*"||y?.toLocaleLowerCase()===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const N=(j=(p=f?.filter)===null||p===void 0?void 0:p.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return N==="*"||N===((v=t?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const b=m.data,{schema:x,table:g,commit_timestamp:p,type:j,errors:v}=b;m=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:p,eventType:j,new:{},old:{},errors:v}),this._getPayloadRecords(b))}f.callback(m,r)})}_isClosed(){return this.state===ye.closed}_isJoined(){return this.state===ye.joined}_isJoining(){return this.state===ye.joining}_isLeaving(){return this.state===ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),n={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&vi.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tt.close,{},e)}_onError(e){this._on(tt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ji(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ji(e.columns,e.old_record)),t}}const en=()=>{},kr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},md=[1e3,2e3,5e3,1e4],fd=1e4,gd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xd{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ja,this.transport=null,this.heartbeatIntervalMs=kr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=en,this.ref=0,this.reconnectTimer=null,this.logger=en,this.conn=null,this.sendBuffer=[],this.serializer=new nd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...o)=>mr(async()=>{const{default:l}=await Promise.resolve().then(()=>Es);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):n=fetch,(...o)=>n(...o)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Za.websocket}`,this.httpEndpoint=Qo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ed.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rd}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qs.connecting:return Xt.Connecting;case qs.open:return Xt.Open;case qs.closing:return Xt.Closing;default:return Xt.Closed}}isConnected(){return this.connectionState()===Xt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(n=>n.topic===r);if(i)return i;{const n=new vi(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:r,payload:i,ref:n}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${n})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ad,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},kr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:n,ref:o}=t,l=o?`(${o})`:"",c=n.status||"";this.log("receive",`${c} ${r} ${i} ${l}`.trim(),n),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,n,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(tt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([gd],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:sd};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(tt.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Jo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,n,o,l,c,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Ja,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:kr.HEARTBEAT_INTERVAL,this.worker=(n=e?.worker)!==null&&n!==void 0?n:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:u=>md[u-1]||fd,this.encode=(c=e?.encode)!==null&&c!==void 0?c:(u,h)=>h(JSON.stringify(u)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class ji extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Te(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class bd extends ji{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ei extends ji{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var pd=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const el=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>mr(async()=>{const{default:r}=await Promise.resolve().then(()=>Es);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},vd=()=>pd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield mr(()=>Promise.resolve().then(()=>Es),void 0)).Response:Response}),ti=s=>{if(Array.isArray(s))return s.map(t=>ti(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=ti(r)}),e},jd=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var ns=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const ya=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),wd=(s,e,t)=>ns(void 0,void 0,void 0,function*(){const r=yield vd();s instanceof r&&!t?.noResolveJson?s.json().then(i=>{const n=s.status||500,o=i?.statusCode||n+"";e(new bd(ya(i),n,o))}).catch(i=>{e(new ei(ya(i),i))}):e(new ei(ya(s),s))}),yd=(s,e,t,r)=>{const i={method:s,headers:e?.headers||{}};return s==="GET"||!r?i:(jd(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function gr(s,e,t,r,i,n){return ns(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,yd(e,r,i,n)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>wd(c,l,r))})})}function Kr(s,e,t,r){return ns(this,void 0,void 0,function*(){return gr(s,"GET",e,t,r)})}function bt(s,e,t,r,i){return ns(this,void 0,void 0,function*(){return gr(s,"POST",e,r,i,t)})}function si(s,e,t,r,i){return ns(this,void 0,void 0,function*(){return gr(s,"PUT",e,r,i,t)})}function kd(s,e,t,r){return ns(this,void 0,void 0,function*(){return gr(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function tl(s,e,t,r,i){return ns(this,void 0,void 0,function*(){return gr(s,"DELETE",e,r,i,t)})}var Be=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const _d={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nd{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=el(i)}uploadOrUpdate(e,t,r,i){return Be(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},tn),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield(e=="PUT"?si:bt)(this.fetch,`${this.url}/object/${u}`,n,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}})}upload(e,t,r){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Be(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:tn.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield si(this.fetch,l.toString(),c,{headers:u});return{data:{path:n,fullPath:h.Key},error:null}}catch(c){if(Te(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Be(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const n=yield bt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+n.url),l=o.searchParams.get("token");if(!l)throw new ji("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}update(e,t,r){return Be(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Be(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Be(this,void 0,void 0,function*(){try{return{data:{path:(yield bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Be(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield bt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Be(this,void 0,void 0,function*(){try{const i=yield bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}download(e,t){return Be(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),o=n?`?${n}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Kr(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Te(l))return{data:null,error:l};throw l}})}info(e){return Be(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Kr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ti(r),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}exists(e){return Be(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield kd(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Te(r)&&r instanceof ei){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&i.push(n);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return Be(this,void 0,void 0,function*(){try{return{data:yield tl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}list(e,t,r){return Be(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},_d),t),{prefix:e||""});return{data:yield bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Sd="2.10.5",Cd={"X-Client-Info":`storage-js/${Sd}`};var ms=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class Td{constructor(e,t={},r,i){const n=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href,this.headers=Object.assign(Object.assign({},Cd),t),this.fetch=el(r)}listBuckets(){return ms(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Te(e))return{data:null,error:e};throw e}})}getBucket(e){return ms(this,void 0,void 0,function*(){try{return{data:yield Kr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ms(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ms(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ms(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ms(this,void 0,void 0,function*(){try{return{data:yield tl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}}class Ed extends Td{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Nd(this.url,this.headers,e,this.fetch)}}const Pd="2.55.0";let Bs="";typeof Deno<"u"?Bs="deno":typeof document<"u"?Bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bs="react-native":Bs="node";const Ad={"X-Client-Info":`supabase-js-${Bs}/${Pd}`},Dd={headers:Ad},Rd={schema:"public"},Od={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Md={};var Id=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const Ld=s=>{let e;return s?e=s:typeof fetch>"u"?e=zo:e=fetch,(...t)=>e(...t)},$d=()=>typeof Headers>"u"?Bo:Headers,Fd=(s,e,t)=>{const r=Ld(t),i=$d();return(n,o)=>Id(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:s;let d=new i(o?.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(n,Object.assign(Object.assign({},o),{headers:d}))})};var zd=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};function Bd(s){return s.endsWith("/")?s:s+"/"}function Wd(s,e){var t,r;const{db:i,auth:n,realtime:o,global:l}=s,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),n),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>zd(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const sl="2.71.1",js=30*1e3,ri=3,ka=ri*js,Ud="http://localhost:9999",Hd="supabase.auth.token",qd={"X-Client-Info":`gotrue-js/${sl}`},ai="X-Supabase-Api-Version",rl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Vd=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kd=10*60*1e3;class wi extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function te(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Yd extends wi{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Gd(s){return te(s)&&s.name==="AuthApiError"}class al extends wi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Lt extends wi{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Nt extends Lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xd(s){return te(s)&&s.name==="AuthSessionMissingError"}class _r extends Lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nr extends Lt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Sr extends Lt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jd(s){return te(s)&&s.name==="AuthImplicitGrantRedirectError"}class sn extends Lt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ii extends Lt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function _a(s){return te(s)&&s.name==="AuthRetryableFetchError"}class rn extends Lt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ni extends Lt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),an=` 	
\r=`.split(""),Zd=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<an.length;e+=1)s[an[e].charCodeAt(0)]=-2;for(let e=0;e<Yr.length;e+=1)s[Yr[e].charCodeAt(0)]=e;return s})();function nn(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Yr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Yr[r]),e.queuedBits-=6}}function il(s,e,t){const r=Zd[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function on(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=o=>{tu(o,r,t)};for(let o=0;o<s.length;o+=1)il(s.charCodeAt(o),i,n);return e.join("")}function Qd(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function eu(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Qd(r,e)}}function tu(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if(!(s>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function su(s){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)il(s.charCodeAt(i),t,r);return new Uint8Array(e)}function ru(s){const e=[];return eu(s,t=>e.push(t)),new Uint8Array(e)}function au(s){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return s.forEach(i=>nn(i,t,r)),nn(null,t,r),e.join("")}function iu(s){return Math.round(Date.now()/1e3)+s}function nu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const et=()=>typeof window<"u"&&typeof document<"u",Wt={tested:!1,writable:!1},nl=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wt.tested)return Wt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Wt.tested=!0,Wt.writable=!0}catch{Wt.tested=!0,Wt.writable=!1}return Wt.writable};function ou(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const ol=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>mr(async()=>{const{default:r}=await Promise.resolve().then(()=>Es);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},lu=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ws=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Ut=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},_t=async(s,e)=>{await s.removeItem(e)};class da{constructor(){this.promise=new da.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}da.promiseConstructor=Promise;function Na(s){const e=s.split(".");if(e.length!==3)throw new ni("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Vd.test(e[r]))throw new ni("JWT not in base64url format");return{header:JSON.parse(on(e[0])),payload:JSON.parse(on(e[1])),signature:su(e[2]),raw:{header:e[0],payload:e[1]}}}async function cu(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function du(s,e){return new Promise((r,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await s(n);if(!e(n,null,o)){r(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function uu(s){return("0"+s.toString(16)).substr(-2)}function hu(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let n=0;n<56;n++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,uu).join("")}async function mu(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function fu(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await mu(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fs(s,e,t=!1){const r=hu();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await ws(s,`${e}-code-verifier`,i);const n=await fu(r);return[n,r===n?"plain":"s256"]}const gu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xu(s){const e=s.headers.get(ai);if(!e||!e.match(gu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bu(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function pu(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vu=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gs(s){if(!vu.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sa(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ln(s){return JSON.parse(JSON.stringify(s))}var ju=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};const Kt=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),wu=[502,503,504];async function cn(s){var e;if(!lu(s))throw new ii(Kt(s),0);if(wu.includes(s.status))throw new ii(Kt(s),s.status);let t;try{t=await s.json()}catch(n){throw new al(Kt(n),n)}let r;const i=xu(s);if(i&&i.getTime()>=rl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new rn(Kt(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new rn(Kt(t),s.status,t.weak_password.reasons);throw new Yd(Kt(t),s.status||500,r)}const yu=(s,e,t,r)=>{const i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function ae(s,e,t,r){var i;const n=Object.assign({},r?.headers);n[ai]||(n[ai]=rl["2024-01-01"].name),r?.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ku(s,e,t+l,{headers:n,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function ku(s,e,t,r,i,n){const o=yu(e,r,i,n);let l;try{l=await s(t,Object.assign({},o))}catch(c){throw console.error(c),new ii(Kt(c),0)}if(l.ok||await cn(l),r?.noResolveJson)return l;try{return await l.json()}catch(c){await cn(c)}}function mt(s){var e;let t=null;Cu(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=iu(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function dn(s){const e=mt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function St(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function _u(s){return{data:s,error:null}}function Nu(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n}=s,o=ju(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Su(s){return s}function Cu(s){return s.access_token&&s.refresh_token&&s.expires_in}const Ca=["global","local","others"];var Tu=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};class Eu{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=ol(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Ca[0]){if(Ca.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ca.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:St})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Tu(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Nu,redirectTo:t?.redirectTo})}catch(t){if(te(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:St})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,n,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:Su});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(b.split(";")[1].split("=")[1]);d[`${g}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(te(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){gs(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:St})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){gs(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:St})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){gs(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:St})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){gs(e.userId);try{const{data:t,error:r}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(te(t))return{data:null,error:t};throw t}}async _deleteFactor(e){gs(e.userId),gs(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}}function un(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Pu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xs={debug:!!(globalThis&&nl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ll extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Au extends ll{}async function Du(s,e,t){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),xs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw xs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Au(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(xs.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Pu();const Ru={url:Ud,storageKey:Hd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hn(s,e,t){return await t()}const bs={};class rr{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rr.nextInstanceID,rr.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Ru),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Eu({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ol(i.fetch),this.lock=i.lock||hn,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:et()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Du:this.lock=hn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:nl()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=un(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=un(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=bs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=bs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ou(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),et()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),Jd(n)){const c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return te(t)?{error:t}:{error:new al("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const n=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:mt}),{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,i;try{let n;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,b=null;this.flowType==="pkce"&&([f,b]=await fs(this.storage,this.storageKey)),n=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:u,password:h,data:(t=m?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:b},xform:mt})}else if("phone"in e){const{phone:u,password:h,options:m}=e;n=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=m?.data)!==null&&r!==void 0?r:{},channel:(i=m?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:mt})}else throw new Nr("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:o,options:l}=e;t=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:dn})}else if("phone"in e){const{phone:n,password:o,options:l}=e;t=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:dn})}else throw new Nr("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _r}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,n,o,l,c,d,u,h,m,f;let b,x;if("message"in e)b=e.message,x=e.signature;else{const{chain:g,wallet:p,statement:j,options:v}=e;let N;if(et())if(typeof p=="object")N=p;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))N=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=p}const y=new URL((t=v?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const S=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),j?{statement:j}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)b=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),x=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${y.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${(i=(r=v?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((n=v?.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await N.signMessage(new TextEncoder().encode(b),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:g,error:p}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:au(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:mt});if(p)throw p;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new _r}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:p})}catch(g){if(te(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await Ut(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:n,error:o}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:mt});if(await _t(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new _r}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:o})}catch(n){if(te(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:n,nonce:o}=e,l=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:mt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _r}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,n,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await fs(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Nr("You must provide either an email or phone number.")}catch(l){if(te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let i,n;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:mt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await fs(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:_u})}catch(n){if(te(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Nt;const{error:i}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:n}=e,{error:o}=await ae(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n?.captchaToken}},redirectTo:n?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:n}=e,{data:o,error:l}=await ae(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new Nr("You must provide either an email or phone number and a type")}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ut(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ka:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Ut(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Sa()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:St}):await this._useSession(async t=>{var r,i,n;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nt}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:St})})}catch(t){if(te(t))return Xd(t)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:n}=r;if(n)throw n;if(!i.session)throw new Nt;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await fs(this.storage,this.storageKey));const{data:d,error:u}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:St});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nt;const t=Date.now()/1e3;let r=t,i=!0,n=null;const{payload:o}=Na(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};n=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(te(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Nt;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!et())throw new Sr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Sr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new sn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sn("No code detected.");const{data:j,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:n,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!n||!l||!o||!d)throw new Sr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const f=m-u;f*1e3<=js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const b=m-h;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,m,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,m,u);const{data:x,error:g}=await this._getUser(n);if(g)throw g;const p={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ut(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:n}=t;if(n)return{error:n};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Gd(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=nu(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:n},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await fs(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(te(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async n=>{var o,l,c,d,u;const{data:h,error:m}=n;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return et()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(te(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:n,error:o}=t;if(o)throw o;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await du(async i=>(i>0&&await cu(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mt})),(i,n)=>{const o=200*Math.pow(2,i);return n&&_a(n)&&Date.now()+o-r<js})}catch(r){if(this._debug(t,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),et()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ut(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ut(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ws(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:Sa()}else if(i&&!i.user&&!i.user){const o=await Ut(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await _t(this.storage,this.storageKey+"-user"),await ws(this.storage,this.storageKey,i)):i.user=Sa()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const n=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ka;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${ka}s`),n){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),_a(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new da;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new Nt;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const l={session:n.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(n){if(this._debug(i,"error",n),te(n)){const o={session:null,error:n};return _a(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let l=0;l<n.length;l+=1)console.error(n[l]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await ws(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const n=ln(i);await ws(this.storage,this.storageKey,n)}else{const i=ln(t);await ws(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${js}ms, refresh threshold is ${ri} ticks`),i<=ri&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ll)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,o]=await fs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r?.queryParams){const n=new URLSearchParams(r.queryParams);i.push(n.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;return n?{data:null,error:n}:await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:n,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;if(n)return{data:null,error:n};const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(te(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;return n?{data:null,error:n}:await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(te(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Na(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Kd>i)return r;const{data:n,error:o}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=i,r=n.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:b}=await this.getSession();if(b||!f.session)return{data:null,error:b};r=f.session.access_token}const{header:i,payload:n,signature:o,raw:{header:l,payload:c}}=Na(r);t?.allowExpired||bu(n.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:n,header:i,signature:o},error:null}}const u=pu(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,ru(`${l}.${c}`)))throw new ni("Invalid JWT signature");return{data:{claims:n,header:i,signature:o},error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}}rr.nextInstanceID=0;const Ou=rr;class Mu extends Ou{constructor(e){super(e)}}var Iu=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class Lu{constructor(e,t,r){var i,n,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=Bd(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Rd,realtime:Md,auth:Object.assign(Object.assign({},Od),{storageKey:d}),global:Dd},h=Wd(r??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Fd(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Qc(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Ed(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ec(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Iu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:n,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mu({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new xd(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mn=(s,e,t)=>new Lu(s,e,t);function $u(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$u()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ta="https://fctvityawavmuethxxix.supabase.co",Fu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjdHZpdHlhd2F2bXVldGh4eGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwNzA5ODAsImV4cCI6MjA3MDY0Njk4MH0.d6T4MrGgV3vKZjcQ02vjf8_oDeRu9SJQXNgA0LJHlq0";console.log("🔧 فحص متغيرات البيئة:");console.log("URL موجود:",!0);console.log("Key موجود:",!0);let Ye;if(console.log("🔧 فحص متغيرات البيئة:"),console.log("URL:",Ta),console.log("Key موجود:",!0),!Ta.includes("supabase.co"))console.error("❌ URL غير صحيح! يجب أن يحتوي على supabase.co"),Ye=mn("https://dummy.supabase.co","dummy-key"),Ye.isConnected=!1,Ye.connectionError="Invalid Supabase URL. URL must contain supabase.co";else{Ye=mn(Ta,Fu,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),console.log("✅ تم إنشاء عميل Supabase بنجاح");const s=async()=>{try{console.log("🔍 اختبار الاتصال مع Supabase...");const e=new Promise((n,o)=>{setTimeout(()=>o(new Error("Connection timeout")),3e4)}),t=Ye.auth.getSession(),{data:r,error:i}=await Promise.race([t,e]);i?(console.error("❌ خطأ في الاتصال مع Supabase:",i),console.error("❌ تأكد من صحة متغيرات البيئة"),Ye.isConnected=!1,Ye.connectionError=i.message):(console.log("✅ الاتصال مع Supabase يعمل بنجاح"),Ye.isConnected=!0)}catch(e){console.error("❌ فشل في اختبار الاتصال:",e),Ye.isConnected=!1,Ye.connectionError=e instanceof Error?e.message:"Connection failed",setTimeout(()=>{console.log("🔄 إعادة محاولة الاتصال مع Supabase..."),s()},5e3)}};setTimeout(()=>{s()},1e3)}const H=Ye;typeof window<"u"&&(window.supabase=Ye,console.log("🌐 تم إضافة Supabase كمتغير عام للتصحيح"));const ys=[{code:"TR",name:"تركيا",flag:"🇹🇷",dialCode:"+90"},{code:"SA",name:"السعودية",flag:"🇸🇦",dialCode:"+966"},{code:"AE",name:"الإمارات",flag:"🇦🇪",dialCode:"+971"},{code:"EG",name:"مصر",flag:"🇪🇬",dialCode:"+20"},{code:"JO",name:"الأردن",flag:"🇯🇴",dialCode:"+962"},{code:"LB",name:"لبنان",flag:"🇱🇧",dialCode:"+961"},{code:"SY",name:"سوريا",flag:"🇸🇾",dialCode:"+963"},{code:"IQ",name:"العراق",flag:"🇮🇶",dialCode:"+964"},{code:"KW",name:"الكويت",flag:"🇰🇼",dialCode:"+965"},{code:"QA",name:"قطر",flag:"🇶🇦",dialCode:"+974"},{code:"BH",name:"البحرين",flag:"🇧🇭",dialCode:"+973"},{code:"OM",name:"عمان",flag:"🇴🇲",dialCode:"+968"},{code:"YE",name:"اليمن",flag:"🇾🇪",dialCode:"+967"},{code:"PS",name:"فلسطين",flag:"🇵🇸",dialCode:"+970"},{code:"MA",name:"المغرب",flag:"🇲🇦",dialCode:"+212"},{code:"DZ",name:"الجزائر",flag:"🇩🇿",dialCode:"+213"},{code:"TN",name:"تونس",flag:"🇹🇳",dialCode:"+216"},{code:"LY",name:"ليبيا",flag:"🇱🇾",dialCode:"+218"},{code:"SD",name:"السودان",flag:"🇸🇩",dialCode:"+249"}],zu=()=>{const[s,e]=k.useState({user:null,profile:null,session:null,loading:!0,hasNotifications:!1}),[t,r]=k.useState(!1);k.useEffect(()=>{if(console.log("🔄 useAuth useEffect triggered, initialized:",t),t){console.log("🔄 useAuth already initialized, skipping...");return}console.log("🔄 بدء تهيئة useAuth..."),r(!0),(async()=>{try{console.log("📡 جلب الجلسة الحالية...");const p=H.auth.getSession(),j=new Promise((S,_)=>{setTimeout(()=>_(new Error("Session retrieval timeout")),1e4)}),{data:{session:v},error:N}=await Promise.race([p,j]);if(N){console.error("❌ خطأ في جلب الجلسة:",N),e(S=>({...S,loading:!1}));return}if(console.log("📋 الجلسة الحالية:",v?"موجودة":"غير موجودة"),localStorage.getItem("manuallySignedOut")==="true"){console.log("🚪 المستخدم قام بتسجيل الخروج يدوياً - تجاهل الجلسة المحفوظة"),localStorage.removeItem("manuallySignedOut"),e(S=>({...S,loading:!1}));return}if(v?.user){console.log("👤 المستخدم موجود:",v.user.email),e(S=>({...S,user:v.user,session:v,loading:!1}));try{const S=await n(v.user.id),_=await o(v.user.id);e(C=>({...C,profile:S,hasNotifications:_}))}catch(S){console.error("❌ خطأ في جلب الملف الشخصي:",S)}}else e(S=>({...S,loading:!1}))}catch(p){console.error("💥 خطأ غير متوقع في getInitialSession:",p),e(j=>({...j,loading:!1}))}})();const{data:{subscription:g}}=H.auth.onAuthStateChange(async(p,j)=>{if(console.log("🔔 تغيير حالة المصادقة:",p,"at",new Date().toISOString()),console.log("🔔 تغيير حالة المصادقة:",p),console.log("👤 المستخدم:",j?.user?.email||"غير موجود"),console.log("📊 الجلسة:",j?"موجودة":"غير موجودة"),p==="SIGNED_OUT"){console.log("🚪 حدث تسجيل الخروج - تنظيف الحالة فوراً..."),e({user:null,profile:null,session:null,loading:!1,hasNotifications:!1});return}if(p!=="SIGNED_OUT"&&e(v=>({...v,loading:!0})),j?.user){if(console.log("✅ جلسة نشطة - تحديث الحالة..."),console.log("👤 معرف المستخدم من الجلسة:",j.user.id),e(v=>({...v,user:j.user,session:j,loading:!1})),s.user?.id===j.user.id&&s.profile){console.log("🔄 نفس المستخدم موجود بالفعل، تحديث الجلسة فقط");return}try{const v=await n(j.user.id),N=await o(j.user.id),y={user:j.user,profile:v?{...v,role:v.role}:null,session:j,loading:!1,hasNotifications:N};console.log("📊 الحالة الجديدة من onAuthStateChange:",y),e(y),console.log("✅ تم تحديث حالة المصادقة بنجاح")}catch(v){console.error("❌ خطأ في تحديث حالة المصادقة:",v);const N={user:j.user,profile:{id:j.user.id,email:j.user.email||"",full_name:j.user.email?.split("@")[0]||"مستخدم",phone:void 0,country_code:"+90",role:j.user.email==="admin@tevasul.group"?"admin":j.user.email?.includes("moderator")?"moderator":"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},session:j,loading:!1,hasNotifications:!1};e(N),console.log("✅ تم تعيين حالة المصادقة الاحتياطية")}}else console.log("❌ لا توجد جلسة - تنظيف الحالة..."),e({user:null,profile:null,session:null,loading:!1,hasNotifications:!1})});return()=>{g.unsubscribe()}},[t]),k.useEffect(()=>{if(s.user&&!s.profile&&!s.loading){const x=`profile-loading-${s.user.id}`;if(sessionStorage.getItem(x))return;console.log("🔄 إعادة جلب الملف الشخصي للمستخدم:",s.user.id),sessionStorage.setItem(x,"true"),e(g=>({...g,loading:!0})),n(s.user.id).then(g=>{if(g)e(p=>({...p,profile:g,loading:!1})),console.log("✅ تم تحديث الملف الشخصي:",g.full_name);else{if(console.log("🔄 محاولة إنشاء profile من user_metadata..."),!s.user)return;i(s.user).then(p=>{p?(e(j=>({...j,profile:p,loading:!1})),console.log("✅ تم إنشاء الملف الشخصي من user_metadata:",p.full_name)):e(j=>({...j,loading:!1}))})}sessionStorage.removeItem(x)}).catch(g=>{console.error("❌ خطأ في جلب الملف الشخصي:",g),e(p=>({...p,loading:!1})),sessionStorage.removeItem(x)})}},[s.user,s.profile,s.loading]),k.useEffect(()=>{if(s.loading){const x=setTimeout(()=>{console.log("⏰ Timeout: Loading state stuck, forcing completion"),e(g=>({...g,loading:!1}))},5e3);return()=>clearTimeout(x)}},[s.loading]),k.useEffect(()=>{if(!t){const x=setTimeout(()=>{console.log("⏰ Init Timeout: Forcing initialization completion"),r(!0),e(g=>({...g,loading:!1}))},3e3);return()=>clearTimeout(x)}},[t]);const i=async x=>{try{if(console.log("🔄 إنشاء profile من user_metadata للمستخدم:",x.id),console.log("📋 user_metadata:",x.user_metadata),!x.user_metadata)return console.log("❌ لا توجد user_metadata"),null;const g=x.email==="admin@tevasul.group",p=x.email?.includes("moderator")||x.email?.includes("moderator@"),{data:j,error:v}=await H.from("user_profiles").upsert({id:x.id,email:x.email,full_name:x.user_metadata.full_name||x.email?.split("@")[0]||"مستخدم",phone:x.user_metadata.phone||null,country_code:x.user_metadata.country_code||"+90",role:g?"admin":p?"moderator":"user"}).select().single();return!v&&j?(console.log("✅ تم إنشاء profile بنجاح:",j.full_name),j):(console.error("❌ فشل في إنشاء profile:",v),null)}catch(g){return console.error("💥 خطأ في إنشاء profile من user_metadata:",g),null}},n=async x=>{try{console.log("📄 جلب الملف الشخصي للمستخدم:",x);const{data:{user:g},error:p}=await H.auth.getUser();if(p||!g)return console.error("❌ خطأ في جلب بيانات المستخدم:",p),null;console.log("👤 بيانات المستخدم من auth:",g.email);const j=g.email==="admin@tevasul.group",v=g.email?.includes("moderator")||g.email?.includes("moderator@");try{console.log("🔍 محاولة جلب الملف الشخصي من قاعدة البيانات...");const N=H.from("user_profiles").select("*").eq("id",x).single(),y=new Promise((C,T)=>{setTimeout(()=>T(new Error("Database query timeout")),2e3)}),{data:S,error:_}=await Promise.race([N,y]);if(console.log("🔍 نتيجة الاستعلام:",{data:!!S,error:_?.message}),!_&&S)return console.log("✅ تم جلب الملف الشخصي بنجاح"),console.log("📋 بيانات الملف الشخصي:",S),S;if(_&&_.code==="PGRST116")return console.log("⚠️ لم يتم العثور على الملف الشخصي، إنشاء ملف احتياطي..."),{id:x,email:g.email||"",full_name:g.email?.split("@")[0]||"مستخدم",phone:void 0,country_code:"+90",role:j?"admin":v?"moderator":"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};if(_?.code==="PGRST116"){console.log("🔄 محاولة إنشاء ملف شخصي جديد...");const C=H.from("user_profiles").upsert({id:x,email:g.email,full_name:g.user_metadata?.full_name||g.email?.split("@")[0]||"مستخدم",phone:g.user_metadata?.phone||null,country_code:g.user_metadata?.country_code||"+90",role:j?"admin":v?"moderator":"user"}).select().single(),T=new Promise((M,R)=>{setTimeout(()=>R(new Error("Profile creation timeout")),3e3)}),{data:I,error:F}=await Promise.race([C,T]);if(!F&&I)return console.log("✅ تم إنشاء ملف شخصي جديد:",I.full_name),I}}catch(N){console.error("💥 خطأ في قاعدة البيانات:",N)}return console.log("🔄 إنشاء ملف شخصي افتراضي"),{id:x,email:g.email||"",full_name:g.user_metadata?.full_name||g.email?.split("@")[0]||"مستخدم",phone:g.user_metadata?.phone||null,country_code:g.user_metadata?.country_code||"+90",role:j?"admin":v?"moderator":"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(g){return console.error("💥 خطأ في جلب الملف الشخصي:",g),null}},o=async x=>{try{console.log("🔔 فحص الإشعارات للمستخدم:",x);const g=new Date;g.setDate(g.getDate()-7);const p=H.from("service_requests").select("id, status, updated_at, created_at").eq("user_id",x).gt("updated_at",g.toISOString()),j=new Promise((S,_)=>{setTimeout(()=>_(new Error("Notifications query timeout")),1500)}),{data:v,error:N}=await Promise.race([p,j]);if(N)return console.error("خطأ في فحص الإشعارات:",N),!1;console.log("📋 الطلبات المحدثة:",v?.length||0);const y=v?.some(S=>{const _=new Date(S.created_at),C=new Date(S.updated_at),T=Math.abs(C.getTime()-_.getTime());return console.log(`📝 طلب ${S.id}:`,{created:_.toISOString(),updated:C.toISOString(),diffSeconds:Math.floor(T/1e3),hasUpdate:T>3e4}),T>3e4})||!1;return console.log("🔔 حالة الإشعارات:",y),y}catch(g){return console.error("💥 خطأ في فحص الإشعارات (timeout or other):",g),!1}},l=async()=>{console.log("🧹 تنظيف الإشعارات..."),e(x=>({...x,hasNotifications:!1}))},c=async x=>{try{if(console.log("🚀 بدء عملية إنشاء الحساب..."),console.log("📧 البريد الإلكتروني:",x.email),console.log("🔧 فحص الاتصال مع Supabase..."),H.isConnected===!1){const N=H.connectionError||"Supabase is not properly configured";return console.error("❌ خطأ في إعداد Supabase:",N),{error:{message:N,status:500,name:"ConfigurationError"}}}const{data:g,error:p}=await H.auth.getSession();if(p)return console.error("❌ خطأ في الاتصال مع Supabase:",p),{error:p};console.log("✅ الاتصال مع Supabase يعمل بنجاح"),console.log("👤 إنشاء المستخدم في Supabase Auth..."),console.log("📧 البيانات المرسلة:",{email:x.email,name:x.name,phone:x.phone,countryCode:x.countryCode});const{data:j,error:v}=await H.auth.signUp({email:x.email,password:x.password,options:{data:{full_name:x.name,phone:x.phone,country_code:x.countryCode},emailRedirectTo:`${window.location.origin}/auth/verify-email`,emailConfirm:!0}});if(v){console.error("❌ خطأ في إنشاء الحساب:",v),console.error("❌ تفاصيل الخطأ:",{message:v.message,status:v.status,name:v.name,details:v.details,hint:v.hint});let N={...v};return v.message?.includes("Database error saving new user")?N.message="خطأ في قاعدة البيانات. يرجى المحاولة مرة أخرى أو الاتصال بالدعم الفني.":v.message?.includes("User already registered")&&(N.message="هذا البريد الإلكتروني مسجل مسبقاً. يرجى تسجيل الدخول بدلاً من ذلك."),{error:N}}if(console.log("✅ تم إنشاء المستخدم بنجاح"),console.log("👤 معرف المستخدم:",j.user?.id),console.log("📧 تأكيد البريد الإلكتروني مطلوب:",j.user?.email_confirmed_at?"لا":"نعم"),console.log("📋 بيانات user_metadata:",j.user?.user_metadata),j.user&&!j.user.user_metadata?.full_name){console.log("🔄 تحديث user_metadata...");const{error:N}=await H.auth.updateUser({data:{full_name:x.name,phone:x.phone,country_code:x.countryCode}});N?console.error("⚠️ خطأ في تحديث user_metadata:",N):console.log("✅ تم تحديث user_metadata بنجاح")}if(j.user){console.log("⏳ انتظار إنشاء الملف الشخصي عبر الـ trigger..."),await new Promise(S=>setTimeout(S,3e3)),console.log("🔄 تحديث حالة المصادقة بعد التسجيل...");const N=await n(j.user.id),y=await o(j.user.id);e({user:j.user,profile:N,session:j.session,loading:!1,hasNotifications:y}),console.log("✅ تم تحديث الحالة بعد التسجيل")}return{error:null}}catch(g){return console.error("💥 خطأ غير متوقع في إنشاء الحساب:",g),console.error("💥 تفاصيل الخطأ غير المتوقع:",g),{error:g}}},d=async x=>{try{if(console.log("🔐 بدء عملية تسجيل الدخول..."),console.log("📧 البريد الإلكتروني:",x.emailOrPhone),!H||H.supabaseUrl==="https://dummy.supabase.co")return console.error("❌ Supabase غير مُعد بشكل صحيح"),{error:{message:"Supabase غير مُعد بشكل صحيح. يرجى التحقق من متغيرات البيئة.",status:500,name:"ConfigurationError"}};try{if(console.log("🔍 اختبار الاتصال قبل تسجيل الدخول..."),x.emailOrPhone==="test@test.com"&&x.password==="test123")console.log("🧪 وضع الاختبار - تجاوز اختبار الاتصال");else{const j=new Promise((S,_)=>{setTimeout(()=>_(new Error("Connection timeout")),15e3)}),v=H.auth.getSession(),{data:N,error:y}=await Promise.race([v,j]);if(y)return console.error("❌ خطأ في الاتصال مع Supabase:",y),{error:{message:"لا يمكن الاتصال بخادم Supabase. تحقق من اتصال الإنترنت ومتغيرات البيئة.",status:500,name:"ConnectionError"}};console.log("✅ الاتصال مع Supabase يعمل")}}catch(j){return console.error("❌ فشل في اختبار الاتصال:",j),{error:{message:"فشل في الاتصال بخادم Supabase. تحقق من اتصال الإنترنت.",status:500,name:"ConnectionError"}}}const{data:g,error:p}=await H.auth.signInWithPassword({email:x.emailOrPhone,password:x.password});if(p)return console.error("❌ خطأ في تسجيل الدخول:",p),{error:p};if(console.log("✅ تم تسجيل الدخول بنجاح"),console.log("👤 المستخدم:",g.user?.email),g.user){console.log("🔄 تحديث حالة المصادقة يدوياً..."),console.log("👤 معرف المستخدم:",g.user.id);const j={user:g.user,profile:{id:g.user.id,email:g.user.email||"",full_name:g.user.email?.split("@")[0]||"مستخدم",phone:void 0,country_code:"+90",role:g.user.email==="admin@tevasul.group"?"admin":"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},session:g.session,loading:!1,hasNotifications:!1};console.log("📊 الحالة الفورية:",j),e(j),console.log("✅ تم تحديث الحالة فورياً"),setTimeout(async()=>{try{console.log("🔄 محاولة جلب الملف الشخصي في الخلفية...");const v=await n(g.user.id),N=await o(g.user.id);v&&(e(y=>({...y,profile:v,hasNotifications:N})),console.log("✅ تم تحديث الملف الشخصي في الخلفية"))}catch(v){console.error("❌ خطأ في جلب الملف الشخصي في الخلفية:",v)}},100)}return{error:null}}catch(g){return console.error("💥 خطأ غير متوقع في تسجيل الدخول:",g),{error:g}}},u=async()=>{console.log("🚪 بدء عملية تسجيل الخروج...");try{console.log("🧹 تنظيف الحالة المحلية فوراً..."),e({user:null,profile:null,session:null,loading:!1,hasNotifications:!1}),console.log("🧹 تنظيف localStorage..."),localStorage.removeItem("justLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("openServiceRequest"),localStorage.removeItem("pendingServiceRequest"),console.log("🧹 تنظيف sessionStorage..."),Object.keys(sessionStorage).forEach(j=>{(j.startsWith("profile-loading-")||j.startsWith("user-visited-")||j.startsWith("admin-redirect-"))&&sessionStorage.removeItem(j)}),console.log("🧹 تنظيف جلسة Supabase من localStorage..."),Object.keys(localStorage).forEach(j=>{(j.startsWith("sb-")||j.includes("supabase"))&&(localStorage.removeItem(j),console.log("🗑️ تم حذف:",j))}),localStorage.setItem("manuallySignedOut","true"),console.log("🌐 محاولة تسجيل الخروج من Supabase...");const{error:p}=await H.auth.signOut();return p?(console.error("❌ خطأ في تسجيل الخروج من Supabase:",p),console.log("⚠️ تم تنظيف الحالة المحلية رغم فشل تسجيل الخروج من الخادم")):console.log("✅ تم تسجيل الخروج من Supabase بنجاح"),setTimeout(()=>{console.log("🔄 إعادة تحميل الحالة للتأكد من التحديث..."),e(j=>({...j}))},100),console.log("✅ تم إكمال عملية تسجيل الخروج"),{error:null}}catch(x){return console.error("💥 خطأ غير متوقع في تسجيل الخروج:",x),e({user:null,profile:null,session:null,loading:!1,hasNotifications:!1}),{error:x}}};return{...s,signUp:c,signIn:d,signOut:u,clearNotifications:l,debugAuthState:()=>{console.log("🔍 Debug Auth State:",{user:s.user?.email||"null",profile:s.profile?.full_name||"null",loading:s.loading,session:s.session?"exists":"null",hasNotifications:s.hasNotifications,initialized:t})},forceClearAuth:()=>{console.log("🧹 Force clearing auth state..."),e({user:null,profile:null,session:null,loading:!1,hasNotifications:!1}),r(!1),console.log("✅ Auth state cleared")},testSignOut:async()=>{console.log("🧪 Testing sign out..."),console.log("📊 Before sign out:",{user:s.user?.email,profile:s.profile?.full_name,loading:s.loading});const x=await u();return console.log("📊 After sign out:",{user:s.user?.email,profile:s.profile?.full_name,loading:s.loading}),console.log("📊 Sign out result:",x),x},simpleSignOut:()=>{console.log("🚪 Simple sign out (bypassing Supabase)..."),e({user:null,profile:null,session:null,loading:!1,hasNotifications:!1}),localStorage.removeItem("justLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("openServiceRequest"),localStorage.removeItem("pendingServiceRequest"),Object.keys(localStorage).forEach(g=>{(g.startsWith("sb-")||g.includes("supabase"))&&localStorage.removeItem(g)}),localStorage.setItem("manuallySignedOut","true"),console.log("✅ Simple sign out completed")}}},cl=k.createContext(void 0),Le=()=>{const s=k.useContext(cl);if(s===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return s},Bu=({children:s})=>{const e=zu();return a.jsx(cl.Provider,{value:e,children:s})},dl=k.createContext(void 0),$e=()=>{const s=k.useContext(dl);if(!s)throw new Error("useLanguage must be used within a LanguageProvider");return s},Wu={ar:{"navbar.home":"الرئيسية","navbar.contact":"تواصل معنا","navbar.account":"حسابي","navbar.settings":"الإعدادات","navbar.help":"المساعدة","navbar.logout":"تسجيل الخروج","navbar.welcome":"مرحباً بك في مجموعة تواصل","navbar.darkMode":"الوضع الليلي","navbar.lightMode":"الوضع النهاري","hero.title":"أنجز معنا جميع خدماتك في تركيا","hero.subtitle":"نحن شركاؤك الموثوقون لإنجاز جميع احتياجاتك في تركيا بكفاءة واحترافية عالية","hero.cta.primary":"ابدأ الآن","hero.cta.secondary":"تعرف على خدماتنا","services.title":"خدماتنا المتميزة","services.subtitle":"نقدم مجموعة شاملة من الخدمات المصممة خصيصاً لتلبية احتياجاتك","services.healthInsurance.title":"التأمين الصحي للأجانب","services.healthInsurance.description":"تأمين صحي شامل للأجانب في تركيا بأفضل الأسعار والتغطية","services.healthInsurance.fullDescription":"نقدم خدمات التأمين الصحي الشاملة للأجانب في تركيا. نحن نتعاون مع أفضل شركات التأمين التركية لتقديم أفضل الأسعار والتغطية الشاملة. تأميننا يشمل جميع الخدمات الطبية والعلاجية مع شبكة واسعة من المستشفيات والعيادات في جميع أنحاء تركيا.","services.healthInsurance.features":["تأمين صحي شامل للأفراد والعائلات","أسعار تنافسية حسب الفئة العمرية","تغطية شاملة لجميع الخدمات الطبية","شبكة واسعة من المستشفيات والعيادات","خدمة عملاء متاحة على مدار الساعة","إجراءات سريعة وبسيطة","تأمين لمدة سنة أو سنتين","استشارة مجانية لاختيار أفضل خطة"],"services.healthInsurance.benefits":["حماية مالية شاملة للأسرة","راحة البال والاطمئنان","توفير في التكاليف الطبية","خدمة طبية عالية الجودة"],"services.healthInsurance.process":["تحديد الفئة العمرية ومدة التأمين","اختيار شركة التأمين المناسبة","حساب السعر النهائي","تقديم الطلب والحصول على التأمين","استلام وثائق التأمين"],"services.translation.title":"خدمات الترجمة المحلفة","services.translation.description":"ترجمة معتمدة لجميع الوثائق والمستندات الرسمية والقانونية","services.translation.fullDescription":"نقدم خدمات الترجمة المحلفة الأكثر دقة واحترافية في تركيا. فريقنا من المترجمين المعتمدين يضمن ترجمة دقيقة لجميع وثائقك الرسمية والقانونية والطبية والأكاديمية. نحن معتمدون من قبل الجهات الرسمية التركية ونضمن قبول ترجماتنا في جميع المؤسسات الحكومية والخاصة.","services.translation.features":["ترجمة معتمدة من الجهات الرسمية","مترجمون محلفون ومعتمدون","ترجمة فورية للحالات العاجلة","دقة 100% في الترجمة","أسعار تنافسية","خدمة عملاء 24/7","ضمان القبول في جميع المؤسسات","ترجمة جميع اللغات"],"services.translation.benefits":["توفير الوقت والجهد","ضمان الدقة والاحترافية","قبول مضمون في المؤسسات","أسعار مناسبة للجميع"],"services.translation.process":["إرسال الوثائق المطلوب ترجمتها عبر الواتساب أو الإيميل","تقييم الوثائق وتحديد السعر والمدة الزمنية","البدء في عملية الترجمة من قبل مترجمين معتمدين","مراجعة الترجمة من قبل فريق الجودة","تسليم الترجمة المعتمدة والمختومة"],"services.travel.title":"خدمات السفر والسياحة","services.travel.description":"تنظيم الرحلات السياحية وحجز الفنادق وخدمات النقل والمواصلات","services.travel.fullDescription":"اكتشف جمال تركيا مع باقاتنا السياحية المتنوعة والمصممة خصيصاً لتناسب جميع الأذواق والميزانيات. نحن نقدم تجربة سياحية لا تُنسى تشمل أفضل الوجهات التركية مع خدمات متكاملة من النقل والإقامة والجولات السياحية المصحوبة بمرشدين عرب متخصصين.","services.travel.features":["برامج سياحية متنوعة ومخصصة","حجز فنادق بأفضل الأسعار","نقل مريح وآمن","مرشدين سياحيين عرب","جولات ثقافية وتاريخية","رحلات عائلية وشبابية","خدمة عملاء طوال الرحلة","تأمين سفر شامل"],"services.travel.benefits":["تجربة سياحية مميزة","أسعار تنافسية","راحة وأمان تام","ذكريات لا تُنسى"],"services.travel.process":["استشارة مجانية لتحديد نوع الرحلة المناسبة","تصميم برنامج سياحي مخصص حسب رغباتك","حجز الفنادق ووسائل النقل","تنسيق الجولات السياحية والأنشطة","مرافقة ومتابعة طوال فترة الرحلة"],"services.legal.title":"الاستشارات القانونية","services.legal.description":"استشارات قانونية متخصصة في القانون التركي والإجراءات القضائية","services.legal.fullDescription":"احصل على أفضل الاستشارات القانونية من فريق من المحامين المتخصصين في القانون التركي. نحن نقدم خدمات قانونية شاملة تغطي جميع جوانب القانون التركي من العقارات والشركات إلى قضايا الأسرة والجنسية. خبرتنا الواسعة تضمن لك الحصول على أفضل النتائج.","services.legal.features":["محامون متخصصون في القانون التركي","استشارات في جميع المجالات القانونية","تمثيل قانوني أمام المحاكم","صياغة العقود والاتفاقيات","استشارات عقارية وتجارية","قضايا الجنسية والإقامة","حل النزاعات والوساطة","خدمات قانونية للشركات"],"services.legal.benefits":["حماية حقوقك القانونية","توفير المال والوقت","نتائج مضمونة","سرية تامة"],"services.legal.process":["استشارة أولية مجانية لفهم قضيتك","تحليل الوضع القانوني وتقييم الخيارات","وضع استراتيجية قانونية مناسبة","تنفيذ الإجراءات القانونية المطلوبة","متابعة القضية حتى الوصول للنتيجة المطلوبة"],"services.government.title":"الخدمات الحكومية","services.government.description":"إنجاز جميع المعاملات الحكومية والرسمية في تركيا بسرعة وكفاءة عالية","services.government.fullDescription":"نحن خبراؤك في إنجاز جميع المعاملات الحكومية في تركيا. من استخراج الوثائق الرسمية إلى تجديد الإقامات وإنجاز معاملات الجنسية، نحن نوفر عليك الوقت والجهد ونضمن إنجاز معاملاتك بأسرع وقت ممكن وبأعلى مستوى من الدقة والاحترافية.","services.government.features":["استخراج جميع الوثائق الرسمية","تجديد الإقامات والتصاريح","معاملات الجنسية التركية","تسجيل الشركات والعلامات التجارية","معاملات الضرائب والتأمينات","استخراج رخص القيادة","معاملات العقارات والطابو","خدمات البلدية والمحافظة"],"services.government.benefits":["توفير الوقت والجهد","تجنب الأخطاء والتأخير","خبرة في النظام التركي","متابعة مستمرة"],"services.government.process":["تحديد نوع المعاملة المطلوبة والوثائق اللازمة","جمع وتحضير جميع الوثائق المطلوبة","تقديم الطلبات في الجهات المختصة","متابعة سير المعاملة مع الجهات الحكومية","استلام الوثائق وتسليمها للعميل"],"services.insurance.title":"خدمات التأمين الصحي وتأمين المركبات","services.insurance.description":"مساعدة في الحصول على التأمين الصحي وتأمين المركبات بأفضل الأسعار","services.insurance.fullDescription":"احم نفسك وعائلتك ومركبتك مع خدماتنا المتخصصة في التأمين. نحن نساعدك في اختيار أفضل بوالص التأمين الصحي وتأمين المركبات التي تناسب احتياجاتك وميزانيتك. شراكاتنا مع أفضل شركات التأمين في تركيا تضمن لك الحصول على أفضل الأسعار والتغطية الشاملة.","services.insurance.features":["تأمين صحي شامل للأفراد والعائلات","تأمين المركبات ضد جميع المخاطر","أفضل الأسعار في السوق","تغطية شاملة ومرنة","خدمة المطالبات السريعة","شبكة واسعة من المستشفيات","تأمين السفر والحوادث","استشارة مجانية لاختيار التأمين المناسب"],"services.insurance.benefits":["حماية مالية شاملة","راحة البال والأمان","خدمات طبية متميزة","توفير في التكاليف"],"services.insurance.process":["تقييم احتياجاتك التأمينية الشخصية","مقارنة العروض من أفضل شركات التأمين","اختيار البوليصة الأنسب لك","إتمام إجراءات التأمين والدفع","متابعة مستمرة وخدمة ما بعد البيع"],"howWeWork.title":"كيف نعمل؟","howWeWork.step1":"تقييم احتياجاتك الأمنية الشخصية","howWeWork.step2":"مقارنة العروض من أفضل شركات التأمين","howWeWork.step3":"اختيار البوليصة الأنسب لك","howWeWork.step4":"إتمام إجراءات التأمين والدفع","howWeWork.step5":"متابعة مستمرة وخدمة ما بعد البيع","stats.clients":"عميل راضٍ","stats.services":"خدمة مكتملة","stats.experience":"سنوات خبرة","stats.satisfaction":"نسبة الرضا","contact.title":"تواصل معنا","contact.subtitle":"نحن هنا لمساعدتك في جميع احتياجاتك","contact.form.name":"الاسم الكامل","contact.form.email":"البريد الإلكتروني","contact.form.phone":"رقم الهاتف","contact.form.message":"رسالتك","contact.form.submit":"إرسال الرسالة","contact.form.sending":"جاري الإرسال...","contact.info.phone":"الهاتف","contact.info.email":"البريد الإلكتروني","contact.info.address":"العنوان","contact.info.hours":"ساعات العمل","auth.login":"تسجيل الدخول","auth.signup":"إنشاء حساب","auth.welcome":"مرحباً بك مرة أخرى","auth.joinUs":"انضم إلى مجموعة تواصل","common.loading":"جاري التحميل...","common.error":"حدث خطأ","common.success":"تم بنجاح","common.cancel":"إلغاء","common.save":"حفظ","common.edit":"تعديل","common.delete":"حذف","common.close":"إغلاق","nav.home":"الرئيسية","nav.services":"خدماتنا","nav.about":"عنا","nav.contact":"تواصل معنا","hero.mainTitle":"أنجز جميع خدماتك في تركيا","hero.withUs":"مع مجموعة تواصل","hero.description":"نحن شريكك الموثوق في تركيا لإنجاز جميع خدماتك الحكومية والتجارية والشخصية بأعلى مستوى من الاحترافية والكفاءة","hero.discoverServices":"اكتشف خدماتنا","hero.contactNow":"تواصل معنا الآن","hero.stats.clients":"عميل راضٍ","hero.stats.service":"خدمة على مدار الساعة","hero.stats.experience":"سنوات خبرة","hero.trust.licensed":" نحمي معلوماتك الشخصية","hero.trust.fast":"خدمة سريعة","hero.trust.excellent":"تقييم ممتاز","hero.available":"متاح الآن","hero.discoverServicesShort":"اكتشف خدماتنا","services.discoverMore":"اكتشف المزيد","services.quickRequest":"طلب سريع","services.loginToRequest":"سجل دخولك لطلب الخدمة","about.title":"أنجز معنا","about.description1":"مجموعة تواصل هي شريكك الموثوق في تركيا لإنجاز جميع خدماتك بكفاءة واحترافية عالية. نحن نفهم تحديات المقيمين والزوار في تركيا ونقدم الحلول المناسبة.","about.description2":"بفضل خبرتنا الواسعة وشبكة علاقاتنا القوية، نضمن لك إنجاز معاملاتك في أسرع وقت ممكن وبأعلى مستوى من الجودة والدقة.","about.stats.clients":"5000+ عميل راضٍ","about.stats.experience":"10+ سنوات خبرة","about.features.team":"فريق متخصص","about.features.speed":"سرعة في الإنجاز","about.features.security":"أمان وخصوصية","about.features.care":"رعاية شاملة","about.vision.title":"رؤيتنا","about.vision.description":"أن نكون الشريك الأول والأكثر ثقة للعرب في تركيا، ونقدم خدمات متميزة تسهل عليهم حياتهم وتحقق أهدافهم بكل يسر وسهولة.","contact.info.title":"معلومات الاتصال","contact.form.title":"أرسل لنا رسالة","contact.form.serviceType":"نوع الخدمة","contact.form.selectService":"اختر نوع الخدمة","contact.form.translation":"خدمات الترجمة المحلفة","contact.form.travel":"خدمات السفر والسياحة","contact.form.legal":"الاستشارات القانونية","contact.form.government":"الخدمات الحكومية","contact.form.insurance":"خدمات التأمين الصحي وتأمين المركبات","footer.description":"شريكك الموثوق لإنجاز جميع خدماتك في تركيا","footer.copyright":"© 2024 مجموعة تواصل. جميع الحقوق محفوظة. صنع بـ ❤️ في تركيا","user.profile":"تعديل الملف الشخصي","user.transactions":"معاملاتي","user.notifications":"إعدادات الإشعارات","user.help":"المساعدة والدعم","user.logout":"تسجيل الخروج","user.welcome":"مرحباً،","language.change":"تغيير اللغة","language.arabic":"العربية","language.turkish":"Türkçe","language.english":"English","admin.dashboard":"لوحة تحكم الأدمن","servicePage.whyChooseUs":"لماذا تختار مجموعة تواصل؟","servicePage.extensiveExperience":"خبرة واسعة","servicePage.extensiveExperienceDesc":"أكثر من 5 سنوات في خدمة العملاء العرب في تركيا","servicePage.fastCompletion":"إنجاز سريع","servicePage.fastCompletionDesc":"نضمن إنجاز خدماتك في أقصر وقت ممكن","servicePage.serviceFeatures":"مميزات الخدمة","servicePage.howWeWork":"كيف نعمل؟","servicePage.getFreeConsultation":"احصل على استشارة مجانية","servicePage.consultationDesc":"تواصل معنا الآن للحصول على استشارة مجانية حول خدماتنا","servicePage.contactNow":"تواصل معنا الآن","servicePage.requestServiceNow":"اطلب الخدمة الآن","servicePage.loginToRequest":"سجل دخولك لطلب الخدمة","servicePage.readyToStart":"مستعد لبدء رحلتك معنا؟","servicePage.joinThousands":"انضم إلى آلاف العملاء الراضين الذين وثقوا بخدماتنا","servicePage.bookFreeConsultation":"احجز استشارة مجانية","servicePage.talkToExpert":"تحدث مع خبير","brand.name":"أنجز"},tr:{"navbar.home":"Ana Sayfa","navbar.contact":"İletişim","navbar.account":"Hesabım","navbar.settings":"Ayarlar","navbar.help":"Yardım","navbar.logout":"Çıkış Yap","navbar.welcome":"Tevasul Groupna Hoş Geldiniz","navbar.darkMode":"Karanlık Mod","navbar.lightMode":"Aydınlık Mod","hero.title":"Türkiye'deki Tüm Hizmetlerinizi Bizimle Tamamlayın","hero.subtitle":"Türkiye'deki tüm ihtiyaçlarınızı yüksek verimlilik ve profesyonellikle karşılamak için güvenilir ortağınızız","hero.cta.primary":"Şimdi Başla","hero.cta.secondary":"Hizmetlerimizi Keşfedin","services.title":"Özel Hizmetlerimiz","services.subtitle":"İhtiyaçlarınızı karşılamak için özel olarak tasarlanmış kapsamlı hizmet yelpazesi sunuyoruz","services.translation.title":"Yeminli Tercüme Hizmetleri","services.translation.description":"Tüm resmi ve yasal belgeler için onaylı tercüme","services.translation.fullDescription":"Türkiye'de en doğru ve profesyonel yeminli tercüme hizmetlerini sunuyoruz. Onaylı çevirmenlerimizden oluşan ekibimiz, tüm resmi, yasal, tıbbi ve akademik belgelerinizin doğru çevirisini garanti eder. Türk resmi makamları tarafından onaylıyız ve çevirilerimizin tüm devlet ve özel kurumlarda kabul edilmesini garanti ediyoruz.","services.translation.features":["Resmi makamlardan onaylı tercüme","Yeminli ve onaylı çevirmenler","Acil durumlar için anında tercüme","Çeviride %100 doğruluk","Rekabetçi fiyatlar","7/24 müşteri hizmetleri","Tüm kurumlarda kabul garantisi","Tüm dillerde tercüme"],"services.translation.benefits":["Zaman ve emek tasarrufu","Doğruluk ve profesyonellik garantisi","Kurumlarda garanti kabul","Herkes için uygun fiyatlar"],"services.translation.process":["Belgeleri WhatsApp veya e-posta ile gönderme","Belgeleri değerlendirme ve fiyat/süre belirleme","Onaylı çevirmenler tarafından çeviri sürecine başlama","Kalite ekibi tarafından çeviri incelemesi","Onaylı ve mühürlü çeviriyi teslim etme"],"services.travel.title":"Seyahat ve Turizm Hizmetleri","services.travel.description":"Tur organizasyonu, otel rezervasyonu ve ulaşım hizmetleri","services.travel.fullDescription":"Türkiye'nin güzelliklerini çeşitli ve özel olarak tasarlanmış tur paketlerimizle keşfedin. Tüm zevkler ve bütçeler için uygun. En iyi Türk destinasyonlarını kapsayan unutulmaz bir turistik deneyim sunuyoruz, ulaşım, konaklama ve Arap uzman rehberler eşliğinde turistik turlar dahil kapsamlı hizmetlerle.","services.travel.features":["Çeşitli ve özel tur programları","En iyi fiyatlarla otel rezervasyonu","Rahat ve güvenli ulaşım","Arap turist rehberleri","Kültürel ve tarihi turlar","Aile ve gençlik turları","Tüm seyahat boyunca müşteri hizmetleri","Kapsamlı seyahat sigortası"],"services.travel.benefits":["Özel turistik deneyim","Rekabetçi fiyatlar","Tam rahatlık ve güvenlik","Unutulmaz anılar"],"services.travel.process":["Uygun tur türünü belirlemek için ücretsiz danışmanlık","İsteklerinize göre özel turistik program tasarımı","Otel ve ulaşım araçları rezervasyonu","Turistik turlar ve aktivitelerin koordinasyonu","Tüm seyahat süresi boyunca eşlik ve takip"],"services.legal.title":"Hukuki Danışmanlık","services.legal.description":"Türk hukuku ve yasal prosedürler konusunda uzman hukuki danışmanlık","services.legal.fullDescription":"Türk hukuku konusunda uzman avukatlardan oluşan ekipten en iyi hukuki danışmanlığı alın. Gayrimenkul ve şirketlerden aile ve vatandaşlık davalarına kadar Türk hukukunun tüm yönlerini kapsayan kapsamlı hukuki hizmetler sunuyoruz. Geniş deneyimimiz size en iyi sonuçları garanti eder.","services.legal.features":["Türk hukuku konusunda uzman avukatlar","Tüm hukuki alanlarda danışmanlık","Mahkemelerde hukuki temsil","Sözleşme ve anlaşma hazırlama","Gayrimenkul ve ticari danışmanlık","Vatandaşlık ve ikamet davaları","Uyuşmazlık çözümü ve arabuluculuk","Şirketler için hukuki hizmetler"],"services.legal.benefits":["Hukuki haklarınızın korunması","Para ve zaman tasarrufu","Garantili sonuçlar","Tam gizlilik"],"services.legal.process":["Davanızı anlamak için ücretsiz ilk danışmanlık","Hukuki durum analizi ve seçenek değerlendirmesi","Uygun hukuki strateji geliştirme","Gerekli hukuki işlemlerin yürütülmesi","İstenen sonuca ulaşana kadar davanın takibi"],"services.government.title":"Devlet Hizmetleri","services.government.description":"Türkiye'deki tüm resmi işlemleri hızlı ve yüksek verimlilikle tamamlama","services.government.fullDescription":"Türkiye'deki tüm devlet işlemlerini tamamlamada uzmanlarınız. Resmi belge çıkarmaktan ikamet yenilemeye ve vatandaşlık işlemlerini tamamlamaya kadar, size zaman ve emek tasarrufu sağlıyoruz ve işlemlerinizi mümkün olan en kısa sürede en yüksek doğruluk ve profesyonellik seviyesinde tamamlamanızı garanti ediyoruz.","services.government.features":["Tüm resmi belgelerin çıkarılması","İkamet ve izinlerin yenilenmesi","Türk vatandaşlığı işlemleri","Şirket ve ticari marka kayıtları","Vergi ve sigorta işlemleri","Sürücü belgesi çıkarma","Gayrimenkul ve tapu işlemleri","Belediye ve valilik hizmetleri"],"services.government.benefits":["Zaman ve emek tasarrufu","Hata ve gecikmelerden kaçınma","Türk sistemi konusunda deneyim","Sürekli takip"],"services.government.process":["Gerekli işlem türünü ve belgeleri belirleme","Gerekli tüm belgeleri toplama ve hazırlama","İlgili makamlara başvuruları sunma","Devlet kurumlarıyla işlem takibi","Belgeleri alma ve müşteriye teslim etme"],"services.insurance.title":"Sağlık Sigortası ve Araç Sigortası Hizmetleri","services.insurance.description":"En iyi fiyatlarla sağlık sigortası ve araç sigortası alma konusunda yardım","services.insurance.fullDescription":"Sigorta konusunda uzmanlaşmış hizmetlerimizle kendinizi, ailenizi ve aracınızı koruyun. İhtiyaçlarınız ve bütçenize uygun en iyi sağlık sigortası ve araç sigortası poliçelerini seçmenize yardımcı oluyoruz. Türkiye'nin en iyi sigorta şirketleriyle ortaklığımız size en iyi fiyatları ve kapsamlı kapsamayı garanti eder.","services.insurance.features":["Bireyler ve aileler için kapsamlı sağlık sigortası","Tüm risklere karşı araç sigortası","Piyasadaki en iyi fiyatlar","Kapsamlı ve esnek kapsam","Hızlı talep hizmeti","Geniş hastane ağı","Seyahat ve kaza sigortası","Uygun sigortayı seçmek için ücretsiz danışmanlık"],"services.insurance.benefits":["Kapsamlı finansal koruma","Huzur ve güvenlik","Mükemmel tıbbi hizmetler","Maliyet tasarrufu"],"services.insurance.process":["Kişisel sigorta ihtiyaçlarınızı değerlendirme","En iyi sigorta şirketlerinden teklifleri karşılaştırma","Size en uygun poliçeyi seçme","Sigorta işlemlerini ve ödemeyi tamamlama","Sürekli takip ve satış sonrası hizmet"],"howWeWork.title":"Nasıl Çalışıyoruz?","howWeWork.step1":"Kişisel güvenlik ihtiyaçlarınızı değerlendirme","howWeWork.step2":"En iyi sigorta şirketlerinden teklifleri karşılaştırma","howWeWork.step3":"Size en uygun poliçeyi seçme","howWeWork.step4":"Sigorta işlemlerini ve ödemeyi tamamlama","howWeWork.step5":"Sürekli takip ve satış sonrası hizmet","stats.clients":"Memnun Müşteri","stats.services":"Tamamlanan Hizmet","stats.experience":"Yıl Deneyim","stats.satisfaction":"Memnuniyet Oranı","contact.title":"İletişime Geçin","contact.subtitle":"Tüm ihtiyaçlarınızda size yardımcı olmak için buradayız","contact.form.name":"Ad Soyad","contact.form.email":"E-posta","contact.form.phone":"Telefon Numarası","contact.form.message":"Mesajınız","contact.form.submit":"Mesaj Gönder","contact.form.sending":"Gönderiliyor...","contact.info.phone":"Telefon","contact.info.email":"E-posta","contact.info.address":"Adres","contact.info.hours":"Çalışma Saatleri","auth.login":"Giriş Yap","auth.signup":"Hesap Oluştur","auth.welcome":"Tekrar Hoş Geldiniz","auth.joinUs":"Tevasul Groupna Katılın","common.loading":"Yükleniyor...","common.error":"Bir hata oluştu","common.success":"Başarılı","common.cancel":"İptal","common.save":"Kaydet","common.edit":"Düzenle","common.delete":"Sil","common.close":"Kapat","nav.home":"Ana Sayfa","nav.services":"Hizmetlerimiz","nav.about":"Hakkımızda","nav.contact":"İletişim","hero.mainTitle":"Türkiye'deki Tüm Hizmetlerinizi Tamamlayın","hero.withUs":"Tevasul Group ile","hero.description":"Türkiye'deki tüm Resmi Dairelerde hizmetlerinizi en yüksek profesyonellik ve verimlilik seviyesinde tamamlamak için güvenilir ortağınızız","hero.discoverServices":"Hizmetlerimizi Keşfedin","hero.contactNow":"Şimdi İletişime Geçin","hero.stats.clients":"Memnun Müşteri","hero.stats.service":"Kesintisiz Hizmet","hero.stats.experience":"Yıl Deneyim","hero.trust.licensed":"Resmi Lisanslı","hero.trust.fast":"Hızlı Hizmet","hero.trust.excellent":"Mükemmel Değerlendirme","hero.available":"Şimdi Mevcut","hero.discoverServicesShort":"Hizmetlerimizi Keşfedin","services.discoverMore":"Daha Fazla Keşfedin","services.quickRequest":"Hızlı Talep","services.loginToRequest":"Hizmet Talep Etmek İçin Giriş Yapın","about.title":"Bizimle Tamamlayın","about.description1":"Tevasul Group, Türkiye'deki tüm hizmetlerinizi yüksek verimlilik ve profesyonellikle tamamlamak için güvenilir ortağınızdır. Türkiye'deki sakinlerin ve ziyaretçilerin karşılaştığı zorlukları anlıyoruz ve uygun çözümler sunuyoruz.","about.description2":"Geniş deneyimimiz ve güçlü ilişki ağımız sayesinde, işlemlerinizi mümkün olan en kısa sürede ve en yüksek kalite ve doğruluk seviyesinde tamamlamanızı garanti ediyoruz.","about.stats.clients":"5000+ Memnun Müşteri","about.stats.experience":"10+ Yıl Deneyim","about.features.team":"Uzman Ekip","about.features.speed":"Hızlı Tamamlama","about.features.security":"Güvenlik ve Gizlilik","about.features.care":"Kapsamlı Bakım","about.vision.title":"Vizyonumuz","about.vision.description":"Türkiye'deki Araplar için birinci ve en güvenilir ortak olmak, hayatlarını kolaylaştıran ve hedeflerini kolaylıkla gerçekleştirmelerini sağlayan mükemmel hizmetler sunmak.","contact.info.title":"İletişim Bilgileri","contact.form.title":"Bize Mesaj Gönderin","contact.form.serviceType":"Hizmet Türü","contact.form.selectService":"Hizmet Türünü Seçin","contact.form.translation":"Yeminli Tercüme Hizmetleri","contact.form.travel":"Seyahat ve Turizm Hizmetleri","contact.form.legal":"Hukuki Danışmanlık","contact.form.government":"Devlet Hizmetleri","contact.form.insurance":"Sağlık Sigortası ve Araç Sigortası Hizmetleri","footer.description":"Türkiye'deki tüm hizmetlerinizi tamamlamak için güvenilir ortağınız","footer.copyright":"© 2024 Tevasul Group. Tüm hakları saklıdır. Türkiye'de ❤️ ile yapıldı","user.profile":"Profil Düzenle","user.transactions":"İşlemlerim","user.notifications":"Bildirim Ayarları","user.help":"Yardım ve Destek","user.logout":"Çıkış Yap","user.welcome":"Merhaba,","language.change":"Dili Değiştir","language.arabic":"العربية","language.turkish":"Türkçe","language.english":"English","admin.dashboard":"Admin Paneli","servicePage.whyChooseUs":"Neden Tevasul Groupnu Seçmelisiniz?","servicePage.extensiveExperience":"Geniş Deneyim","servicePage.extensiveExperienceDesc":"Türkiye'de Arap müşterilere 5 yıldan fazla hizmet","servicePage.fastCompletion":"Hızlı Tamamlama","servicePage.fastCompletionDesc":"Hizmetlerinizi en kısa sürede tamamlamanızı garanti ediyoruz","servicePage.serviceFeatures":"Hizmet Özellikleri","servicePage.howWeWork":"Nasıl Çalışıyoruz?","servicePage.getFreeConsultation":"Ücretsiz Danışmanlık Alın","servicePage.consultationDesc":"Hizmetlerimiz hakkında ücretsiz danışmanlık için şimdi bizimle iletişime geçin","servicePage.contactNow":"Şimdi İletişime Geçin","servicePage.requestServiceNow":"Şimdi Hizmet Talep Edin","servicePage.loginToRequest":"Hizmet Talep Etmek İçin Giriş Yapın","servicePage.readyToStart":"Bizimle Yolculuğunuza Başlamaya Hazır mısınız?","servicePage.joinThousands":"Hizmetlerimize güvenen binlerce memnun müşteriye katılın","servicePage.bookFreeConsultation":"Ücretsiz Danışmanlık Rezervasyonu","servicePage.talkToExpert":"Uzmanla Konuşun","brand.name":"Tamamla","services.cards.translation.title":"Yeminli Tercüme Hizmetleri","services.cards.translation.description":"Tüm resmi ve yasal belgeler için onaylı tercüme","services.cards.travel.title":"Seyahat ve Turizm Hizmetleri","services.cards.travel.description":"Tur organizasyonu, otel rezervasyonu ve ulaşım hizmetleri","services.cards.legal.title":"Hukuki Danışmanlık","services.cards.legal.description":"Türk hukuku ve yasal prosedürler konusunda uzman hukuki danışmanlık","services.cards.government.title":"Devlet Hizmetleri","services.cards.government.description":"Türkiye'deki tüm resmi işlemleri hızlı ve yüksek verimlilikle tamamlama","services.cards.insurance.title":"Sağlık Sigortası ve Araç Sigortası Hizmetleri","services.cards.insurance.description":"En iyi fiyatlarla sağlık sigortası ve araç sigortası alma konusunda yardım"},en:{"navbar.home":"Home","navbar.contact":"Contact Us","navbar.account":"My Account","navbar.settings":"Settings","navbar.help":"Help","navbar.logout":"Logout","navbar.welcome":"Welcome to Tevasul Group","navbar.darkMode":"Dark Mode","navbar.lightMode":"Light Mode","hero.title":"Complete All Your Services in Turkey With Us","hero.subtitle":"We are your trusted partners to fulfill all your needs in Turkey with high efficiency and professionalism","hero.cta.primary":"Get Started","hero.cta.secondary":"Explore Our Services","services.title":"Our Distinguished Services","services.subtitle":"We offer a comprehensive range of services specifically designed to meet your needs","services.translation.title":"Certified Translation Services","services.translation.description":"Certified translation for all official and legal documents","services.translation.fullDescription":"We provide the most accurate and professional certified translation services in Turkey. Our team of certified translators ensures accurate translation of all your official, legal, medical, and academic documents. We are certified by Turkish official authorities and guarantee the acceptance of our translations in all government and private institutions.","services.translation.features":["Certified translation from official authorities","Sworn and certified translators","Instant translation for urgent cases","100% accuracy in translation","Competitive prices","24/7 customer service","Guaranteed acceptance in all institutions","Translation in all languages"],"services.translation.benefits":["Time and effort savings","Guaranteed accuracy and professionalism","Guaranteed acceptance in institutions","Affordable prices for everyone"],"services.translation.process":["Send documents for translation via WhatsApp or email","Evaluate documents and determine price and timeframe","Begin translation process by certified translators","Review translation by quality team","Deliver certified and stamped translation"],"services.travel.title":"Travel and Tourism Services","services.travel.description":"Tour organization, hotel booking, and transportation services","services.travel.fullDescription":"Discover the beauty of Turkey with our diverse and specially designed tour packages. Suitable for all tastes and budgets. We offer an unforgettable tourist experience covering the best Turkish destinations with comprehensive services including transportation, accommodation, and tourist tours accompanied by Arab expert guides.","services.travel.features":["Diverse and customized tour programs","Hotel booking at best prices","Comfortable and safe transportation","Arab tourist guides","Cultural and historical tours","Family and youth trips","Customer service throughout the trip","Comprehensive travel insurance"],"services.travel.benefits":["Distinguished tourist experience","Competitive prices","Complete comfort and safety","Unforgettable memories"],"services.travel.process":["Free consultation to determine suitable trip type","Custom tourist program design according to your preferences","Hotel and transportation booking","Coordination of tourist tours and activities","Accompaniment and follow-up throughout the trip period"],"services.legal.title":"Legal Consultancy","services.legal.description":"Specialized legal consultancy in Turkish law and judicial procedures","services.legal.fullDescription":"Get the best legal consultancy from a team of lawyers specialized in Turkish law. We provide comprehensive legal services covering all aspects of Turkish law from real estate and companies to family and citizenship cases. Our extensive experience guarantees you the best results.","services.legal.features":["Lawyers specialized in Turkish law","Consultancy in all legal fields","Legal representation in courts","Contract and agreement drafting","Real estate and commercial consultancy","Citizenship and residence cases","Dispute resolution and mediation","Legal services for companies"],"services.legal.benefits":["Protection of your legal rights","Money and time savings","Guaranteed results","Complete confidentiality"],"services.legal.process":["Free initial consultation to understand your case","Legal situation analysis and options evaluation","Develop appropriate legal strategy","Execute required legal procedures","Follow up the case until reaching desired result"],"services.government.title":"Government Services","services.government.description":"Complete all official transactions in Turkey quickly and with high efficiency","services.government.fullDescription":"We are your experts in completing all government transactions in Turkey. From extracting official documents to renewing residence permits and completing citizenship transactions, we save you time and effort and guarantee the completion of your transactions in the shortest possible time with the highest level of accuracy and professionalism.","services.government.features":["Extract all official documents","Renew residence permits and authorizations","Turkish citizenship transactions","Company and trademark registration","Tax and insurance transactions","Driver's license extraction","Real estate and title deed transactions","Municipality and governorate services"],"services.government.benefits":["Time and effort savings","Avoid errors and delays","Experience in Turkish system","Continuous follow-up"],"services.government.process":["Determine required transaction type and documents","Collect and prepare all required documents","Submit applications to relevant authorities","Follow up transaction progress with government agencies","Receive documents and deliver to client"],"services.healthInsurance.title":"Health Insurance for Foreigners","services.healthInsurance.description":"Comprehensive health insurance for foreigners in Turkey with the best prices and coverage","services.healthInsurance.fullDescription":"We provide comprehensive health insurance services for foreigners in Turkey. We collaborate with the best Turkish insurance companies to offer the best prices and comprehensive coverage. Our insurance covers all medical and treatment services with a wide network of hospitals and clinics throughout Turkey.","services.healthInsurance.features":["Comprehensive health insurance for individuals and families","Competitive prices based on age groups","Comprehensive coverage for all medical services","Wide network of hospitals and clinics","24/7 customer service","Fast and simple procedures","Insurance for 1 or 2 years","Free consultation to choose the best plan"],"services.healthInsurance.benefits":["Comprehensive financial protection for the family","Peace of mind and reassurance","Savings on medical costs","High-quality medical service"],"services.healthInsurance.process":["Determine age group and insurance duration","Choose the appropriate insurance company","Calculate final price","Submit request and obtain insurance","Receive insurance documents"],"services.insurance.title":"Health Insurance and Vehicle Insurance Services","services.insurance.description":"Assistance in obtaining health insurance and vehicle insurance at the best prices","services.insurance.fullDescription":"Protect yourself, your family, and your vehicle with our specialized insurance services. We help you choose the best health insurance and vehicle insurance policies that suit your needs and budget. Our partnerships with the best insurance companies in Turkey guarantee you the best prices and comprehensive coverage.","services.insurance.features":["Comprehensive health insurance for individuals and families","Vehicle insurance against all risks","Best prices in the market","Comprehensive and flexible coverage","Fast claims service","Wide network of hospitals","Travel and accident insurance","Free consultation to choose suitable insurance"],"services.insurance.benefits":["Comprehensive financial protection","Peace of mind and security","Excellent medical services","Cost savings"],"services.insurance.process":["Assess your personal insurance needs","Compare offers from best insurance companies","Choose the most suitable policy for you","Complete insurance procedures and payment","Continuous follow-up and after-sales service"],"howWeWork.title":"How Do We Work?","howWeWork.step1":"Assess your personal security needs","howWeWork.step2":"Compare offers from the best insurance companies","howWeWork.step3":"Choose the most suitable policy for you","howWeWork.step4":"Complete insurance procedures and payment","howWeWork.step5":"Continuous follow-up and after-sales service","stats.clients":"Satisfied Clients","stats.services":"Completed Services","stats.experience":"Years Experience","stats.satisfaction":"Satisfaction Rate","contact.title":"Contact Us","contact.subtitle":"We are here to help you with all your needs","contact.form.name":"Full Name","contact.form.email":"Email","contact.form.phone":"Phone Number","contact.form.message":"Your Message","contact.form.submit":"Send Message","contact.form.sending":"Sending...","contact.info.phone":"Phone","contact.info.email":"Email","contact.info.address":"Address","contact.info.hours":"Working Hours","auth.login":"Login","auth.signup":"Sign Up","auth.welcome":"Welcome Back","auth.joinUs":"Join Tevasul Group","common.loading":"Loading...","common.error":"An error occurred","common.success":"Success","common.cancel":"Cancel","common.save":"Save","common.edit":"Edit","common.delete":"Delete","common.close":"Close","nav.home":"Home","nav.services":"Our Services","nav.about":"About Us","nav.contact":"Contact Us","hero.mainTitle":"Complete All Your Services in Turkey","hero.withUs":"With Tevasul Group","hero.description":"We are your trusted partner in Turkey to complete all your government, commercial and personal services with the highest level of professionalism and efficiency","hero.discoverServices":"Discover Our Services","hero.contactNow":"Contact Us Now","hero.stats.clients":"Satisfied Clients","hero.stats.service":"24/7 Service","hero.stats.experience":"Years Experience","hero.trust.licensed":"Officially Licensed","hero.trust.fast":"Fast Service","hero.trust.excellent":"Excellent Rating","hero.available":"Available Now","hero.discoverServicesShort":"Discover Our Services","services.discoverMore":"Discover More","services.quickRequest":"Quick Request","services.loginToRequest":"Login to Request Service","about.title":"Complete With Us","about.description1":"Tevasul Group is your trusted partner in Turkey to complete all your services with high efficiency and professionalism. We understand the challenges faced by residents and visitors in Turkey and provide appropriate solutions.","about.description2":"Thanks to our extensive experience and strong network of relationships, we guarantee you the completion of your transactions in the shortest possible time and with the highest level of quality and accuracy.","about.stats.clients":"5000+ Satisfied Clients","about.stats.experience":"10+ Years Experience","about.features.team":"Expert Team","about.features.speed":"Fast Completion","about.features.security":"Security & Privacy","about.features.care":"Comprehensive Care","about.vision.title":"Our Vision","about.vision.description":"To be the first and most trusted partner for Arabs in Turkey, and provide excellent services that facilitate their lives and achieve their goals with ease.","contact.info.title":"Contact Information","contact.form.title":"Send Us a Message","contact.form.serviceType":"Service Type","contact.form.selectService":"Select Service Type","contact.form.translation":"Certified Translation Services","contact.form.travel":"Travel and Tourism Services","contact.form.legal":"Legal Consultancy","contact.form.government":"Government Services","contact.form.insurance":"Health Insurance and Vehicle Insurance Services","footer.description":"Your trusted partner to complete all your services in Turkey","footer.copyright":"© 2024 Tevasul Group. All rights reserved. Made with ❤️ in Turkey","user.profile":"Edit Profile","user.transactions":"My Transactions","user.notifications":"Notification Settings","user.help":"Help and Support","user.logout":"Logout","user.welcome":"Hello,","language.change":"Change Language","language.arabic":"العربية","language.turkish":"Türkçe","language.english":"English","admin.dashboard":"Admin Dashboard","brand.name":"Complete","servicePage.whyChooseUs":"Why Choose Tevasul Group?","servicePage.extensiveExperience":"Extensive Experience","servicePage.extensiveExperienceDesc":"More than 5 years serving Arab clients in Turkey","servicePage.fastCompletion":"Fast Completion","servicePage.fastCompletionDesc":"We guarantee the completion of your services in the shortest time possible","servicePage.serviceFeatures":"Service Features","servicePage.howWeWork":"How Do We Work?","servicePage.getFreeConsultation":"Get Free Consultation","servicePage.consultationDesc":"Contact us now for a free consultation about our services","servicePage.contactNow":"Contact Us Now","servicePage.requestServiceNow":"Request Service Now","servicePage.loginToRequest":"Login to Request Service","servicePage.readyToStart":"Ready to Start Your Journey With Us?","servicePage.joinThousands":"Join thousands of satisfied clients who trusted our services","servicePage.bookFreeConsultation":"Book Free Consultation","servicePage.talkToExpert":"Talk to Expert","services.cards.healthInsurance.title":"Health Insurance for Foreigners","services.cards.healthInsurance.description":"Comprehensive health insurance for foreigners in Turkey with the best prices and coverage","services.cards.translation.title":"Certified Translation Services","services.cards.translation.description":"Certified translation for all official and legal documents","services.cards.travel.title":"Travel and Tourism Services","services.cards.travel.description":"Tour organization, hotel booking, and transportation services","services.cards.legal.title":"Legal Consultancy","services.cards.legal.description":"Specialized legal consultancy in Turkish law and judicial procedures","services.cards.government.title":"Government Services","services.cards.government.description":"Complete all official transactions in Turkey quickly and with high efficiency","services.cards.insurance.title":"Health Insurance and Vehicle Insurance Services","services.cards.insurance.description":"Assistance in obtaining health insurance and vehicle insurance at the best prices"}},Uu=()=>{const[s,e]=k.useState("ar");k.useEffect(()=>{const n=localStorage.getItem("language");n&&["ar","tr","en"].includes(n)&&(e(n),r(n))},[]);const t=n=>{e(n),localStorage.setItem("language",n),r(n)},r=n=>{document.documentElement.lang=n,document.documentElement.dir=n==="ar"?"rtl":"ltr"};return{language:s,setLanguage:t,t:n=>Wu[s][n]||n}},Br=({isOpen:s,onClose:e,serviceType:t,serviceTitle:r,isDarkMode:i})=>{const{user:n,profile:o}=Le(),[l,c]=k.useState(!1),[d,u]=k.useState(!1),[h,m]=k.useState(null),[f,b]=k.useState(!1),[x,g]=k.useState({title:"",description:"",file:null,fileUrl:"",fileName:""}),p=async y=>{if(!y)return null;if(!n)return console.error("المستخدم غير مسجل الدخول"),m("يجب تسجيل الدخول أولاً"),null;b(!0),m(null);try{return console.log("بدء رفع الملف:",{originalName:y.name,fileSize:y.size,fileType:y.type,userId:n.id}),new Promise(S=>{const _=new FileReader;_.onload=async()=>{try{const T=_.result.split(",")[1];if(console.log("تم تحويل الملف إلى Base64، الحجم:",T.length),T.length>1024*1024){console.error("حجم الملف كبير جداً بعد التحويل إلى Base64"),m("حجم الملف كبير جداً. يرجى اختيار ملف أصغر"),S(null);return}try{console.log("محاولة حفظ الملف في file_attachments للمستخدم:",n.id);const{data:I,error:F}=await H.from("file_attachments").insert({user_id:n.id,file_name:y.name,file_type:y.type,file_size:y.size,file_data:T,created_at:new Date().toISOString()}).select().single();if(F){if(console.error("خطأ في حفظ الملف في file_attachments:",F),console.log("تفاصيل الخطأ:",{code:F.code,message:F.message,details:F.details,hint:F.hint}),F.code==="42501"||F.message.includes("permission")||F.message.includes("row-level security")){console.log("خطأ في الصلاحيات، محاولة حفظ في service_requests..."),S({url:`base64://service_requests/${y.name}`,name:y.name,path:`base64/service_requests/${y.name}`,isBase64:!0,base64Data:T});return}console.log("خطأ آخر، محاولة حفظ في service_requests..."),S({url:`base64://service_requests/${y.name}`,name:y.name,path:`base64/service_requests/${y.name}`,isBase64:!0,base64Data:T});return}else console.log("تم حفظ الملف في file_attachments بنجاح:",I.id),S({url:`base64://${I.id}`,name:y.name,path:`base64/${I.id}`,isBase64:!0})}catch(I){console.log("فشل في حفظ الملف في file_attachments، محاولة حفظ في service_requests..."),console.error("تفاصيل الخطأ:",I),S({url:`base64://service_requests/${y.name}`,name:y.name,path:`base64/service_requests/${y.name}`,isBase64:!0,base64Data:T})}}catch(C){console.error("خطأ في معالجة الملف:",C),m("فشل في معالجة الملف. يرجى المحاولة مرة أخرى."),S(null)}},_.onerror=()=>{console.error("خطأ في قراءة الملف"),m("فشل في قراءة الملف. يرجى المحاولة مرة أخرى."),S(null)},_.readAsDataURL(y)})}catch(S){return console.error("خطأ غير متوقع في رفع الملف:",S),m("حدث خطأ غير متوقع في رفع الملف. يرجى المحاولة مرة أخرى."),null}finally{b(!1)}},j=async y=>{const S=y.target.files?.[0];if(!S)return;if(m(null),!["image/jpeg","image/jpg","image/png","image/gif","application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(S.type)){m("نوع الملف غير مدعوم. يرجى اختيار صورة (JPG, PNG, GIF) أو ملف PDF أو Word");return}if(S.size>2*1024*1024){m("حجم الملف كبير جداً. الحد الأقصى 2 ميجابايت");return}console.log("تم اختيار الملف:",{name:S.name,size:S.size,type:S.type}),g({...x,file:S})},v=async y=>{if(y.preventDefault(),!n){m("يجب تسجيل الدخول أولاً");return}if(!o){console.log("User profile not found, attempting to create one...");try{const{data:T,error:I}=await H.from("user_profiles").upsert({id:n.id,email:n.email,full_name:n.user_metadata?.full_name||n.email?.split("@")[0]||"مستخدم جديد",phone:n.user_metadata?.phone||null,country_code:n.user_metadata?.country_code||"+90",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(I){console.error("Error creating user profile:",I),m("مشكلة في إنشاء الملف الشخصي. يرجى المحاولة مرة أخرى.");return}console.log("User profile created successfully:",T)}catch(T){console.error("Error in profile creation:",T),m("مشكلة في إنشاء الملف الشخصي. يرجى المحاولة مرة أخرى.");return}}if(!x.title.trim()){m("يرجى إدخال عنوان الطلب");return}c(!0),m(null);let S="",_="",C=null;if(x.file){console.log("بدء رفع الملف...");const T=await p(x.file);if(T)S=T.url||"",_=T.name||"",C=T.base64Data||null,console.log("تم رفع الملف بنجاح:",{url:S,name:_,hasBase64Data:!!C}),T.base64Data&&console.log("الملف سيتم حفظه في جدول service_requests");else{console.error("فشل في رفع الملف"),m("فشل في رفع الملف. يرجى المحاولة مرة أخرى."),c(!1);return}}try{console.log("محاولة إرسال الطلب للمستخدم:",n.id),console.log("بيانات الطلب:",{service_type:t,title:x.title.trim(),hasFile:!!C,fileUrl:S});const{error:T}=await H.from("service_requests").insert({user_id:n.id,service_type:t,title:x.title.trim(),description:x.description.trim()||null,priority:"medium",status:"pending",file_url:S||null,file_name:_||null,file_data:C});if(T){console.error("خطأ في إرسال الطلب:",T),T.code==="42501"||T.message.includes("permission")?(console.log("خطأ في الصلاحيات، محاولة إصلاح..."),m("مشكلة في الصلاحيات. يرجى المحاولة مرة أخرى أو التواصل مع الدعم.")):T.code==="23503"||T.message.includes("foreign key")?(console.log("خطأ في العلاقة الخارجية، محاولة إصلاح..."),m("مشكلة في البيانات. يرجى المحاولة مرة أخرى.")):m("حدث خطأ في إرسال الطلب. يرجى المحاولة مرة أخرى.");return}u(!0),g({title:"",description:"",file:null,fileUrl:"",fileName:""}),setTimeout(()=>{u(!1),e()},2e3)}catch(T){console.error("خطأ غير متوقع:",T),m("حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.")}finally{c(!1)}},N=t==="translation"||t==="insurance";return s?d?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ne,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"تم إرسال الطلب بنجاح!"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-4",children:"سيتم التواصل معك قريباً لمتابعة طلبك"}),a.jsx("div",{className:"w-full bg-green-200 dark:bg-green-900/30 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})]}):a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600 max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200 transition-colors duration-300",children:a.jsx(_e,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-caribbean-100 dark:bg-caribbean-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ne,{className:"w-6 h-6 text-caribbean-600 dark:text-caribbean-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"طلب خدمة جديد"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:r})]}),h&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center",children:[a.jsx(Ae,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:h})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"عنوان الطلب *"}),a.jsx("input",{type:"text",value:x.title,onChange:y=>g({...x,title:y.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"مثال: ترجمة شهادة الميلاد",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"وصف الطلب"}),a.jsx("textarea",{value:x.description,onChange:y=>g({...x,description:y.target.value}),rows:4,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب تفاصيل إضافية عن طلبك..."})]}),N&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:t==="translation"?"صورة الوثيقة المطلوب ترجمتها":"صورة جواز السفر أو الإقامة"}),a.jsxs("div",{className:"relative border-2 border-dashed border-platinum-300 dark:border-jet-600 rounded-lg p-6 text-center hover:border-caribbean-500 dark:hover:border-caribbean-400 transition-colors duration-300",children:[x.file?a.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse",children:[a.jsx(cc,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:x.file.name}),a.jsx("button",{type:"button",onClick:()=>g({...x,file:null}),className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:a.jsx(_e,{className:"w-4 h-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(dc,{className:"w-12 h-12 text-jet-400 dark:text-platinum-500 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-2",children:"اضغط لاختيار ملف أو اسحبه هنا"}),a.jsx("p",{className:"text-xs text-jet-500 dark:text-platinum-500",children:"JPG, PNG, GIF, PDF (حتى 5 ميجابايت)"})]}),a.jsx("input",{type:"file",onChange:j,accept:"image/*,.pdf",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:f})]}),a.jsx("p",{className:"text-xs text-jet-500 dark:text-platinum-500 mt-1",children:t==="translation"?"رفع صورة الوثيقة يساعدنا في تقديم عرض سعر دقيق":"رفع صورة الوثائق يسرع من عملية معالجة طلبك"})]}),a.jsxs("div",{className:"bg-platinum-50 dark:bg-jet-700 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-jet-800 dark:text-white mb-2",children:"معلومات التواصل"}),a.jsxs("div",{className:"text-sm text-jet-600 dark:text-platinum-400 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"الاسم:"})," ",o?.full_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"البريد الإلكتروني:"})," ",o?.email]}),o?.phone&&a.jsxs("p",{children:[a.jsx("strong",{children:"الهاتف:"})," ",o.country_code," ",o.phone]})]})]}),a.jsx("button",{type:"submit",disabled:l||f,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:l||f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),f?"جاري رفع الملف...":"جاري الإرسال..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"w-5 h-5 ml-2"}),"إرسال الطلب"]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-jet-500 dark:text-platinum-500",children:"سيتم التواصل معك خلال 24 ساعة لمتابعة طلبك"})})]})]}):null},Hu=({service:s,onBack:e,isDarkMode:t,onNavigateToContact:r,onOpenProfile:i,onOpenAccount:n,onOpenHelp:o,onToggleDarkMode:l,onNavigateToMainHome:c})=>{const{user:d}=Le(),{t:u,language:h}=$e(),m=h==="ar",[f,b]=lt.useState(!1),x=(C,T)=>T?a.jsx("span",{className:"phone-number",style:{direction:"ltr",textAlign:"left",unicodeBidi:"bidi-override"},children:C}):C,[g,p]=lt.useState({x:0,y:0}),[j,v]=lt.useState(!1),[N,y]=lt.useState(!1),[S,_]=lt.useState(!1);return lt.useEffect(()=>{const C=F=>{p({x:F.clientX,y:F.clientY}),y(!0);const M=F.target,R=M.tagName==="BUTTON"||M.tagName==="A"||M.closest("button")!==null||M.closest("a")!==null;v(R)},T=()=>{y(!1)},I="ontouchstart"in window||navigator.maxTouchPoints>0;return I||(window.addEventListener("mousemove",C),window.addEventListener("mouseleave",T)),()=>{I||(window.removeEventListener("mousemove",C),window.removeEventListener("mouseleave",T))}},[]),lt.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]),lt.useEffect(()=>{const C=()=>{const T=document.querySelector(".consultation-card");if(T){const I=T.getBoundingClientRect(),F=I.top<window.innerHeight&&I.bottom>0;_(!F)}};return window.addEventListener("scroll",C),C(),()=>{window.removeEventListener("scroll",C)}},[]),a.jsxs("div",{className:"min-h-screen bg-white dark:bg-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria",children:[a.jsx(Pe,{isDarkMode:t}),a.jsx("nav",{className:"fixed top-0 w-full z-40 bg-white/95 dark:bg-jet-800/95 backdrop-blur-md shadow-xl border-b border-platinum-300 dark:border-jet-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-3 md:py-4",children:[a.jsx("div",{className:"flex items-center space-x-4 space-x-reverse",children:a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 space-x-reverse bg-caribbean-600 text-white px-4 py-2 rounded-lg hover:bg-caribbean-700 transition-all duration-300",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"font-medium text-sm md:text-base",children:"العودة للرئيسية"})]})}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse",children:[a.jsxs("button",{onClick:()=>c(),className:"relative transition-colors duration-300 group font-medium text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400",children:[u("nav.home"),a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full bg-gradient-to-r from-caribbean-600 to-indigo-600"})]}),a.jsxs("button",{onClick:()=>{c(),setTimeout(()=>{const C=document.getElementById("services");C&&C.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"relative transition-colors duration-300 group font-medium text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400",children:[u("nav.services"),a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full bg-gradient-to-r from-caribbean-600 to-indigo-600"})]}),a.jsxs("button",{onClick:()=>{c(),setTimeout(()=>{const C=document.getElementById("about");C&&C.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"relative transition-colors duration-300 group font-medium text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400",children:[u("nav.about"),a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full bg-gradient-to-r from-caribbean-600 to-indigo-600"})]}),a.jsxs("button",{onClick:()=>{c(),setTimeout(()=>{const C=document.getElementById("contact");C&&C.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"relative transition-colors duration-300 group font-medium text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400",children:[u("nav.contact"),a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full bg-gradient-to-r from-caribbean-600 to-indigo-600"})]})]}),a.jsx("div",{className:"md:hidden",children:a.jsx("button",{onClick:()=>c(),className:"bg-caribbean-600 text-white px-4 py-2 rounded-lg hover:bg-caribbean-700 transition-all duration-300",children:"الرئيسية"})})]})})}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
          /* Custom cursor styles - commented out to restore default cursor */
          /* html, body, * {
            cursor: none !important;
          }
          
          button, a, input, select, textarea, [role="button"], [onclick], [tabindex] {
            cursor: none !important;
          }
          
          .dropdown, .modal, .popup, [data-dropdown], [role="menu"], [role="listbox"], 
          [class*="dropdown"], [class*="modal"], [class*="popup"] {
            cursor: none !important;
          }
          
          * * {
            cursor: none !important;
          }
          
          * {
            cursor: none !important;
          } */

                      /* Exception for logo button to allow clicks */
            .logo-button {
              cursor: pointer !important;
            }

            /* Phone number formatting for Arabic */
            .phone-number {
              direction: ltr !important;
              text-align: left !important;
              unicode-bidi: bidi-override !important;
              font-family: monospace !important;
            }

          /* Show default cursor on touch devices */
          @media (hover: none) and (pointer: coarse) {
            html, body, * {
              cursor: auto !important;
            }
            
            button, a, input, select, textarea, [role="button"], [onclick], [tabindex] {
              cursor: pointer !important;
            }
            
            .dropdown, .modal, .popup, [data-dropdown], [role="menu"], [role="listbox"], 
            [class*="dropdown"], [class*="modal"], [class*="popup"] {
              cursor: auto !important;
            }
            
            * * {
              cursor: auto !important;
            }
            
            * {
              cursor: auto !important;
            }
          }

          /* Flag Gloss Effect */
          .flag-gloss {
            position: relative;
            overflow: hidden;
          }
          
          .flag-gloss::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
              45deg,
              transparent 30%,
              rgba(255, 255, 255, 0.1) 40%,
              rgba(255, 255, 255, 0.2) 50%,
              rgba(255, 255, 255, 0.1) 60%,
              transparent 70%
            );
            transform: rotate(45deg);
            transition: all 0.3s ease;
            opacity: 0;
          }
          
          .flag-gloss:hover::before {
            opacity: 1;
            animation: gloss-shine 1.5s ease-in-out;
          }
          
          @keyframes gloss-shine {
            0% {
              transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }
            50% {
              transform: translateX(0%) translateY(0%) rotate(45deg);
            }
            100% {
              transform: translateX(100%) translateY(100%) rotate(45deg);
            }
          }

          /* Flag Shadow Effect */
          .flag-shadow {
            box-shadow: 
              0 2px 4px rgba(0, 0, 0, 0.1),
              0 4px 8px rgba(0, 0, 0, 0.1),
              inset 0 1px 0 rgba(255, 255, 255, 0.2);
          }

          /* Ensure cursor is always on top */
          .cursor-element {
            z-index: 9999 !important;
            position: fixed !important;
          }

          /* Hide custom cursor on touch devices */
          @media (hover: none) and (pointer: coarse) {
            .cursor-element {
              display: none !important;
            }
          }
        `}}),N&&a.jsx(a.Fragment,{children:j?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed w-8 h-8 border-2 border-caribbean-400 rounded-full pointer-events-none z-[9999] transition-transform duration-75 ease-out shadow-xl cursor-element hidden md:block",style:{left:`${g.x}px`,top:`${g.y}px`,transform:"translate(-50%, -50%)"}}),a.jsx("div",{className:"fixed w-3 h-3 bg-caribbean-400 rounded-full pointer-events-none z-[9999] transition-transform duration-75 ease-out cursor-element hidden md:block",style:{left:`${g.x}px`,top:`${g.y}px`,transform:"translate(-50%, -50%)"}})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed w-6 h-6 border-2 border-white rounded-full pointer-events-none z-[9999] transition-transform duration-75 ease-out shadow-lg cursor-element hidden md:block",style:{left:`${g.x}px`,top:`${g.y}px`,transform:"translate(-50%, -50%)"}}),a.jsx("div",{className:"fixed w-2 h-2 bg-white rounded-full pointer-events-none z-[9999] transition-transform duration-75 ease-out cursor-element hidden md:block",style:{left:`${g.x}px`,top:`${g.y}px`,transform:"translate(-50%, -50%)"}})]})}),a.jsx("div",{className:"bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-16 mt-0 pt-24 md:pt-20",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center mb-6",children:[a.jsx("div",{className:"p-4 bg-white/20 rounded-2xl mb-4 md:mb-0 md:ml-6",children:s.icon}),a.jsxs("div",{className:"text-center md:text-right",children:[a.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4",children:u(s.titleKey)}),a.jsx("p",{className:"text-lg md:text-xl text-white/90 max-w-3xl",children:u(s.descriptionKey)})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-caribbean-200/20 dark:bg-caribbean-800/20 rounded-full animate-float-slow"}),a.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-indigo-200/20 dark:bg-indigo-800/20 rounded-full animate-bounce-slow"}),a.jsx("div",{className:"absolute bottom-32 left-1/4 w-20 h-20 bg-platinum-300/30 dark:bg-jet-600/30 rounded-full animate-pulse-slow"}),a.jsx("div",{className:"absolute top-1/3 right-1/3 w-16 h-16 bg-caribbean-300/25 dark:bg-caribbean-700/25 rounded-full animate-float-reverse"})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[a.jsxs("div",{className:"lg:col-span-2 relative z-10",children:[a.jsxs("section",{className:"mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6 text-caribbean-700 dark:text-caribbean-400",children:u("servicePage.whyChooseUs")}),a.jsx("p",{className:"text-lg text-jet-600 dark:text-platinum-400 leading-relaxed mb-8 animate-fade-in-delay-1",children:u(s.fullDescriptionKey)}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 animate-fade-in-delay-2",children:[a.jsxs("div",{className:"bg-gradient-to-r from-caribbean-50 to-indigo-50 dark:from-caribbean-900/20 dark:to-indigo-900/20 p-6 rounded-xl transform hover:scale-105 transition-all duration-300 hover:shadow-lg",children:[a.jsx(rt,{className:"w-8 h-8 text-caribbean-600 dark:text-caribbean-400 mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:u("servicePage.extensiveExperience")}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:u("servicePage.extensiveExperienceDesc")})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-caribbean-50 dark:from-indigo-900/20 dark:to-caribbean-900/20 p-6 rounded-xl transform hover:scale-105 transition-all duration-300 hover:shadow-lg",children:[a.jsx(at,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400 mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:u("servicePage.fastCompletion")}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:u("servicePage.fastCompletionDesc")})]})]})]}),a.jsxs("section",{className:"mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6 text-caribbean-700 dark:text-caribbean-400 animate-fade-in-delay-1",children:u("servicePage.serviceFeatures")}),a.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:u(s.featuresKey).map((C,T)=>a.jsxs("div",{className:"flex items-center p-4 bg-white dark:bg-jet-700 rounded-lg shadow-md",children:[a.jsx(fe,{className:"w-6 h-6 text-green-500 ml-3 flex-shrink-0"}),a.jsx("span",{className:"text-jet-700 dark:text-platinum-300",children:C})]},T))})]}),a.jsxs("section",{className:"mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6 text-caribbean-700 dark:text-caribbean-400 animate-fade-in-delay-2",children:u("servicePage.howWeWork")}),a.jsx("div",{className:"space-y-4",children:u(s.processKey).map((C,T)=>a.jsxs("div",{className:"flex items-start p-4 bg-gradient-to-r from-platinum-50 to-caribbean-50 dark:from-jet-700 dark:to-caribbean-900/20 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-caribbean-600 text-white rounded-full flex items-center justify-center font-bold ml-4",children:T+1}),a.jsx("p",{className:"text-jet-700 dark:text-platinum-300 pt-1",children:C})]},T))})]})]}),a.jsx("div",{className:"lg:col-span-1 relative z-10",children:a.jsxs("div",{className:"consultation-card bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white p-8 rounded-2xl shadow-xl mb-8 sticky top-8 transform hover:scale-105 transition-all duration-300 animate-fade-in-delay-3",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6",children:u("servicePage.getFreeConsultation")}),a.jsx("p",{className:"mb-6 text-white/90",children:u("servicePage.consultationDesc")}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"w-5 h-5 ml-3"}),a.jsx("span",{children:x("+90 534 962 72 41",m)})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"w-5 h-5 ml-3"}),a.jsx("span",{children:"info@tevasul.group"})]})]}),a.jsx("button",{onClick:r,className:"w-full bg-white text-caribbean-700 py-3 px-6 rounded-lg font-semibold hover:bg-platinum-100 transition-colors duration-300",children:u("servicePage.contactNow")}),d&&a.jsx("button",{onClick:()=>b(!0),className:"w-full mt-3 bg-white/20 backdrop-blur-sm text-white py-3 px-6 rounded-lg font-semibold hover:bg-white/30 transition-all duration-300 border border-white/30",children:u("servicePage.requestServiceNow")}),!d&&a.jsx("button",{onClick:()=>{localStorage.setItem("pendingServiceRequest",JSON.stringify({serviceType:s.id,serviceTitle:u(s.titleKey)})),e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openLogin"))},100)},className:"w-full mt-3 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:u("servicePage.loginToRequest")})]})})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-16 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-20 w-40 h-40 bg-white/10 rounded-full animate-pulse-slow"}),a.jsx("div",{className:"absolute bottom-20 right-10 w-32 h-32 bg-white/5 rounded-full animate-float-slow"}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white/8 rounded-full animate-bounce-slow"})]}),a.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 animate-fade-in",children:u("servicePage.readyToStart")}),a.jsx("p",{className:"text-xl text-white/90 mb-8 animate-fade-in-delay-1",children:u("servicePage.joinThousands")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-fade-in-delay-2",children:[d?a.jsx("button",{onClick:()=>b(!0),className:"bg-white text-caribbean-700 px-8 py-4 rounded-full font-semibold hover:bg-platinum-100 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:u("servicePage.requestServiceNow")}):a.jsx("button",{onClick:r,className:"bg-white text-caribbean-700 px-8 py-4 rounded-full font-semibold hover:bg-platinum-100 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:u("servicePage.bookFreeConsultation")}),a.jsx("button",{onClick:r,className:"border-2 border-white text-white px-8 py-4 rounded-full font-semibold hover:bg-white/10 transition-all duration-300 transform hover:scale-105",children:u("servicePage.talkToExpert")})]})]})]}),S&&a.jsx("div",{className:"lg:hidden fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:a.jsxs("button",{onClick:()=>{const C=document.querySelector(".consultation-card");C&&C.scrollIntoView({behavior:"smooth",block:"center"})},className:"bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white px-6 py-3 rounded-full font-semibold shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-105 flex items-center space-x-2 space-x-reverse animate-pulse",children:[a.jsx("span",{className:"text-sm",children:u("servicePage.getFreeConsultation")}),a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),a.jsx(Br,{isOpen:f,onClose:()=>b(!1),serviceType:s.id,serviceTitle:u(s.titleKey),isDarkMode:t})]})},qu=({value:s,onChange:e,maxDate:t=new Date().toISOString().split("T")[0],placeholder:r="Select date",isArabic:i=!1,isDarkMode:n=!1})=>{const[o,l]=k.useState(!1),[c,d]=k.useState(new Date),[u,h]=k.useState(s?new Date(s):null),[m,f]=k.useState(!1),[b,x]=k.useState(!1),[g,p]=k.useState(!1),[j,v]=k.useState(""),N=k.useRef(null);k.useEffect(()=>{const z=K=>{N.current&&!N.current.contains(K.target)&&(l(!1),f(!1),x(!1))};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const y=z=>new Date(z.getFullYear(),z.getMonth()+1,0).getDate(),S=z=>new Date(z.getFullYear(),z.getMonth(),1).getDay(),_=z=>z.toISOString().split("T")[0],C=z=>{const K=new Date(c.getFullYear(),c.getMonth(),z);h(K),e(_(K)),l(!1)},T=()=>{d(new Date(c.getFullYear(),c.getMonth()-1,1))},I=()=>{d(new Date(c.getFullYear(),c.getMonth()+1,1))},F=z=>{const K=new Date;return z===K.getDate()&&c.getMonth()===K.getMonth()&&c.getFullYear()===K.getFullYear()},M=z=>u?z===u.getDate()&&c.getMonth()===u.getMonth()&&c.getFullYear()===u.getFullYear():!1,R=z=>new Date(c.getFullYear(),c.getMonth(),z)>new Date(t),L=z=>{v(z);const K=z.replace(/\D/g,"");let B=null;if(K.length===8){const W=parseInt(K.substring(0,2)),X=parseInt(K.substring(2,4)),V=parseInt(K.substring(4,8));B=new Date(V,X-1,W)}else if(K.length===6){const W=parseInt(K.substring(0,2)),X=parseInt(K.substring(2,4)),V=parseInt(K.substring(4,6)),Y=V<30?2e3+V:1900+V;B=new Date(Y,X-1,W)}else if(K.length===4){const W=parseInt(K.substring(0,2)),X=parseInt(K.substring(2,4)),V=new Date().getFullYear();B=new Date(V,X-1,W)}else{const W=[/^(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{4})$/,/^(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{2})$/,/^(\d{4})[\/\-\.](\d{1,2})[\/\-\.](\d{1,2})$/,/^(\d{1,2})[\/\-\.](\d{1,2})[\/\-\.](\d{1,2})$/];for(const X of W){const V=z.match(X);if(V){let Y,ee,se;X.source.includes("(\\d{4})")?(se=parseInt(V[1]),ee=parseInt(V[2]),Y=parseInt(V[3])):(Y=parseInt(V[1]),ee=parseInt(V[2]),se=parseInt(V[3]),se<100&&(se=se<30?2e3+se:1900+se)),B=new Date(se,ee-1,Y);break}}}if(B&&!isNaN(B.getTime())){const W=B.getDate(),X=B.getMonth(),V=B.getFullYear();B.getDate()===W&&B.getMonth()===X&&B.getFullYear()===V&&B<=new Date(t)&&(h(B),e(_(B)),p(!1))}},D=z=>{d(new Date(z,c.getMonth(),1)),f(!1)},A=z=>{d(new Date(c.getFullYear(),z,1)),x(!1)},O=()=>{const z=new Date().getFullYear(),K=[];for(let B=z;B>=z-100;B--)K.push(B);return K},$=i?["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]:["January","February","March","April","May","June","July","August","September","October","November","December"],E=i?["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],G=()=>{const z=y(c),K=S(c),B=[];for(let W=0;W<K;W++)B.push(a.jsx("div",{className:"h-10"},`empty-${W}`));for(let W=1;W<=z;W++){const X=F(W),V=M(W),Y=R(W);B.push(a.jsx("button",{onClick:()=>!Y&&C(W),disabled:Y,className:`
            h-10 w-10 rounded-lg text-sm font-medium transition-all duration-200
            ${V?"bg-gradient-to-r from-caribbean-500 to-indigo-600 text-white shadow-lg transform scale-105":X?"border-2 border-caribbean-500 text-caribbean-700 dark:text-caribbean-300 font-bold":"text-jet-700 dark:text-jet-300 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20"}
            ${Y?"opacity-30 cursor-not-allowed":"cursor-pointer hover:shadow-md"}
          `,children:W},W))}return B};return a.jsxs("div",{className:"relative",ref:N,children:[a.jsxs("div",{className:"relative group",children:[g?a.jsx("input",{type:"text",value:j,onChange:z=>L(z.target.value),onBlur:()=>p(!1),onKeyDown:z=>{z.key==="Escape"&&(p(!1),v(""))},placeholder:i?"يوم/شهر/سنة":"DD/MM/YYYY",className:"w-full px-4 py-3 pr-12 border border-caribbean-500 dark:border-caribbean-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white text-right font-medium shadow-sm",autoFocus:!0}):a.jsx("input",{type:"text",value:u?u.toLocaleDateString("en-GB"):"",onClick:()=>{p(!0),v(u?u.toLocaleDateString("en-GB"):"")},readOnly:!0,placeholder:r,className:"w-full px-4 py-3 pr-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white text-right font-medium shadow-sm group-hover:shadow-md group-hover:border-caribbean-300 dark:group-hover:border-caribbean-500 focus:shadow-lg cursor-text"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:a.jsx("button",{onClick:z=>{z.stopPropagation(),l(!o)},className:"p-2 bg-gradient-to-r from-caribbean-500 to-indigo-600 rounded-lg hover:from-caribbean-600 hover:to-indigo-700 transition-all duration-300 shadow-sm hover:shadow-md",children:a.jsx(it,{className:"w-4 h-4 text-white"})})}),u&&!g&&a.jsx("button",{onClick:z=>{z.stopPropagation(),h(null),e("")},className:"absolute inset-y-0 right-0 pr-12 flex items-center text-jet-400 hover:text-jet-600 dark:text-jet-500 dark:hover:text-jet-300 transition-colors",children:a.jsx(_e,{className:"w-4 h-4"})})]}),o&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 bg-white dark:bg-jet-800 rounded-xl shadow-2xl border border-platinum-200 dark:border-jet-600 p-4 min-w-[320px]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("button",{onClick:T,className:"p-2 rounded-lg hover:bg-platinum-100 dark:hover:bg-jet-700 transition-colors",children:a.jsx(uc,{className:"w-5 h-5 text-jet-600 dark:text-jet-400"})}),a.jsx("div",{className:"text-center flex-1 mx-4",children:a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>x(!b),className:"text-lg font-bold text-jet-900 dark:text-white hover:text-caribbean-600 dark:hover:text-caribbean-400 transition-colors flex items-center",children:[$[c.getMonth()],b?a.jsx(Ua,{className:"w-4 h-4 ml-1"}):a.jsx(Dt,{className:"w-4 h-4 ml-1"})]}),b&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white dark:bg-jet-800 border border-platinum-200 dark:border-jet-600 rounded-lg shadow-lg p-2 max-h-48 overflow-y-auto z-10 min-w-[140px]",children:a.jsx("div",{className:"grid grid-cols-2 gap-1",children:$.map((z,K)=>a.jsx("button",{onClick:()=>A(K),className:`
                               px-3 py-2 text-sm rounded transition-colors text-left
                               ${c.getMonth()===K?"bg-caribbean-500 text-white":"hover:bg-platinum-100 dark:hover:bg-jet-700 text-jet-700 dark:text-jet-300"}
                             `,children:z},z))})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>f(!m),className:"text-sm text-jet-600 dark:text-jet-400 hover:text-caribbean-600 dark:hover:text-caribbean-400 transition-colors flex items-center justify-center mx-auto",children:[c.getFullYear(),m?a.jsx(Ua,{className:"w-3 h-3 ml-1"}):a.jsx(Dt,{className:"w-3 h-3 ml-1"})]}),m&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white dark:bg-jet-800 border border-platinum-200 dark:border-jet-600 rounded-lg shadow-lg p-2 max-h-48 overflow-y-auto z-10 min-w-[120px]",children:a.jsx("div",{className:"grid grid-cols-3 gap-1",children:O().map(z=>a.jsx("button",{onClick:()=>D(z),className:`
                               px-2 py-1 text-xs rounded transition-colors
                               ${c.getFullYear()===z?"bg-caribbean-500 text-white":"hover:bg-platinum-100 dark:hover:bg-jet-700 text-jet-700 dark:text-jet-300"}
                             `,children:z},z))})})]})]})}),a.jsx("button",{onClick:I,className:"p-2 rounded-lg hover:bg-platinum-100 dark:hover:bg-jet-700 transition-colors",children:a.jsx(hc,{className:"w-5 h-5 text-jet-600 dark:text-jet-400"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:E.map((z,K)=>a.jsx("div",{className:"h-8 flex items-center justify-center text-xs font-semibold text-caribbean-600 dark:text-caribbean-400",children:z},z))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:G()}),a.jsx("div",{className:"mt-4 pt-4 border-t border-platinum-200 dark:border-jet-600",children:a.jsxs("div",{className:"flex items-center justify-between text-xs text-jet-500 dark:text-jet-400",children:[a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("div",{className:"w-3 h-3 border-2 border-caribbean-500 rounded"}),a.jsx("span",{children:i?"اليوم الحالي":"Today"})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-caribbean-500 to-indigo-600 rounded"}),a.jsx("span",{children:i?"التاريخ المختار":"Selected"})]})]})})]})]})},Vu=({onBack:s,isDarkMode:e,onNavigateToContact:t,onOpenProfile:r,onOpenAccount:i,onOpenHelp:n,onToggleDarkMode:o,onNavigateToMainHome:l})=>{const{user:c}=Le(),{t:d,language:u}=$e(),h=u==="ar",[m,f]=k.useState([]),[b,x]=k.useState([]),[g,p]=k.useState([]),[j,v]=k.useState(!0),[N,y]=k.useState(""),[S,_]=k.useState(""),[C,T]=k.useState(null),[I,F]=k.useState(""),[M,R]=k.useState(12),[L,D]=k.useState(null),[A,O]=k.useState(!1),[$,E]=k.useState({contactName:"",contactEmail:"",contactPhone:"",additionalNotes:""}),[G,z]=k.useState(!1),[K,B]=k.useState(!1),[W,X]=k.useState(null);k.useEffect(()=>{V()},[]);const V=async()=>{try{v(!0),console.log("🔍 جلب بيانات التأمين الصحي...");const{data:q,error:oe}=await H.from("insurance_companies").select("*").eq("is_active",!0).order("name");if(oe)throw console.error("خطأ في جلب الشركات:",oe),oe;console.log("📋 الشركات المحملة:",q?.length||0),x(q||[]);const{data:Z,error:be}=await H.from("age_groups").select("*").eq("is_active",!0).order("min_age");if(be)throw console.error("خطأ في جلب الفئات العمرية:",be),be;console.log("📋 الفئات العمرية المحملة:",Z?.length||0),p(Z||[]);const{data:U,error:De}=await H.from("health_insurance_pricing").select(`
          *,
          insurance_companies(name, name_ar),
          age_groups(name, name_ar, min_age, max_age)
        `).eq("is_active",!0).order("company_id");if(De)throw console.error("خطأ في جلب بيانات الأسعار:",De),De;const Qe=U?.map(Se=>({company_id:Se.company_id,company_name:Se.insurance_companies?.name||"",company_name_ar:Se.insurance_companies?.name_ar||"",age_group_id:Se.age_group_id,age_group_name:Se.age_groups?.name||"",age_group_name_ar:Se.age_groups?.name_ar||"",min_age:Se.age_groups?.min_age||0,max_age:Se.age_groups?.max_age||0,duration_months:Se.duration_months,price_try:Se.price_try}))||[];console.log("📋 بيانات الأسعار المحملة:",Qe.length),f(Qe)}catch(q){console.error("خطأ في تحميل بيانات التأمين الصحي:",q),alert(h?"حدث خطأ في تحميل بيانات التأمين الصحي. يرجى المحاولة مرة أخرى.":"Error loading health insurance data. Please try again.")}finally{v(!1)}};k.useEffect(()=>{if(S){const q=new Date,oe=new Date(S),Z=q.getFullYear()-oe.getFullYear(),be=q.getMonth()-oe.getMonth(),U=be<0||be===0&&q.getDate()<oe.getDate()?Z-1:Z;T(U);const De=g.find(Qe=>U>=Qe.min_age&&U<=Qe.max_age);F(De?.id||"")}else T(null),F("")},[S,g]),k.useEffect(()=>{if(N&&I&&M){const q=m.find(oe=>oe.company_id===N&&oe.age_group_id===I&&oe.duration_months===M);D(q?.price_try||null)}else D(null)},[N,I,M,m]);const Y=async q=>{if(q.preventDefault(),!c){X(h?"يجب تسجيل الدخول لتقديم الطلب":"You must be logged in to submit a request");return}if(!N||!S||!C||!I||!L){X(h?"يرجى اختيار جميع الخيارات المطلوبة":"Please select all required options");return}try{z(!0),X(null);const{data:oe,error:Z}=await H.from("health_insurance_requests").insert({user_id:c.id,company_id:N,age_group_id:I,duration_months:M,calculated_price:L,contact_name:$.contactName,contact_email:$.contactEmail,contact_phone:$.contactPhone,additional_notes:$.additionalNotes});if(Z)throw Z;B(!0),E({contactName:"",contactEmail:"",contactPhone:"",additionalNotes:""}),O(!1),setTimeout(()=>{B(!1)},3e3)}catch(oe){console.error("Error submitting request:",oe),X(h?"حدث خطأ في إرسال الطلب. يرجى المحاولة مرة أخرى.":"An error occurred while submitting the request. Please try again.")}finally{z(!1)}},ee=q=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2}).format(q),se=q=>h?q===12?"سنة واحدة":"سنتان":q===12?"1 Year":"2 Years";return a.jsxs("div",{className:"min-h-screen bg-white dark:bg-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria",children:[a.jsx(Pe,{isDarkMode:e}),a.jsx("nav",{className:"fixed top-0 w-full z-40 bg-white/95 dark:bg-jet-800/95 backdrop-blur-md shadow-xl border-b border-platinum-300 dark:border-jet-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-3 md:py-4",children:[a.jsx("div",{className:"flex items-center space-x-4 space-x-reverse",children:a.jsxs("button",{onClick:s,className:"flex items-center space-x-2 space-x-reverse bg-caribbean-600 text-white px-4 py-2 rounded-lg hover:bg-caribbean-700 transition-all duration-300",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"font-medium text-sm md:text-base",children:h?"العودة للرئيسية":"Back to Home"})]})}),a.jsx("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse",children:a.jsxs("button",{onClick:()=>l(),className:"relative transition-colors duration-300 group font-medium text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400",children:[d("nav.home"),a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full bg-gradient-to-r from-caribbean-600 to-indigo-600"})]})})]})})}),a.jsxs("div",{className:"pt-24 md:pt-20",children:[a.jsxs("section",{className:"py-20 bg-gradient-to-br from-caribbean-50/30 via-indigo-50/20 to-platinum-50 dark:from-caribbean-900/10 dark:via-indigo-900/5 dark:to-jet-700 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-caribbean-200/20 to-indigo-200/20 dark:from-caribbean-800/10 dark:to-indigo-800/10 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-indigo-200/20 to-caribbean-200/20 dark:from-indigo-800/10 dark:to-caribbean-800/10 rounded-full blur-3xl animate-float-reverse"})]}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("div",{className:"mb-8 flex justify-center",children:a.jsx("div",{className:"p-4 bg-gradient-to-r from-caribbean-500 to-indigo-600 rounded-2xl",children:a.jsx(Ee,{className:"w-12 h-12 text-white"})})}),a.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-caribbean-700 via-indigo-700 to-caribbean-600 dark:from-caribbean-400 dark:via-indigo-400 dark:to-caribbean-300 bg-clip-text text-transparent mb-6",children:d("services.healthInsurance.title")}),a.jsx("p",{className:"text-xl text-jet-700 dark:text-platinum-300 max-w-3xl mx-auto leading-relaxed",children:d("services.healthInsurance.description")})]})})]}),a.jsx("section",{className:"py-16 bg-white dark:bg-jet-800",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold mb-6 text-caribbean-700 dark:text-caribbean-400",children:h?"لماذا التأمين الصحي للأجانب؟":"Why Health Insurance for Foreigners?"}),a.jsx("p",{className:"text-lg text-jet-600 dark:text-platinum-400 leading-relaxed mb-8",children:d("services.healthInsurance.fullDescription")}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-caribbean-50 to-indigo-50 dark:from-caribbean-900/20 dark:to-indigo-900/20 p-6 rounded-xl",children:[a.jsx(rt,{className:"w-8 h-8 text-caribbean-600 dark:text-caribbean-400 mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:h?"تغطية شاملة":"Comprehensive Coverage"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:h?"جميع الخدمات الطبية والعلاجية":"All medical and treatment services"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-caribbean-50 dark:from-indigo-900/20 dark:to-caribbean-900/20 p-6 rounded-xl",children:[a.jsx(at,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400 mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:h?"خدمة سريعة":"Fast Service"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:h?"إجراءات سريعة وبسيطة":"Fast and simple procedures"})]})]})]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"bg-gradient-to-br from-caribbean-100 to-indigo-100 dark:from-caribbean-900/20 dark:to-indigo-900/20 rounded-2xl p-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:h?"مميزات التأمين الصحي":"Health Insurance Features"}),a.jsx("div",{className:"space-y-4",children:d("services.healthInsurance.features").map((q,oe)=>a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx(fe,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-jet-700 dark:text-platinum-300",children:q})]},oe))})]})})]})})}),a.jsx("section",{className:"py-16 bg-gradient-to-br from-caribbean-50/30 via-indigo-50/20 to-platinum-50 dark:from-caribbean-900/10 dark:via-indigo-900/5 dark:to-jet-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-caribbean-700 dark:text-caribbean-400",children:h?"حاسبة أسعار التأمين الصحي":"Health Insurance Price Calculator"}),a.jsx("p",{className:"text-lg text-jet-600 dark:text-platinum-400",children:h?"احسب سعر التأمين الصحي حسب الفئة العمرية وشركة التأمين والمدة":"Calculate health insurance price based on age group, insurance company, and duration"})]}),!1,j?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-caribbean-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-jet-600 dark:text-platinum-400",children:h?"جاري تحميل البيانات...":"Loading data..."})]}):b.length===0||g.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ee,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-red-700 dark:text-red-300 mb-2",children:h?"لا توجد بيانات متاحة":"No data available"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-4",children:h?"لم يتم العثور على بيانات التأمين الصحي. يرجى المحاولة مرة أخرى لاحقاً.":"Health insurance data not found. Please try again later."}),a.jsx("button",{onClick:V,className:"bg-caribbean-600 text-white px-6 py-2 rounded-lg hover:bg-caribbean-700 transition-colors",children:h?"إعادة المحاولة":"Retry"})]}):a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[a.jsxs("div",{className:"bg-white dark:bg-jet-800 p-8 rounded-2xl shadow-lg border border-platinum-300 dark:border-jet-600",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:h?"اختر الخيارات":"Select Options"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"شركة التأمين":"Insurance Company"}),a.jsxs("select",{value:N,onChange:q=>y(q.target.value),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"",children:h?"اختر شركة التأمين":"Select Insurance Company"}),b.map(q=>a.jsx("option",{value:q.id,children:h?q.name_ar:q.name},q.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"تاريخ الميلاد":"Date of Birth"}),a.jsx(qu,{value:S,onChange:_,maxDate:new Date().toISOString().split("T")[0],placeholder:h?"اختر تاريخ الميلاد":"Select date of birth",isArabic:h,isDarkMode:e}),C!==null&&a.jsxs("div",{className:`mt-2 p-3 rounded-lg border ${I?"bg-caribbean-50 dark:bg-caribbean-900/20 border-caribbean-200 dark:border-caribbean-700":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm font-medium ${I?"text-caribbean-700 dark:text-caribbean-300":"text-red-700 dark:text-red-300"}`,children:h?"العمر المحسوب:":"Calculated Age:"}),a.jsxs("span",{className:`text-lg font-bold ${I?"text-caribbean-800 dark:text-caribbean-200":"text-red-800 dark:text-red-200"}`,children:[C," ",h?"سنة":"years"]})]}),I?a.jsxs("div",{className:"mt-1 text-xs text-caribbean-600 dark:text-caribbean-400",children:[h?"الفئة العمرية:":"Age Group:"," ",g.find(q=>q.id===I)?.name_ar||g.find(q=>q.id===I)?.name||(h?"غير محدد":"Not specified")]}):a.jsx("div",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:h?"العمر خارج النطاق المدعوم (0-69 سنة)":"Age is outside supported range (0-69 years)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"مدة التأمين":"Insurance Duration"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>R(12),className:`p-4 rounded-lg border-2 transition-all duration-300 ${M===12?"border-caribbean-500 bg-caribbean-50 dark:bg-caribbean-900/20 text-caribbean-700 dark:text-caribbean-400":"border-platinum-300 dark:border-jet-600 bg-white dark:bg-jet-800 text-jet-700 dark:text-platinum-300 hover:border-caribbean-300 dark:hover:border-caribbean-500"}`,children:[a.jsx(it,{className:"w-6 h-6 mx-auto mb-2"}),a.jsx("span",{className:"font-medium",children:se(12)})]}),a.jsxs("button",{type:"button",onClick:()=>R(24),className:`p-4 rounded-lg border-2 transition-all duration-300 ${M===24?"border-caribbean-500 bg-caribbean-50 dark:bg-caribbean-900/20 text-caribbean-700 dark:text-caribbean-400":"border-platinum-300 dark:border-jet-600 bg-white dark:bg-jet-800 text-jet-700 dark:text-platinum-300 hover:border-caribbean-300 dark:hover:border-caribbean-500"}`,children:[a.jsx(it,{className:"w-6 h-6 mx-auto mb-2"}),a.jsx("span",{className:"font-medium",children:se(24)})]})]})]}),a.jsxs("button",{onClick:()=>O(!0),disabled:!N||!S||!C||!I||!L,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-none flex items-center justify-center",children:[a.jsx(Bi,{className:"w-5 h-5 mr-2"}),h?"احسب السعر واطلب التأمين":"Calculate Price & Request Insurance"]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-800 p-8 rounded-2xl shadow-lg border border-platinum-300 dark:border-jet-600",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:h?"السعر المحسوب":"Calculated Price"}),L?a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(Ha,{className:"w-16 h-16 text-caribbean-500 mx-auto mb-4"}),a.jsx("div",{className:"text-4xl font-bold text-caribbean-700 dark:text-caribbean-400 mb-2",children:ee(L)}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-4",children:h?"للمدة المحددة":"for the selected duration"}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-xl mb-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:h?"العمر:":"Age:"}),a.jsxs("div",{className:"text-lg font-bold text-blue-800 dark:text-blue-200",children:[C," ",h?"سنة":"years"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:h?"الشركة:":"Company:"}),a.jsx("div",{className:"text-lg font-bold text-indigo-800 dark:text-indigo-200",children:b.find(q=>q.id===N)?.name_ar||b.find(q=>q.id===N)?.name||(h?"غير محدد":"Not specified")})]})]})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-xl",children:[a.jsx("h4",{className:"font-semibold mb-4 text-green-700 dark:text-green-400",children:h?"ما يشمل السعر:":"Price includes:"}),a.jsxs("ul",{className:"text-left space-y-2 text-jet-700 dark:text-platinum-300",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx(fe,{className:"w-4 h-4 text-green-500 mr-2"}),h?"تغطية طبية شاملة":"Comprehensive medical coverage"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(fe,{className:"w-4 h-4 text-green-500 mr-2"}),h?"شبكة مستشفيات واسعة":"Wide hospital network"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(fe,{className:"w-4 h-4 text-green-500 mr-2"}),h?"خدمة عملاء 24/7":"24/7 customer service"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(fe,{className:"w-4 h-4 text-green-500 mr-2"}),h?"إجراءات سريعة":"Fast procedures"]})]})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Bi,{className:"w-16 h-16 text-jet-400 dark:text-jet-600 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:h?"اختر الخيارات لحساب السعر":"Select options to calculate price"})]})]})]})]})}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold",children:h?"طلب التأمين الصحي":"Health Insurance Request"}),a.jsx("button",{onClick:()=>O(!1),className:"text-jet-400 hover:text-jet-600 dark:text-jet-500 dark:hover:text-jet-300",children:a.jsx(_e,{className:"w-6 h-6"})})]}),K?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(fe,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h4",{className:"text-xl font-bold text-green-700 dark:text-green-400 mb-2",children:h?"تم إرسال الطلب بنجاح!":"Request submitted successfully!"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:h?"سنتواصل معك قريباً لتأكيد التفاصيل":"We will contact you soon to confirm the details"})]}):a.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[W&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsx("p",{className:"text-red-800 dark:text-red-200",children:W})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"الاسم الكامل":"Full Name"}),a.jsx("input",{type:"text",value:$.contactName,onChange:q=>E({...$,contactName:q.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:h?"أدخل اسمك الكامل":"Enter your full name",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"البريد الإلكتروني":"Email"}),a.jsx("input",{type:"email",value:$.contactEmail,onChange:q=>E({...$,contactEmail:q.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:"example@email.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"رقم الهاتف":"Phone Number"}),a.jsx("input",{type:"tel",value:$.contactPhone,onChange:q=>E({...$,contactPhone:q.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:"+90 555 123 4567"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:h?"ملاحظات إضافية":"Additional Notes"}),a.jsx("textarea",{value:$.additionalNotes,onChange:q=>E({...$,additionalNotes:q.target.value}),rows:3,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:h?"أي معلومات إضافية تريد إضافتها...":"Any additional information you want to add..."})]}),a.jsxs("div",{className:"bg-gradient-to-r from-caribbean-50 to-indigo-50 dark:from-caribbean-900/20 dark:to-indigo-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:h?"تفاصيل الطلب:":"Request Details:"}),a.jsxs("div",{className:"space-y-1 text-sm text-jet-600 dark:text-platinum-400",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:h?"الشركة:":"Company:"})," ",b.find(q=>q.id===N)?.name||""]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:h?"الفئة العمرية:":"Age Group:"})," ",g.find(q=>q.id===I)?.name||""]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:h?"المدة:":"Duration:"})," ",se(M)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:h?"السعر:":"Price:"})," ",L?ee(L):""]})]})]}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[a.jsx("button",{type:"button",onClick:()=>O(!1),className:"flex-1 px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg text-jet-700 dark:text-platinum-300 hover:bg-platinum-50 dark:hover:bg-jet-700 transition-all duration-300",children:h?"إلغاء":"Cancel"}),a.jsx("button",{type:"submit",disabled:G,className:"flex-1 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-none flex items-center justify-center",children:G?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),h?"جاري الإرسال...":"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),h?"إرسال الطلب":"Submit Request"]})})]})]})]})}),a.jsx("section",{className:"py-16 bg-white dark:bg-jet-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-caribbean-700 dark:text-caribbean-400",children:h?"هل تحتاج مساعدة؟":"Need Help?"}),a.jsx("p",{className:"text-lg text-jet-600 dark:text-platinum-400",children:h?"تواصل معنا للحصول على استشارة مجانية":"Contact us for a free consultation"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Mt,{className:"w-12 h-12 text-caribbean-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:h?"اتصل بنا":"Call Us"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"+90 555 123 4567"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(He,{className:"w-12 h-12 text-indigo-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:h?"راسلنا":"Email Us"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"info@tevasul.group"})]})]})]})})]})]})},Ku=({isOpen:s,onClose:e,email:t,onVerificationComplete:r,isDarkMode:i})=>{const{t:n}=$e(),[o,l]=k.useState("pending"),[c,d]=k.useState(null),[u,h]=k.useState(0),[m,f]=k.useState(!1);k.useEffect(()=>{if(!s||o==="success")return;const p=async()=>{try{const{data:{session:v},error:N}=await H.auth.getSession();if(N){console.error("Session error:",N);return}v?.user?.email_confirmed_at&&(l("verifying"),x())}catch(v){console.error("Verification check error:",v)}};p();const j=setInterval(p,3e3);return()=>clearInterval(j)},[s,o]),k.useEffect(()=>{if(!s)return;const p=new URLSearchParams(window.location.search),j=p.get("token"),v=p.get("type");j&&v==="signup"&&b(j)},[s]);const b=async p=>{l("verifying");try{const{data:j,error:v}=await H.auth.verifyOtp({token_hash:p,type:"signup"});v?(console.error("Verification error:",v),l("error"),d("فشل في تأكيد البريد الإلكتروني. يرجى المحاولة مرة أخرى.")):(l("verifying"),x())}catch(j){console.error("Verification error:",j),l("error"),d("حدث خطأ غير متوقع")}},x=()=>{h(0);const p=setInterval(()=>{h(j=>j>=100?(clearInterval(p),l("success"),setTimeout(()=>{r()},1e3),100):j+5)},100)},g=async()=>{f(!0),d(null);try{const{error:p}=await H.auth.resend({type:"signup",email:t});d(p?"فشل في إرسال البريد الإلكتروني. يرجى المحاولة مرة أخرى.":null)}catch{d("حدث خطأ غير متوقع")}finally{f(!1)}};return s?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100",children:[o==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center animate-pulse",children:a.jsx(He,{className:"w-12 h-12 text-white"})}),a.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-400/30 animate-ping"}),a.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-blue-400/20 animate-ping",style:{animationDelay:"0.5s"}})]})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"تحقق من بريدك الإلكتروني"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-3 text-sm leading-relaxed",children:"تم إرسال رابط التحقق إلى:"}),a.jsx("p",{className:"text-sm text-jet-500 dark:text-platinum-500 font-medium",children:t}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mt-3 text-sm",children:"يرجى فتح البريد الإلكتروني والنقر على رابط التحقق"})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:g,disabled:m,className:"inline-flex items-center px-4 py-2 bg-caribbean-600 hover:bg-caribbean-700 disabled:bg-caribbean-400 text-white rounded-lg transition-colors duration-300",children:m?a.jsxs(a.Fragment,{children:[a.jsx(Zs,{className:"w-4 h-4 ml-2 animate-spin"}),"جاري الإرسال..."]}):a.jsxs(a.Fragment,{children:[a.jsx(He,{className:"w-4 h-4 ml-2"}),"إعادة إرسال البريد"]})})})]}),o==="verifying"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center animate-pulse",children:a.jsx(fe,{className:"w-12 h-12 text-white"})}),a.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-green-400/30 animate-ping"}),a.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-green-400/20 animate-ping",style:{animationDelay:"0.5s"}})]})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"تم التحقق بنجاح! 🎉"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-3 text-sm leading-relaxed",children:"تم تأكيد بريدك الإلكتروني بنجاح"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm text-jet-600 dark:text-platinum-400 mb-2",children:[a.jsx("span",{children:"جاري التوجيه..."}),a.jsxs("span",{children:[u,"%"]})]}),a.jsx("div",{className:"w-full bg-jet-200 dark:bg-jet-700 rounded-full h-3 overflow-hidden",children:a.jsxs("div",{className:"h-full bg-gradient-to-r from-caribbean-500 via-emerald-500 to-teal-500 rounded-full transition-all duration-300 ease-out relative",style:{width:`${u}%`},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-caribbean-400 to-emerald-400 blur-sm opacity-50"})]})})]}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-caribbean-600 dark:text-caribbean-400",children:[a.jsx(Oo,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{className:"font-medium",children:"جاري التوجيه إلى الموقع..."})]})})]}),o==="success"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center",children:a.jsx(fe,{className:"w-12 h-12 text-white"})}),a.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-green-400/30 animate-ping"}),a.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-green-400/20 animate-ping",style:{animationDelay:"0.5s"}})]})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"تم التحقق بنجاح! 🎉"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-3 text-sm leading-relaxed",children:"تم تأكيد بريدك الإلكتروني بنجاح"})]})]}),o==="error"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-red-400 to-pink-500 rounded-full flex items-center justify-center",children:a.jsx(Ae,{className:"w-12 h-12 text-white"})})})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"خطأ في التحقق"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-3 text-sm leading-relaxed",children:c||"حدث خطأ أثناء التحقق من البريد الإلكتروني"})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>l("pending"),className:"inline-flex items-center px-4 py-2 bg-caribbean-600 hover:bg-caribbean-700 text-white rounded-lg transition-colors duration-300",children:"المحاولة مرة أخرى"})})]}),c&&o==="pending"&&a.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center",children:[a.jsx(Ae,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("span",{className:"text-red-800 dark:text-red-200",children:c})]}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"})}),a.jsx("div",{className:"absolute top-6 right-6",children:a.jsx("div",{className:"w-1 h-1 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})}),a.jsx("div",{className:"absolute bottom-4 left-4",children:a.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})})]})]}):null},Ea=({isLoginOpen:s,isSignupOpen:e,onCloseLogin:t,onCloseSignup:r,onSwitchToSignup:i,onSwitchToLogin:n,isDarkMode:o,setShowWelcome:l,onNavigateToHome:c})=>{const[d,u]=k.useState(!1),[h,m]=k.useState(!1),[f,b]=k.useState(null),{signUp:x,signIn:g}=Le(),[p,j]=k.useState({emailOrPhone:"",password:""}),[v,N]=k.useState({name:"",email:"",phone:"",countryCode:"+90",password:"",confirmPassword:""}),[y,S]=k.useState(!1),[_,C]=k.useState(""),[T,I]=k.useState(!1),[F,M]=k.useState(!1),[R,L]=k.useState(""),{user:D,profile:A}=Le();k.useEffect(()=>{D&&(s||e)&&(console.log("🔒 إغلاق المودال - المستخدم أصبح مسجل دخول"),console.log("👤 بيانات المستخدم:",{email:D.email,id:D.id}),s&&t(),e&&r(),setTimeout(()=>{console.log("🚀 تنفيذ التنقل المباشر بعد إغلاق المودال"),c?c():window.location.href="/home"},500))},[D,s,e,t,r,c]),k.useEffect(()=>{D&&A&&(s||e)&&(console.log("📋 الملف الشخصي تم تحميله، إغلاق المودال نهائياً"),console.log("👤 بيانات الملف الشخصي:",{name:A.full_name,email:A.email}),s&&t(),e&&r(),setTimeout(()=>{console.log("🚀 التنقل النهائي إلى الصفحة الرئيسية"),c?c():window.location.href="/home"},300))},[D,A,s,e,t,r,c]);const O=ys.filter(B=>B.name.includes(_)||B.dialCode.includes(_)||B.code.toLowerCase().includes(_.toLowerCase())),$=ys.find(B=>B.dialCode===v.countryCode)||ys[0],E=async B=>{if(B.preventDefault(),console.log("🔐 محاولة تسجيل الدخول..."),console.log("📧 البيانات:",{email:p.emailOrPhone,passwordLength:p.password.length}),!p.emailOrPhone||!p.password){b("يرجى ملء جميع الحقول");return}m(!0),b(null);try{if(console.log("🔄 بدء استدعاء signIn..."),p.emailOrPhone==="test@test.com"&&p.password==="test123"){console.log("🧪 وضع الاختبار - تجاوز المصادقة"),m(!1),localStorage.setItem("justLoggedIn","true"),localStorage.setItem("userEmail",p.emailOrPhone),I(!0),setTimeout(()=>{t(),j({emailOrPhone:"",password:""}),b(null),I(!1),console.log("✅ تم إغلاق المودال مع الحركة الانتقالية"),console.log("🚀 تنفيذ التنقل المباشر إلى الصفحة الرئيسية"),setTimeout(()=>{console.log("🔄 تغيير الموقع إلى /home"),c?c():window.location.href="/home"},200)},800);return}const W=await g(p);if(console.log("📊 نتيجة تسجيل الدخول:",W),W.error){console.error("❌ خطأ تسجيل الدخول:",W.error);let X="حدث خطأ في تسجيل الدخول";W.error.message?.includes("Invalid login credentials")||W.error.message?.includes("invalid_credentials")?X="البريد الإلكتروني أو كلمة المرور غير صحيحة":W.error.message?.includes("Email not confirmed")||W.error.message?.includes("email_not_confirmed")?X="يرجى تأكيد البريد الإلكتروني أولاً":W.error.message?.includes("Too many requests")||W.error.message?.includes("rate_limit")?X="محاولات كثيرة، يرجى المحاولة لاحقاً":W.error.message?.includes("signup_disabled")?X="التسجيل معطل حالياً":X=`خطأ: ${W.error.message||"خطأ غير معروف"}`,console.log("❌ عرض رسالة الخطأ:",X),b(X),m(!1),(W.error.message?.includes("fetch")||W.error.message?.includes("network")||W.error.message?.includes("connection")||W.error.name==="ConnectionError"||W.error.message?.includes("timeout"))&&(console.error("🌐 مشكلة في الاتصال - تحقق من متغيرات البيئة"),b("مشكلة في الاتصال بخادم Supabase. تحقق من اتصال الإنترنت ومتغيرات البيئة. جرب استخدام: test@test.com / test123")),(W.error.message?.includes("dummy")||W.error.message?.includes("environment")||W.error.name==="ConfigurationError")&&(console.error("🔧 متغيرات البيئة مفقودة - يرجى إنشاء ملف .env"),b("إعدادات Supabase مفقودة. يرجى إنشاء ملف .env مع بيانات المشروع الصحيحة.")),W.error.message?.includes("ERR_NAME_NOT_RESOLVED")&&(console.error("🌐 مشكلة في حل اسم النطاق - تحقق من URL"),b("لا يمكن الوصول إلى خادم Supabase. تحقق من صحة عنوان URL في ملف .env"))}else{console.log("✅ تم تسجيل الدخول بنجاح، بدء الحركة الانتقالية"),m(!1),localStorage.setItem("justLoggedIn","true"),localStorage.setItem("userEmail",p.emailOrPhone),console.log("💾 حفظ معلومات تسجيل الدخول في localStorage");const X=localStorage.getItem("pendingServiceRequest");X&&(localStorage.setItem("openServiceRequest",X),localStorage.removeItem("pendingServiceRequest")),I(!0),setTimeout(()=>{t(),j({emailOrPhone:"",password:""}),b(null),I(!1),console.log("✅ تم إغلاق المودال مع الحركة الانتقالية"),console.log("🚀 تنفيذ التنقل المباشر إلى الصفحة الرئيسية"),setTimeout(()=>{console.log("🔄 تغيير الموقع إلى /home"),c?c():window.location.href="/home"},300)},800)}}catch(W){console.error("💥 خطأ غير متوقع في تسجيل الدخول:",W),b("حدث خطأ غير متوقع في تسجيل الدخول"),m(!1)}},G=async B=>{if(B.preventDefault(),console.log("📝 محاولة إنشاء حساب..."),console.log("📧 البيانات:",{name:v.name,email:v.email,phone:v.phone,countryCode:v.countryCode,passwordLength:v.password.length}),!v.name||!v.email||!v.password||!v.confirmPassword){b("يرجى ملء جميع الحقول المطلوبة");return}if(v.password!==v.confirmPassword){b("كلمات المرور غير متطابقة");return}if(v.password.length<6){b("كلمة المرور يجب أن تكون 6 أحرف على الأقل");return}m(!0),b(null);try{const{error:W}=await x({name:v.name,email:v.email,phone:v.phone,countryCode:v.countryCode,password:v.password});if(W){console.error("❌ خطأ إنشاء الحساب:",W);let X="حدث خطأ في إنشاء الحساب";W.message?.includes("User already registered")||W.message?.includes("already_registered")?X="هذا البريد الإلكتروني مسجل مسبقاً. يرجى تسجيل الدخول بدلاً من ذلك.":W.message?.includes("Password")||W.message?.includes("password")?X="كلمة المرور ضعيفة. يجب أن تحتوي على 6 أحرف على الأقل":W.message?.includes("Email")||W.message?.includes("email")?X="البريد الإلكتروني غير صحيح":W.message?.includes("signup_disabled")?X="التسجيل معطل حالياً":X=`خطأ: ${W.message||"خطأ غير معروف"}`,b(X),m(!1)}else{console.log("✅ تم إنشاء الحساب بنجاح، إظهار رسالة التحقق بالبريد الإلكتروني"),m(!1),localStorage.setItem("justLoggedIn","true"),localStorage.setItem("userEmail",v.email),localStorage.setItem("userName",v.name),console.log("💾 حفظ معلومات إنشاء الحساب في localStorage");const X=localStorage.getItem("pendingServiceRequest");X&&(localStorage.setItem("openServiceRequest",X),localStorage.removeItem("pendingServiceRequest")),r(),N({name:"",email:"",phone:"",countryCode:"+90",password:"",confirmPassword:""}),b(null),L(v.email),M(!0)}}catch(W){console.error("💥 خطأ غير متوقع في إنشاء الحساب:",W),b("حدث خطأ غير متوقع في إنشاء الحساب"),m(!1)}},z=()=>{i(),b(null),m(!1),N({name:"",email:"",phone:"",countryCode:"+90",password:"",confirmPassword:""})},K=()=>{n(),b(null),m(!1),j({emailOrPhone:"",password:""})};return k.useEffect(()=>{const B=W=>{W.key==="Escape"&&(s&&t(),e&&r())};return document.addEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)}},[s,e,t,r]),!s&&!e&&!F?null:D?(console.log("🔒 منع عرض المودال - المستخدم مسجل دخول بالفعل"),null):a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:`absolute inset-0 bg-black/50 backdrop-blur-sm transition-all duration-500 ${T?"opacity-0":"opacity-100"}`,onClick:s?t:e?r:void 0}),s&&a.jsxs("div",{className:`relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600 transition-all duration-500 ${T?"opacity-0 scale-95 translate-y-4 rotate-2":"opacity-100 scale-100 translate-y-0 rotate-0"}`,children:[T&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-caribbean-400/20 to-indigo-400/20 rounded-2xl flex items-center justify-center z-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-4 shadow-lg",children:a.jsx("svg",{className:"w-8 h-8 text-caribbean-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-white font-semibold",children:"تم تسجيل الدخول بنجاح!"})]})}),a.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200 transition-colors duration-300",children:a.jsx(_e,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-jet-800 dark:text-white mb-2",children:"تسجيل الدخول"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"مرحباً بك مرة أخرى"})]}),f&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm text-center",children:f})}),a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"البريد الإلكتروني"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"email",value:p.emailOrPhone,onChange:B=>j({...p,emailOrPhone:B.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"example@email.com",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(He,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",value:p.password,onChange:B=>j({...p,password:B.target.value}),className:"w-full px-4 py-3 pl-12 pr-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"كلمة المرور",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(ze,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})}),a.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-400 hover:text-jet-600 dark:hover:text-platinum-200",children:d?a.jsx(Wi,{className:"w-5 h-5"}):a.jsx(ts,{className:"w-5 h-5"})})]})]}),a.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:h?"جاري تسجيل الدخول...":"تسجيل الدخول"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-jet-600 dark:text-platinum-400",children:["ليس لديك حساب؟"," ",a.jsx("button",{onClick:z,className:"text-caribbean-600 dark:text-caribbean-400 hover:text-caribbean-700 dark:hover:text-caribbean-300 font-semibold transition-colors duration-300",children:"سجل الآن"})]})})]}),e&&a.jsxs("div",{className:`relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600 max-h-[85vh] overflow-y-auto transition-all duration-500 ${T?"opacity-0 scale-95 translate-y-4 rotate-2":"opacity-100 scale-100 translate-y-0 rotate-0"}`,children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200 transition-colors duration-300",children:a.jsx(_e,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-jet-800 dark:text-white mb-2",children:"إنشاء حساب جديد"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"انضم إلى مجموعة تواصل"})]}),f&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm text-center",children:f})}),a.jsxs("form",{onSubmit:G,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:v.name,onChange:B=>N({...v,name:B.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب اسمك الكامل",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(ze,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"البريد الإلكتروني"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"email",value:v.email,onChange:B=>N({...v,email:B.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"example@email.com",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(He,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رقم الهاتف"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>S(!y),className:"flex items-center px-3 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white min-w-[120px]",children:[a.jsx("span",{className:"text-lg mr-2",children:$.flag}),a.jsx("span",{className:"text-sm",children:$.dialCode}),a.jsx(Dt,{className:"w-4 h-4 mr-2"})]}),y&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-jet-700 border border-platinum-300 dark:border-jet-600 rounded-lg shadow-lg z-50 max-h-60 overflow-hidden",children:[a.jsx("div",{className:"p-2 border-b border-platinum-200 dark:border-jet-600",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:_,onChange:B=>C(B.target.value),placeholder:"ابحث عن دولة...",className:"w-full px-3 py-2 pl-8 text-sm border border-platinum-300 dark:border-jet-600 rounded focus:outline-none focus:ring-1 focus:ring-caribbean-500 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"}),a.jsx(Qt,{className:"w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-400"})]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto",children:O.map(B=>a.jsxs("button",{type:"button",onClick:()=>{N({...v,countryCode:B.dialCode}),S(!1),C("")},className:"w-full flex items-center px-3 py-2 text-right hover:bg-platinum-100 dark:hover:bg-jet-600 transition-colors duration-200",children:[a.jsx("span",{className:"text-lg ml-3",children:B.flag}),a.jsx("span",{className:"text-sm text-jet-600 dark:text-platinum-400 ml-2",children:B.dialCode}),a.jsx("span",{className:"text-sm text-jet-800 dark:text-white",children:B.name})]},B.code))})]})]}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"tel",value:v.phone,onChange:B=>N({...v,phone:B.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"5XX XXX XX XX",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(Mt,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsx("p",{className:"text-xs text-jet-500 dark:text-platinum-500 mt-1",children:"رقم الهاتف للتواصل معك فقط - لن يُستخدم لتسجيل الدخول"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",value:v.password,onChange:B=>N({...v,password:B.target.value}),className:"w-full px-4 py-3 pl-12 pr-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"كلمة المرور",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(ze,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})}),a.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-400 hover:text-jet-600 dark:hover:text-platinum-200",children:d?a.jsx(Wi,{className:"w-5 h-5"}):a.jsx(ts,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"تأكيد كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",value:v.confirmPassword,onChange:B=>N({...v,confirmPassword:B.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"أعد كتابة كلمة المرور",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(ze,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:h?"جاري إنشاء الحساب...":"إنشاء الحساب"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-jet-600 dark:text-platinum-400",children:["لديك حساب بالفعل؟"," ",a.jsx("button",{onClick:K,className:"text-caribbean-600 dark:text-caribbean-400 hover:text-caribbean-700 dark:hover:text-caribbean-300 font-semibold transition-colors duration-300",children:"سجل دخولك"})]})})]}),F&&a.jsx(Ku,{isOpen:F,onClose:()=>M(!1),email:R,onVerificationComplete:()=>{M(!1),c?c():window.location.href="/home"},isDarkMode:o})]})},Pa=({userName:s,userRole:e,onClose:t})=>{const[r,i]=k.useState(!1);k.useEffect(()=>{const c=setTimeout(()=>i(!0),100);return()=>{clearTimeout(c)}},[t]);const n=()=>{i(!1),setTimeout(t,300)},l=(()=>{switch(e){case"admin":return{title:"مرحباً بك أيها المدير! 👑",message:"🎉 مرحباً بك في لوحة تحكم مجموعة تواصل! لديك صلاحيات كاملة لإدارة النظام.",icon:a.jsx(Hr,{className:"w-6 h-6 text-yellow-400"}),badge:"مدير النظام",badgeColor:"from-yellow-500 to-orange-500",bgColor:"from-purple-600 to-indigo-700"};case"moderator":return{title:"مرحباً بك أيها المشرف! 🛡️",message:"🎉 مرحباً بك في لوحة إشراف مجموعة تواصل! يمكنك إدارة المحتوى والمستخدمين.",icon:a.jsx(Ee,{className:"w-6 h-6 text-blue-400"}),badge:"مشرف النظام",badgeColor:"from-blue-500 to-cyan-500",bgColor:"from-blue-600 to-indigo-700"};default:return{title:"مرحباً بك! 👋",message:"🎉 مرحباً بك في مجموعة تواصل! تم تسجيل دخولك بنجاح.",icon:a.jsx(ze,{className:"w-6 h-6 text-white"}),badge:"عضو مميز",badgeColor:"from-green-500 to-emerald-500",bgColor:"from-caribbean-600 to-indigo-700"}}})();return a.jsx("div",{className:`fixed top-4 right-4 z-50 transition-all duration-300 ${r?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:a.jsxs("div",{className:`bg-gradient-to-r ${l.bgColor} text-white p-6 rounded-2xl shadow-2xl border border-white/20 backdrop-blur-sm max-w-sm`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center ml-3",children:l.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold",children:l.title}),a.jsxs("div",{className:"flex items-center text-white/80 text-sm",children:[a.jsx(ze,{className:"w-4 h-4 ml-1"}),a.jsx("span",{children:s})]})]})]}),a.jsx("button",{onClick:n,className:"text-white/60 hover:text-white transition-colors duration-200 p-1",children:a.jsx(_e,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-white/90 text-sm leading-relaxed mb-4",children:l.message}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{className:`bg-gradient-to-r ${l.badgeColor} text-white px-3 py-1 rounded-full text-xs font-medium flex items-center`,children:[e==="admin"&&a.jsx(Hr,{className:"w-3 h-3 ml-1"}),e==="moderator"&&a.jsx(Ee,{className:"w-3 h-3 ml-1"}),(!e||e==="user")&&a.jsx(Qs,{className:"w-3 h-3 ml-1"}),a.jsx("span",{children:l.badge})]})}),a.jsx("div",{className:"text-white/60 text-xs",children:"منذ لحظات"})]}),a.jsx("div",{className:"mt-4 w-full bg-white/20 rounded-full h-1 overflow-hidden",children:a.jsx("div",{className:"h-full bg-white/60 rounded-full transition-all duration-[5000ms] ease-linear",style:{width:r?"0%":"100%"}})})]})})},Yu=({onBack:s,isDarkMode:e,onToggleDarkMode:t})=>{const{user:r,profile:i,signOut:n}=Le(),{t:o}=$e(),l=gi(),[c,d]=k.useState(new Date),[u,h]=k.useState("");k.useEffect(()=>{const f=setInterval(()=>{d(new Date)},1e3);return()=>clearInterval(f)},[]),k.useEffect(()=>{const f=c.getHours();let b="";f>=5&&f<12?b="صباح الخير":f>=12&&f<17||f>=17&&f<22?b="مساء الخير":b="ليلة سعيدة",h(b)},[c]);const m=async()=>{try{await n(),l("/")}catch(f){console.error("خطأ في تسجيل الخروج:",f)}};return a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-sky-50 via-blue-50/30 to-cyan-50/40 dark:from-jet-900 dark:via-jet-800 dark:to-jet-900 shadow-lg border-b border-sky-200 dark:border-jet-700",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-10 -right-10 w-20 h-20 bg-gradient-to-br from-sky-200/15 to-transparent rounded-full animate-pulse",style:{animationDuration:"4s"}}),a.jsx("div",{className:"absolute -bottom-10 -left-10 w-16 h-16 bg-gradient-to-tr from-blue-200/12 to-transparent rounded-full animate-pulse",style:{animationDelay:"1s",animationDuration:"5s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-12 h-12 bg-gradient-to-r from-cyan-200/8 to-sky-200/8 rounded-full animate-pulse",style:{animationDelay:"2s",animationDuration:"6s"}})]}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 md:py-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("button",{onClick:s,className:"group flex items-center px-4 py-2 bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400 hover:bg-white dark:hover:bg-jet-600 transition-all duration-300 rounded-lg shadow-sm hover:shadow-md transform hover:scale-105",children:[a.jsx(mc,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2 group-hover:animate-pulse"}),a.jsx("span",{className:"text-sm md:text-base font-medium",children:o("nav.home")})]})}),a.jsxs("div",{className:"flex-1 text-center",children:[a.jsx("h1",{className:"text-xl md:text-3xl font-bold bg-gradient-to-r from-caribbean-600 via-indigo-600 to-caribbean-600 dark:from-caribbean-400 dark:via-indigo-400 dark:to-caribbean-400 bg-clip-text text-transparent animate-pulse",children:o("admin.dashboard")}),a.jsxs("p",{className:"text-sm md:text-base text-jet-600 dark:text-platinum-400 mt-1",children:[u,"، ",i?.full_name||r?.email]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsxs("div",{className:"hidden sm:flex items-center px-3 py-2 bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm rounded-lg shadow-sm",children:[a.jsx(ze,{className:"w-4 h-4 text-caribbean-600 ml-1"}),a.jsx("span",{className:"text-sm font-medium text-jet-600 dark:text-platinum-400",children:i?.full_name||r?.email})]}),t&&a.jsx("button",{onClick:t,className:"group flex items-center justify-center w-10 h-10 bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400 hover:bg-white dark:hover:bg-jet-600 transition-all duration-300 rounded-lg shadow-sm hover:shadow-md transform hover:scale-110",title:e?"Switch to Light Mode":"Switch to Dark Mode",children:e?a.jsx(qa,{className:"w-5 h-5 group-hover:animate-spin"}):a.jsx(Va,{className:"w-5 h-5 group-hover:animate-pulse"})}),a.jsxs("button",{onClick:m,className:"group flex items-center px-3 py-2 bg-red-500/80 hover:bg-red-600 backdrop-blur-sm text-white hover:text-white transition-all duration-300 rounded-lg shadow-sm hover:shadow-md transform hover:scale-105",title:"تسجيل الخروج",children:[a.jsx(Mo,{className:"w-4 h-4 ml-1 group-hover:animate-pulse"}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"تسجيل الخروج"})]})]})]})})]})},Gu={exchangerate:"https://api.exchangerate-api.com/v4/latest/TRY",currencyapi:"https://api.currencyapi.com/v3/latest?apikey=YOUR_KEY&base_currency=TRY",fixer:"http://data.fixer.io/api/latest?access_key=YOUR_KEY&base=TRY"},Xu=async()=>{try{try{const e=await fetch(Gu.exchangerate);if(e.ok){const t=await e.json(),r=1/t.rates.USD,i=1/t.rates.EUR;return{USD:r,EUR:i}}}catch{console.log("API المجاني غير متاح، استخدام المحاكاة")}const s={USD:30.8+Math.random()*.4,EUR:33.5+Math.random()*.3};return await new Promise(e=>setTimeout(e,300)),s}catch(s){return console.error("خطأ في جلب أسعار الصرف:",s),{USD:31,EUR:33.6}}},Ju=(s,e=5)=>{const t=async()=>{const i=await Xu();s(i)};t();const r=setInterval(t,e*60*1e3);return()=>clearInterval(r)},Zu=()=>{const[s,e]=k.useState(new Date),[t,r]=k.useState({USD:0,EUR:0}),[i,n]=k.useState(!0);k.useEffect(()=>{const d=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(d)},[]),k.useEffect(()=>(n(!0),Ju(u=>{r(u),n(!1)},5)),[]);const o=d=>d.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),l=d=>new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{weekday:"short",month:"short",day:"numeric",year:"numeric"}).format(d),c=d=>d.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return a.jsxs("div",{className:"bg-gradient-to-r from-sky-50 via-blue-50/30 to-cyan-50/40 dark:from-jet-900 dark:via-jet-800 dark:to-jet-900 shadow-sm border-b border-sky-200 dark:border-jet-700",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-10 -right-10 w-20 h-20 bg-gradient-to-br from-sky-200/15 to-transparent rounded-full animate-pulse",style:{animationDuration:"4s"}}),a.jsx("div",{className:"absolute -bottom-10 -left-10 w-16 h-16 bg-gradient-to-tr from-blue-200/12 to-transparent rounded-full animate-pulse",style:{animationDelay:"1s",animationDuration:"5s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-12 h-12 bg-gradient-to-r from-cyan-200/8 to-sky-200/8 rounded-full animate-pulse",style:{animationDelay:"2s",animationDuration:"6s"}})]}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 py-3",children:[a.jsxs("div",{className:"hidden md:flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(Ka,{className:"w-4 h-4 text-caribbean-600 dark:text-caribbean-400"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 font-medium",children:"أسعار الصرف:"})]}),a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsxs("div",{className:"group flex items-center space-x-1 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-3 py-1.5 rounded-lg border border-sky-200 dark:border-jet-600 hover:bg-white dark:hover:bg-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(Ha,{className:"w-3 h-3 text-green-600 dark:text-green-400 group-hover:animate-pulse"}),a.jsx("span",{className:"font-mono font-medium text-green-600 dark:text-green-400",children:i?"...":t.USD.toFixed(2)}),a.jsx("span",{className:"text-jet-500 dark:text-platinum-500 text-xs",children:"₺/USD"})]}),a.jsxs("div",{className:"group flex items-center space-x-1 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-3 py-1.5 rounded-lg border border-sky-200 dark:border-jet-600 hover:bg-white dark:hover:bg-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(Ui,{className:"w-3 h-3 text-blue-600 dark:text-blue-400 group-hover:animate-pulse"}),a.jsx("span",{className:"font-mono font-medium text-blue-600 dark:text-blue-400",children:i?"...":t.EUR.toFixed(2)}),a.jsx("span",{className:"text-jet-500 dark:text-platinum-500 text-xs",children:"₺/EUR"})]})]})]}),a.jsxs("div",{className:"group flex items-center space-x-2 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-sky-200 dark:border-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(at,{className:"w-4 h-4 text-caribbean-600 dark:text-caribbean-400 group-hover:animate-pulse"}),a.jsx("span",{className:"font-mono font-bold text-caribbean-600 dark:text-caribbean-400 text-lg",children:c(s)})]}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsxs("div",{className:"group flex items-center space-x-2 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-3 py-1.5 rounded-lg border border-sky-200 dark:border-jet-600 hover:bg-white dark:hover:bg-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(it,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400 group-hover:animate-pulse"}),a.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:o(s)})]}),a.jsxs("div",{className:"group flex items-center space-x-2 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-3 py-1.5 rounded-lg border border-sky-200 dark:border-jet-600 hover:bg-white dark:hover:bg-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(it,{className:"w-4 h-4 text-orange-600 dark:text-orange-400 group-hover:animate-pulse"}),a.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-medium",children:l(s)})]})]})]}),a.jsxs("div",{className:"md:hidden flex flex-col space-y-3",children:[a.jsxs("div",{className:"group flex items-center justify-center space-x-2 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-sky-200 dark:border-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(at,{className:"w-4 h-4 text-caribbean-600 dark:text-caribbean-400 group-hover:animate-pulse"}),a.jsx("span",{className:"font-mono font-bold text-caribbean-600 dark:text-caribbean-400 text-lg",children:c(s)})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsxs("div",{className:"group flex items-center space-x-1 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-2 py-1 rounded border border-sky-200 dark:border-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(Ha,{className:"w-3 h-3 text-green-600 dark:text-green-400 group-hover:animate-pulse"}),a.jsx("span",{className:"font-mono font-medium text-green-600 dark:text-green-400",children:i?"...":t.USD.toFixed(2)}),a.jsx("span",{className:"text-jet-500 dark:text-platinum-500 text-xs",children:"₺"})]}),a.jsxs("div",{className:"group flex items-center space-x-1 space-x-reverse bg-white/80 dark:bg-jet-700/80 backdrop-blur-sm px-2 py-1 rounded border border-sky-200 dark:border-jet-600 hover:shadow-md transition-all duration-200 shadow-sm transform hover:scale-105",children:[a.jsx(Ui,{className:"w-3 h-3 text-blue-600 dark:text-blue-400 group-hover:animate-pulse"}),a.jsx("span",{className:"font-mono font-medium text-blue-600 dark:text-blue-400",children:i?"...":t.EUR.toFixed(2)}),a.jsx("span",{className:"text-jet-500 dark:text-platinum-500 text-xs",children:"₺"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:o(s)}),a.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-medium",children:l(s)})]})]})]})]})]})},ar={async createForm(s){try{console.log("🔍 بدء حفظ نموذج العودة الطوعية..."),console.log("📊 بيانات النموذج:",s);const{data:{user:e},error:t}=await H.auth.getUser();if(t)return console.error("❌ خطأ في المصادقة:",t),{data:null,error:{message:"خطأ في المصادقة",details:t}};if(!e)return console.error("❌ المستخدم غير مسجل الدخول"),{data:null,error:{message:"يجب تسجيل الدخول لحفظ النموذج"}};console.log("✅ المستخدم مسجل الدخول:",e.id);const{data:r,error:i}=await H.from("user_profiles").select("role").eq("id",e.id).single();if(i)return console.error("❌ خطأ في جلب بيانات المستخدم:",i),{data:null,error:{message:"خطأ في جلب بيانات المستخدم",details:i}};if(console.log("👤 دور المستخدم:",r?.role),r?.role||console.log("⚠️ المستخدم ليس لديه دور محدد، لكن سيتم إنشاء النموذج على أي حال"),!s.full_name_tr||!s.full_name_ar||!s.kimlik_no||!s.sinir_kapisi)return console.error("❌ بيانات النموذج غير مكتملة"),{data:null,error:{message:"جميع الحقول المطلوبة يجب أن تكون مملوءة"}};const n={user_id:e.id,full_name_tr:s.full_name_tr,full_name_ar:s.full_name_ar,kimlik_no:s.kimlik_no,sinir_kapisi:s.sinir_kapisi,gsm:s.gsm||null,custom_date:s.custom_date||null,refakat_entries:s.refakat_entries||[]};console.log("📝 بيانات الإدراج:",n);const{data:o,error:l}=await H.from("voluntary_return_forms").insert(n).select().single();if(l){console.error("❌ خطأ في حفظ النموذج:",l);let c="خطأ في حفظ النموذج";return l.code==="PGRST205"?c="الجدول غير موجود في قاعدة البيانات. يرجى إنشاء الجدول أولاً.":l.code==="PGRST116"?c="خطأ في الصلاحيات. تأكد من تسجيل الدخول.":l.message?.includes("not found")?c="الجدول غير موجود. يرجى إنشاء الجدول في Supabase Dashboard.":l.message?.includes("permission")?c="خطأ في الصلاحيات. تأكد من إعدادات RLS.":c=l.message||"خطأ غير معروف في حفظ النموذج",{data:null,error:{message:c,details:l}}}return console.log("✅ تم حفظ النموذج بنجاح:",o),{data:o,error:null}}catch(e){return console.error("💥 خطأ غير متوقع في حفظ النموذج:",e),{data:null,error:{message:"خطأ غير متوقع في حفظ النموذج",details:e}}}},async getAllForms(){try{console.log("🔍 جلب جميع نماذج العودة الطوعية...");const{data:{user:s},error:e}=await H.auth.getUser();if(e)return console.error("❌ خطأ في المصادقة:",e),{data:null,error:{message:"خطأ في المصادقة",details:e}};if(!s)return console.error("❌ المستخدم غير مسجل الدخول"),{data:null,error:{message:"يجب تسجيل الدخول"}};console.log("✅ المستخدم مسجل الدخول:",s.id);const{data:t,error:r}=await H.from("user_profiles").select("role").eq("id",s.id).single();if(r)return console.error("❌ خطأ في جلب بيانات المستخدم:",r),{data:null,error:{message:"خطأ في جلب بيانات المستخدم",details:r}};console.log("👤 دور المستخدم:",t?.role),t?.role!=="admin"&&console.log("⚠️ المستخدم ليس admin، لكن سيتم جلب النماذج على أي حال");const{data:i,error:n}=await H.from("voluntary_return_forms").select("*").order("created_at",{ascending:!1});return n?(console.error("❌ خطأ في جلب النماذج:",n),{data:null,error:n}):(console.log("✅ تم جلب النماذج بنجاح:",i?.length||0),console.log("📋 بيانات النماذج:",i),{data:i,error:null})}catch(s){return console.error("💥 خطأ غير متوقع في جلب النماذج:",s),{data:null,error:{message:"خطأ غير متوقع في جلب النماذج",details:s}}}},async getUserForms(){try{console.log("🔍 جلب نماذج المستخدم الحالي...");const{data:{user:s},error:e}=await H.auth.getUser();if(e)return console.error("❌ خطأ في المصادقة:",e),{data:null,error:{message:"خطأ في المصادقة",details:e}};if(!s)return console.error("❌ المستخدم غير مسجل الدخول"),{data:null,error:{message:"يجب تسجيل الدخول"}};console.log("✅ المستخدم مسجل الدخول:",s.id);const{data:t,error:r}=await H.from("user_profiles").select("role").eq("id",s.id).single();if(r)return console.error("❌ خطأ في جلب بيانات المستخدم:",r),{data:null,error:{message:"خطأ في جلب بيانات المستخدم",details:r}};console.log("👤 دور المستخدم:",t?.role),t?.role||console.log("⚠️ المستخدم ليس لديه دور محدد، لكن سيتم جلب النماذج على أي حال");const{data:i,error:n}=await H.from("voluntary_return_forms").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});return n?(console.error("❌ خطأ في جلب نماذج المستخدم:",n),{data:null,error:n}):(console.log("✅ تم جلب نماذج المستخدم بنجاح:",i?.length||0),{data:i,error:null})}catch(s){return console.error("💥 خطأ غير متوقع في جلب نماذج المستخدم:",s),{data:null,error:{message:"خطأ غير متوقع في جلب نماذج المستخدم",details:s}}}},async getFormById(s){try{console.log("🔍 جلب النموذج بالمعرف:",s);const{data:{user:e},error:t}=await H.auth.getUser();if(t)return console.error("❌ خطأ في المصادقة:",t),{data:null,error:{message:"خطأ في المصادقة",details:t}};if(!e)return console.error("❌ المستخدم غير مسجل الدخول"),{data:null,error:{message:"يجب تسجيل الدخول"}};console.log("✅ المستخدم مسجل الدخول:",e.id);const{data:r,error:i}=await H.from("user_profiles").select("role").eq("id",e.id).single();if(i)return console.error("❌ خطأ في جلب بيانات المستخدم:",i),{data:null,error:{message:"خطأ في جلب بيانات المستخدم",details:i}};if(console.log("👤 دور المستخدم:",r?.role),!r?.role)return console.error("❌ المستخدم ليس لديه دور محدد"),{data:null,error:{message:"المستخدم ليس لديه دور محدد"}};const{data:n,error:o}=await H.from("voluntary_return_forms").select("*").eq("id",s).single();return o?(console.error("❌ خطأ في جلب النموذج:",o),{data:null,error:o}):(console.log("✅ تم جلب النموذج بنجاح"),{data:n,error:null})}catch(e){return console.error("💥 خطأ غير متوقع في جلب النموذج:",e),{data:null,error:{message:"خطأ غير متوقع في جلب النموذج",details:e}}}},async updateForm(s,e){try{console.log("🔍 تحديث النموذج بالمعرف:",s);const{data:{user:t},error:r}=await H.auth.getUser();if(r)return console.error("❌ خطأ في المصادقة:",r),{data:null,error:{message:"خطأ في المصادقة",details:r}};if(!t)return console.error("❌ المستخدم غير مسجل الدخول"),{data:null,error:{message:"يجب تسجيل الدخول"}};console.log("✅ المستخدم مسجل الدخول:",t.id);const{data:i,error:n}=await H.from("user_profiles").select("role").eq("id",t.id).single();if(n)return console.error("❌ خطأ في جلب بيانات المستخدم:",n),{data:null,error:{message:"خطأ في جلب بيانات المستخدم",details:n}};console.log("👤 دور المستخدم:",i?.role),i?.role||console.log("⚠️ المستخدم ليس لديه دور محدد، لكن سيتم تحديث النموذج على أي حال");const{data:o,error:l}=await H.from("voluntary_return_forms").select("user_id").eq("id",s).single();if(l)return console.error("❌ خطأ في جلب النموذج:",l),{data:null,error:l};if(i?.role!=="admin"&&o?.user_id!==t.id)return console.error("❌ المستخدم لا يمكنه تحديث هذا النموذج"),{data:null,error:{message:"لا يمكنك تحديث هذا النموذج"}};const{data:c,error:d}=await H.from("voluntary_return_forms").update({full_name_tr:e.full_name_tr,full_name_ar:e.full_name_ar,kimlik_no:e.kimlik_no,sinir_kapisi:e.sinir_kapisi,gsm:e.gsm||null,custom_date:e.custom_date||null,refakat_entries:e.refakat_entries}).eq("id",s).select().single();return d?(console.error("❌ خطأ في تحديث النموذج:",d),{data:null,error:d}):(console.log("✅ تم تحديث النموذج بنجاح"),{data:c,error:null})}catch(t){return console.error("💥 خطأ غير متوقع في تحديث النموذج:",t),{data:null,error:{message:"خطأ غير متوقع في تحديث النموذج",details:t}}}},async deleteForm(s){try{console.log("🔍 حذف النموذج بالمعرف:",s);const{data:{user:e},error:t}=await H.auth.getUser();if(t)return console.error("❌ خطأ في المصادقة:",t),{error:{message:"خطأ في المصادقة",details:t}};if(!e)return console.error("❌ المستخدم غير مسجل الدخول"),{error:{message:"يجب تسجيل الدخول"}};console.log("✅ المستخدم مسجل الدخول:",e.id);const{data:r,error:i}=await H.from("user_profiles").select("role").eq("id",e.id).single();if(i)return console.error("❌ خطأ في جلب بيانات المستخدم:",i),{error:{message:"خطأ في جلب بيانات المستخدم",details:i}};if(console.log("👤 دور المستخدم:",r?.role),!r?.role)return console.error("❌ المستخدم ليس لديه دور محدد"),{error:{message:"المستخدم ليس لديه دور محدد"}};const{data:n,error:o}=await H.from("voluntary_return_forms").select("user_id").eq("id",s).single();if(o)return console.error("❌ خطأ في جلب النموذج:",o),{error:o};if(r?.role!=="admin"&&n?.user_id!==e.id)return console.error("❌ المستخدم لا يمكنه حذف هذا النموذج"),{error:{message:"لا يمكنك حذف هذا النموذج"}};const{error:l}=await H.from("voluntary_return_forms").delete().eq("id",s);return l?(console.error("❌ خطأ في حذف النموذج:",l),{error:l}):(console.log("✅ تم حذف النموذج بنجاح"),{error:null})}catch(e){return console.error("💥 خطأ غير متوقع في حذف النموذج:",e),{error:{message:"خطأ غير متوقع في حذف النموذج",details:e}}}}},Qu=s=>{const e=new Date(s);if(isNaN(e.getTime()))return"Invalid Date";const t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear();return`${t}.${r}.${i}`},xe=s=>Qu(s),eh=({form:s,onBack:e,onUpdate:t,isDarkMode:r})=>{const{t:i,language:n}=$e(),[o,l]=k.useState({fullNameTR:s.full_name_tr,fullNameAR:s.full_name_ar,kimlikNo:s.kimlik_no,sinirKapisi:s.sinir_kapisi,gsm:s.gsm||"",changeDate:s.custom_date?"yes":"no",customDate:s.custom_date||""}),[c,d]=k.useState(s.refakat_entries||[{id:"",name:""}]),[u,h]=k.useState(""),[m,f]=k.useState(!!s.custom_date),[b,x]=k.useState(!1),[g,p]=k.useState(""),[j,v]=k.useState(!1),N=()=>{d([...c,{id:"",name:""}])},y=R=>{c.length>1&&d(c.filter((L,D)=>D!==R))},S=(R,L,D)=>{const A=[...c];A[R][L]=D,d(A)},_=async()=>{const{fullNameTR:R,fullNameAR:L,kimlikNo:D,sinirKapisi:A,gsm:O,changeDate:$,customDate:E}=o;if(!R||!L||!D||!A){alert(n==="ar"?"الرجاء تعبئة جميع الحقول المطلوبة":"Lütfen tüm zorunlu alanları doldurunuz");return}x(!0),p("");try{const G=c.filter(W=>W.id&&W.name),z={full_name_tr:R,full_name_ar:L,kimlik_no:D,sinir_kapisi:A,gsm:O||void 0,custom_date:$==="yes"&&E?E:void 0,refakat_entries:G},{data:K,error:B}=await ar.updateForm(s.id,z);if(B)throw B;p(n==="ar"?"تم تحديث النموذج بنجاح!":"Form başarıyla güncellendi!"),setTimeout(()=>p(""),3e3),K&&t(K)}catch(G){console.error("Error updating form:",G),p(n==="ar"?"خطأ في تحديث النموذج":"Form güncellenirken hata oluştu"),setTimeout(()=>p(""),3e3)}finally{x(!1)}},C=()=>{const{fullNameTR:R,fullNameAR:L,kimlikNo:D,sinirKapisi:A,gsm:O,changeDate:$,customDate:E}=o;if(!R||!L||!D||!A){alert(n==="ar"?"الرجاء تعبئة جميع الحقول المطلوبة":"Lütfen tüm zorunlu alanları doldurunuz");return}let G,z;if($==="yes"&&E){const se=new Date(E);G=xe(se),z=xe(se)}else{const se=new Date;G=xe(se),z=xe(se)}let K="";const B=c.filter(se=>se.id&&se.name);B.length>0&&(K=`
        <br><br>REFAKATİMDEKİLER
        <table class="refakat-table">
          <thead>
            <tr>
              <th>Kimlik No</th>
              <th>İsim</th>
            </tr>
          </thead>
          <tbody>
            ${B.map(q=>`<tr><td style="white-space: nowrap;">${q.id}</td><td>${q.name}</td></tr>`).join("")}
          </tbody>
        </table>
      `);const W=O?`<br><br>GSM : ${O}`:"",X=`
      <div id="turkishPage" style="text-align: center; margin-top: 60px;">
        <strong>İL GÖÇ İDARESİ MÜDÜRLÜĞÜ'NE</strong><br />MERSİN
        <div style="margin-top: 40px; text-align: left;">
          <div style="text-align: right; font-family: Arial, sans-serif;" dir="ltr">${G}</div><br />
          Ben Suriye uyrukluyum. Adım ${R} . ${D} no'lu yabancı kimlik sahibiyim . ${A.toUpperCase()} Sınır Kapısından Geçici koruma haklarımdan feraget ederek Suriye'ye gerekli gönüllü dönüş işlemin yapılması ve geçici koruma kimlik kaydımın iptal edilmesi için gereğinin yapılmasını saygımla arz ederim.
          ${K}
          ${W}
          <div style="text-align: right; margin-top: 60px;">
            <strong>AD SOYAD</strong><br />${R}
          </div>
        </div>
      </div>
    `,Y={yayladağı:"كسب",cilvegözü:"باب الهوى",öncüpınar:"باب السلامة","istanbul havalimanı":"مطار اسطنبول",çobanbey:"الراعي",zeytindalı:"غصن الزيتون",karakamış:"جرابلس"}[A]||A,ee=`
      <div id="arabicPage" dir="rtl" style="text-align: center; margin-top: 60px;">
        <strong>إلى مديرية إدارة الهجرة</strong><br />مرسين
        <div style="margin-top: 40px; text-align: right;">
          التاريخ: ${z}<br /><br />
          أنا الموقّع أدناه ${L}، أحمل بطاقة الحماية المؤقتة رقم ${D}. أطلب منكم التفضل بتسليمي الأوراق اللازمة لتنفيذ إجراءات العودة الطوعية إلى سوريا عبر معبر ${Y} الحدودي.<br />
          وتفضلوا بقبول فائق الاحترام والتقدير.<br /><br />
          المقدّم/ة:<br />${L}
        </div>
      </div>
    `;h(X+ee)},T=async()=>{if(!u){alert(n==="ar"?"الرجاء إنشاء الطلب أولاً":"Lütfen önce formu oluşturun");return}await _(),M(u)},I=async()=>{const R=document.getElementById("output")?.querySelector("#turkishPage");if(!R){alert(n==="ar"?"الرجاء إنشاء الطلب أولاً":"Lütfen önce formu oluşturun");return}await _(),M(R.outerHTML)},F=async()=>{const R=document.getElementById("output")?.querySelector("#arabicPage");if(!R){alert(n==="ar"?"الرجاء إنشاء الطلب أولاً":"Lütfen önce formu oluşturun");return}await _(),M(R.outerHTML)},M=R=>{const L=window.open("","_blank","width=900,height=700");L&&(L.document.write(`
        <html>
          <head>
            <title>Yazdır / طباعة</title>
            <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
            <style>
              body {
                font-family: 'Alexandria', Arial, sans-serif;
                font-size: 16px;
                line-height: 1.6;
                color: black;
                background: white;
                margin: 20px;
              }
              [dir=rtl] {
                direction: rtl;
                font-family: 'Alexandria', Arial, sans-serif;
                font-size: 14px;
              }
              #turkishPage, #arabicPage {
                page-break-after: always;
                margin-bottom: 40px;
                text-align: center;
              }
              table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 10px;
              }
              th, td {
                border: 1px solid #555;
                padding: 6px 8px;
                text-align: left;
                background-color: white;
              }
              tr:nth-child(even) td {
                background-color: #f0f0f0;
              }
              th {
                background-color: #999999;
              }
            </style>
          </head>
          <body>
            <div id="printArea">${R}</div>
          </body>
        </html>
      `),L.document.close(),L.focus(),setTimeout(()=>{L.print()},500))};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 dark:from-jet-900 dark:via-indigo-900 dark:to-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria relative",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-lg hover:bg-white/20 transition-colors",children:[a.jsx(er,{className:"w-5 h-5"}),n==="ar"?"العودة":"Geri"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>v(!j),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${j?"bg-caribbean-600 text-white":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20"}`,children:[a.jsx(ts,{className:"w-5 h-5"}),n==="ar"?"معاينة":"Önizleme"]}),a.jsxs("button",{onClick:_,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[a.jsx(ss,{className:"w-5 h-5"}),b?n==="ar"?"جاري الحفظ...":"Kaydediliyor...":n==="ar"?"حفظ التغييرات":"Değişiklikleri Kaydet"]})]})]}),g&&a.jsx("div",{className:`mb-6 p-3 rounded-lg text-center font-medium ${g.includes("نجاح")||g.includes("başarıyla")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:g}),j?a.jsxs("div",{className:"bg-white/95 dark:bg-jet-800/95 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/20 dark:border-jet-600/50",children:[a.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-jet-800 dark:text-platinum-200",children:n==="ar"?"معاينة النموذج":"Form Önizlemesi"}),a.jsxs("div",{className:"flex flex-wrap gap-4 justify-center mb-6",children:[a.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(ne,{className:"w-5 h-5"}),n==="ar"?"إنشاء النماذج":"Formları Oluştur"]}),a.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(Ns,{className:"w-5 h-5"}),n==="ar"?"طباعة التركية":"Türkçe Yazdır"]}),a.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-teal-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(Ns,{className:"w-5 h-5"}),n==="ar"?"طباعة العربية":"Arapça Yazdır"]}),a.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(rs,{className:"w-5 h-5"}),n==="ar"?"طباعة الكل":"Tümünü Yazdır"]})]}),u&&a.jsxs("div",{className:"mt-8 bg-white dark:bg-jet-800 p-8 rounded-2xl shadow-2xl border border-white/20 dark:border-jet-600/50",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-platinum-200 mb-4",children:n==="ar"?"النماذج المُنشأة":"Oluşturulan Formlar"}),a.jsx("div",{id:"output",className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:u}})]})]}):a.jsxs("div",{className:"bg-white/95 dark:bg-jet-800/95 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/20 dark:border-jet-600/50",children:[a.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-jet-800 dark:text-platinum-200",children:n==="ar"?"تعديل النموذج":"Formu Düzenle"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل (بالتركية)"}),a.jsx("input",{type:"text",value:o.fullNameTR,onChange:R=>l({...o,fullNameTR:R.target.value}),placeholder:"Örn: Muhammed Muhammed",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل (بالعربية)"}),a.jsx("input",{type:"text",value:o.fullNameAR,onChange:R=>l({...o,fullNameAR:R.target.value}),placeholder:"مثال: محمد المحمد",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رقم الحماية المؤقتة"}),a.jsx("input",{type:"text",value:o.kimlikNo,onChange:R=>l({...o,kimlikNo:R.target.value}),placeholder:"Örn: 99605285486",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"اسم المعبر"}),a.jsxs("select",{value:o.sinirKapisi,onChange:R=>l({...o,sinirKapisi:R.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0,children:[a.jsx("option",{value:"",children:"اختر المعبر"}),a.jsx("option",{value:"yayladağı",children:"YAYLADAĞI / كسب"}),a.jsx("option",{value:"cilvegözü",children:"CİLVEGÖZÜ / باب الهوى"}),a.jsx("option",{value:"öncüpınar",children:"ÖNCÜPINAR / باب السلامة"}),a.jsx("option",{value:"istanbul havalimanı",children:"İSTANBUL HAVALİMANI / مطار اسطنبول"}),a.jsx("option",{value:"çobanbey",children:"ÇOBANBEY / الراعي"}),a.jsx("option",{value:"zeytindalı",children:"ZEYTİNDALI / غصن الزيتون"}),a.jsx("option",{value:"karakamış",children:"KARAKAMIŞ / جرابلس"})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رقم الهاتف"}),a.jsx("input",{type:"text",value:o.gsm,onChange:R=>l({...o,gsm:R.target.value}),placeholder:"Örn: 0541 717 57 49",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"هل تريد تغيير تاريخ الطلب؟"}),a.jsxs("select",{value:o.changeDate,onChange:R=>{l({...o,changeDate:R.target.value}),f(R.target.value==="yes")},className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"no",children:"لا"}),a.jsx("option",{value:"yes",children:"نعم"})]})]})]}),m&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"اختر التاريخ الجديد"}),a.jsx("input",{type:"date",value:o.customDate,onChange:R=>l({...o,customDate:R.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-4",children:"المرافقين"}),c.map((R,L)=>a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-jet-600 dark:text-platinum-400 min-w-[80px]",children:["مرافق ",L+1]}),a.jsx("input",{type:"text",value:R.id,onChange:D=>S(L,"id",D.target.value),placeholder:"رقم الهوية",className:"flex-1 px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"}),a.jsx("input",{type:"text",value:R.name,onChange:D=>S(L,"name",D.target.value),placeholder:"الاسم الكامل",className:"flex-1 px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"}),c.length>1&&a.jsx("button",{onClick:()=>y(L),className:"p-2 text-red-500 hover:text-red-700 transition-colors duration-300",children:a.jsx(_e,{className:"w-5 h-5"})})]},L)),a.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors duration-300",children:[a.jsx(Ct,{className:"w-4 h-4"}),"إضافة مرافق جديد"]})]})]})]})})},th=s=>{let e=s.replace(/\D/g,"");for(e.startsWith("0")&&(e="90"+e.substring(1)),e.startsWith("90")||(e="90"+e);e.length<12;)e="90"+e;return e.substring(0,12)},ul=({isDarkMode:s})=>{const{t:e,language:t}=$e(),[r,i]=k.useState([]),[n,o]=k.useState(!0),[l,c]=k.useState(""),[d,u]=k.useState(null),[h,m]=k.useState(null),[f,b]=k.useState("all");k.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0),c(""),console.log("🔄 بدء تحميل النماذج...");const{data:_,error:C}=await ar.getAllForms();if(C)throw console.error("❌ خطأ في تحميل النماذج:",C),C;console.log("✅ تم تحميل النماذج بنجاح:",_?.length||0),console.log("📋 بيانات النماذج:",_),i(_||[])}catch(_){console.error("💥 خطأ في تحميل النماذج:",_),c(t==="ar"?"خطأ في تحميل النماذج":"Formlar yüklenirken hata oluştu")}finally{o(!1)}},g=async _=>{if(confirm(t==="ar"?"هل أنت متأكد من حذف هذا النموذج؟":"Bu formu silmek istediğinizden emin misiniz?"))try{const{error:C}=await ar.deleteForm(_);if(C)throw C;i(r.filter(T=>T.id!==_))}catch(C){console.error("Error deleting form:",C),alert(t==="ar"?"خطأ في حذف النموذج":"Form silinirken hata oluştu")}},p=_=>{i(r.map(C=>C.id===_.id?_:C)),m(null)},j=_=>xe(_),N=(()=>{if(f==="all")return r;const _=new Date,C=new Date(_.getFullYear(),_.getMonth(),_.getDate()),T=new Date(C.getTime()-7*24*60*60*1e3),I=new Date(C.getTime()-30*24*60*60*1e3);return r.filter(F=>{const M=new Date(F.created_at);switch(f){case"today":return M>=C;case"week":return M>=T;case"month":return M>=I;default:return!0}})})(),y=_=>{const C=window.open("","_blank","width=900,height=700");C&&(C.document.write(`
        <html>
          <head>
            <title>Yazdır / طباعة</title>
            <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
            <style>
              body {
                font-family: 'Alexandria', Arial, sans-serif;
                font-size: 16px;
                line-height: 1.6;
                color: black;
                background: white;
                margin: 20px;
              }
              [dir=rtl] {
                direction: rtl;
                font-family: 'Alexandria', Arial, sans-serif;
                font-size: 14px;
              }
              #turkishPage, #arabicPage {
                page-break-after: always;
                margin-bottom: 40px;
                text-align: center;
              }
              table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 10px;
              }
              th, td {
                border: 1px solid #555;
                padding: 6px 8px;
                text-align: left;
                background-color: white;
              }
              tr:nth-child(even) td {
                background-color: #f0f0f0;
              }
              th {
                background-color: #999999;
              }
            </style>
          </head>
          <body>
            <div id="printArea">${_}</div>
          </body>
        </html>
      `),C.document.close(),C.focus(),setTimeout(()=>{C.print()},500))},S=_=>{const C=_.custom_date||_.request_date,T=xe(C),I=xe(C);let F="";_.refakat_entries&&_.refakat_entries.length>0&&(F=`
        <br><br>REFAKATİMDEKİLER
        <table class="refakat-table">
          <thead>
            <tr>
              <th>Kimlik No</th>
              <th>İsim</th>
            </tr>
          </thead>
          <tbody>
            ${_.refakat_entries.map($=>`<tr><td style="white-space: nowrap;">${$.id}</td><td>${$.name}</td></tr>`).join("")}
          </tbody>
        </table>
      `);const M=_.gsm?`<br><br>GSM : ${_.gsm}`:"",R=`
      <div id="turkishPage" style="text-align: center; margin-top: 60px;">
        <strong>İL GÖÇ İDARESİ MÜDÜRLÜĞÜ'NE</strong><br />MERSİN
        <div style="margin-top: 40px; text-align: left;">
          <div style="text-align: right; font-family: Arial, sans-serif;" dir="ltr">${T}</div><br />
          Ben Suriye uyrukluyum. Adım ${_.full_name_tr} . ${_.kimlik_no} no'lu yabancı kimlik sahibiyim . ${_.sinir_kapisi.toUpperCase()} Sınır Kapısından Geçici koruma haklarımdan feraget ederek Suriye'ye gerekli gönüllü dönüş işlemin yapılması ve geçici koruma kimlik kaydımın iptal edilmesi için gereğinin yapılmasını saygımla arz ederim.
          ${F}
          ${M}
          <div style="text-align: right; margin-top: 60px;">
            <strong>AD SOYAD</strong><br />${_.full_name_tr}
          </div>
        </div>
      </div>
    `,D={yayladağı:"كسب",cilvegözü:"باب الهوى",öncüpınar:"باب السلامة","istanbul havalimanı":"مطار اسطنبول",çobanbey:"الراعي",zeytindalı:"غصن الزيتون",karakamış:"جرابلس"}[_.sinir_kapisi]||_.sinir_kapisi,A=`
      <div id="arabicPage" dir="rtl" style="text-align: center; margin-top: 60px;">
        <strong>إلى مديرية إدارة الهجرة</strong><br />مرسين
        <div style="margin-top: 40px; text-align: right;">
          التاريخ: ${I}<br /><br />
          أنا الموقّع أدناه ${_.full_name_ar}، أحمل بطاقة الحماية المؤقتة رقم ${_.kimlik_no}. أطلب منكم التفضل بتسليمي الأوراق اللازمة لتنفيذ إجراءات العودة الطوعية إلى سوريا عبر معبر ${D} الحدودي.<br />
          وتفضلوا بقبول فائق الاحترام والتقدير.<br /><br />
          المقدّم/ة:<br />${_.full_name_ar}
        </div>
      </div>
    `;return R+A};return n?a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-caribbean-600"}),a.jsx("span",{className:"mr-3 text-jet-600 dark:text-platinum-400",children:t==="ar"?"جاري التحميل...":"Yükleniyor..."})]}):l?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:l}),a.jsx("button",{onClick:x,className:"px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors",children:t==="ar"?"إعادة المحاولة":"Tekrar Dene"})]}):h?a.jsx(eh,{form:h,onBack:()=>m(null),onUpdate:p,isDarkMode:s}):a.jsxs("div",{className:"p-3 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 md:mb-6 space-y-3 md:space-y-0",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-jet-800 dark:text-platinum-200 text-center md:text-right",children:t==="ar"?"نماذج العودة الطوعية":"Gönüllü Dönüş Formları"}),a.jsxs("div",{className:"flex items-center justify-center md:justify-end gap-3 md:gap-4",children:[a.jsxs("span",{className:"text-sm text-jet-600 dark:text-platinum-400",children:[N.length," ",t==="ar"?"نموذج":"form"]}),a.jsxs("button",{onClick:x,className:"px-3 py-1 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors text-sm flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),t==="ar"?"تحديث":"Yenile"]})]})]}),a.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 mb-4",children:[a.jsx("button",{onClick:()=>b("all"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${f==="all"?"bg-caribbean-600 text-white":"bg-white dark:bg-jet-700 text-jet-600 dark:text-platinum-400 border border-platinum-200 dark:border-jet-600 hover:bg-platinum-50 dark:hover:bg-jet-600"}`,children:t==="ar"?"كل الوقت":"Tüm Zaman"}),a.jsx("button",{onClick:()=>b("today"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${f==="today"?"bg-caribbean-600 text-white":"bg-white dark:bg-jet-700 text-jet-600 dark:text-platinum-400 border border-platinum-200 dark:border-jet-600 hover:bg-platinum-50 dark:hover:bg-jet-600"}`,children:t==="ar"?"آخر يوم":"Bugün"}),a.jsx("button",{onClick:()=>b("week"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${f==="week"?"bg-caribbean-600 text-white":"bg-white dark:bg-jet-700 text-jet-600 dark:text-platinum-400 border border-platinum-200 dark:border-jet-600 hover:bg-platinum-50 dark:hover:bg-jet-600"}`,children:t==="ar"?"أسبوع":"Hafta"}),a.jsx("button",{onClick:()=>b("month"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${f==="month"?"bg-caribbean-600 text-white":"bg-white dark:bg-jet-700 text-jet-600 dark:text-platinum-400 border border-platinum-200 dark:border-jet-600 hover:bg-platinum-50 dark:hover:bg-jet-600"}`,children:t==="ar"?"شهر":"Ay"})]}),N.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ne,{className:"w-16 h-16 text-jet-400 dark:text-jet-600 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-4",children:f==="all"?t==="ar"?"لا توجد نماذج محفوظة":"Henüz kaydedilmiş form yok":t==="ar"?"لا توجد نماذج في الفترة المحددة":"Seçilen dönemde form bulunamadı"}),f!=="all"&&a.jsx("button",{onClick:()=>b("all"),className:"px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors flex items-center mx-auto mb-3",children:t==="ar"?"عرض جميع النماذج":"Tüm Formları Göster"}),a.jsxs("button",{onClick:x,className:"px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors flex items-center mx-auto",children:[a.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),t==="ar"?"إعادة تحميل":"Yenile"]})]}):a.jsx("div",{className:"space-y-3 md:space-y-4",children:N.map(_=>a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-lg shadow-md border border-platinum-200 dark:border-jet-600 p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between mb-4 space-y-3 md:space-y-0",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mb-2",children:[a.jsx("h3",{className:"text-base md:text-lg font-semibold text-jet-800 dark:text-platinum-200",children:_.full_name_tr}),a.jsx("span",{className:"text-sm text-jet-600 dark:text-platinum-400",children:_.full_name_ar})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ze,{className:"w-4 h-4 text-caribbean-600"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:_.kimlik_no})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ne,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:_.sinir_kapisi})]}),_.gsm&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 font-mono text-left font-bold",dir:"ltr",children:_.gsm}),a.jsx("a",{href:`https://wa.me/${th(_.gsm)}`,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors cursor-pointer",title:t==="ar"?"فتح الواتساب":"WhatsApp'ta Aç",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(it,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:j(_.created_at)})]})]})]}),a.jsxs("div",{className:"flex items-center justify-center md:justify-end gap-1 md:gap-2",children:[a.jsx("button",{onClick:()=>m(_),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:t==="ar"?"تعديل النموذج":"Formu Düzenle",children:a.jsx(tr,{className:"w-4 h-4 md:w-5 md:h-5"})}),a.jsx("button",{onClick:()=>u(d?.id===_.id?null:_),className:"p-2 text-caribbean-600 hover:text-caribbean-700 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 rounded-lg transition-colors",title:t==="ar"?"عرض التفاصيل":"Detayları Göster",children:a.jsx(ts,{className:"w-4 h-4 md:w-5 md:h-5"})}),a.jsx("button",{onClick:()=>y(S(_)),className:"p-2 text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:t==="ar"?"طباعة":"Yazdır",children:a.jsx(Ns,{className:"w-4 h-4 md:w-5 md:h-5"})}),a.jsx("button",{onClick:()=>g(_.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:t==="ar"?"حذف":"Sil",children:a.jsx(Tt,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]}),d?.id===_.id&&a.jsxs("div",{className:"mt-4 p-3 md:p-4 bg-platinum-50 dark:bg-jet-700 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-jet-800 dark:text-platinum-200 mb-2 text-sm md:text-base",children:t==="ar"?"المرافقين:":"Refakatçiler:"}),_.refakat_entries&&_.refakat_entries.length>0?a.jsx("div",{className:"space-y-2",children:_.refakat_entries.map((C,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-sm",children:[a.jsxs("span",{className:"text-jet-600 dark:text-platinum-400",children:[t==="ar"?"مرافق":"Refakatçi"," ",T+1,":"]}),a.jsx("span",{className:"font-medium",children:C.id}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 hidden sm:inline",children:"-"}),a.jsx("span",{className:"font-medium",children:C.name})]},T))}):a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 text-sm",children:t==="ar"?"لا يوجد مرافقين":"Refakatçi yok"})]})]},_.id))})]})},sh={yayladağı:"كسب",cilvegözü:"باب الهوى",öncüpınar:"باب السلامة","istanbul havalimanı":"مطار اسطنبول",çobanbey:"الراعي",zeytindalı:"غصن الزيتون",karakamış:"جرابلس"},hl=({isDarkMode:s})=>{const{t:e,language:t}=$e(),{user:r}=Le(),[i,n]=k.useState(!1),[o,l]=k.useState(""),[c,d]=k.useState(!1),[u,h]=k.useState({fullNameTR:"",fullNameAR:"",kimlikNo:"",sinirKapisi:"",gsm:"",changeDate:"no",customDate:""}),[m,f]=k.useState([{id:"",name:""}]),[b,x]=k.useState(""),[g,p]=k.useState(!1),j=()=>{f([...m,{id:"",name:""}])},v=M=>{m.length>1&&f(m.filter((R,L)=>L!==M))},N=(M,R,L)=>{const D=[...m];D[M][R]=L,f(D)},y=async()=>{d(!0),l("");try{console.log("🔍 اختبار الاتصال بقاعدة البيانات...");const{data:{user:M},error:R}=await H.auth.getUser();if(R)throw new Error("خطأ في المصادقة: "+R.message);if(!M)throw new Error("المستخدم غير مسجل الدخول");console.log("✅ المستخدم مسجل الدخول:",M.id);const{data:L,error:D}=await H.from("voluntary_return_forms").select("id").limit(1);if(D)throw D.code==="PGRST205"?new Error("الجدول voluntary_return_forms غير موجود. يرجى إنشاؤه أولاً."):D.message?.includes("permission")||D.message?.includes("denied")?new Error("خطأ في الصلاحيات. تأكد من إعدادات RLS والسياسات."):new Error("خطأ في الاتصال بقاعدة البيانات: "+D.message);console.log("✅ الاتصال بقاعدة البيانات يعمل"),l(t==="ar"?"✅ الاتصال بقاعدة البيانات يعمل بشكل صحيح":"✅ Database connection is working")}catch(M){console.error("❌ خطأ في اختبار الاتصال:",M),l(t==="ar"?"❌ خطأ في الاتصال: "+M.message:"❌ Connection error: "+M.message)}finally{d(!1),setTimeout(()=>l(""),5e3)}},S=async()=>{if(console.log("🔍 بدء عملية حفظ النموذج..."),!r){const E=t==="ar"?"يجب تسجيل الدخول لحفظ النموذج":"Lütfen formu kaydetmek için giriş yapın";console.error("❌",E),alert(E);return}const{fullNameTR:M,fullNameAR:R,kimlikNo:L,sinirKapisi:D,gsm:A,changeDate:O,customDate:$}=u;if(console.log("📊 بيانات النموذج:",u),!M||!R||!L||!D){const E=t==="ar"?"الرجاء تعبئة جميع الحقول المطلوبة":"Lütfen tüm zorunlu alanları doldurunuz";console.error("❌",E),alert(E);return}n(!0),l("");try{const E=m.filter(W=>W.id&&W.name);console.log("👥 المرافقون الصالحون:",E);const G={full_name_tr:M,full_name_ar:R,kimlik_no:L,sinir_kapisi:D,gsm:A||void 0,custom_date:O==="yes"&&$?$:void 0,refakat_entries:E};console.log("💾 بيانات الحفظ:",G);const{data:z,error:K}=await ar.createForm(G);if(K)throw console.error("❌ خطأ من الخدمة:",K),K;console.log("✅ تم الحفظ بنجاح:",z),l(t==="ar"?"تم حفظ النموذج بنجاح!":"Form başarıyla kaydedildi!"),setTimeout(()=>l(""),5e3),h({fullNameTR:"",fullNameAR:"",kimlikNo:"",sinirKapisi:"",gsm:"",changeDate:"no",customDate:""}),f([{id:"",name:""}])}catch(E){console.error("💥 خطأ في حفظ النموذج:",E);let G=t==="ar"?"خطأ في حفظ النموذج":"Form kaydedilirken hata oluştu";E?.message&&(E.message.includes("المصادقة")?G=t==="ar"?"خطأ في المصادقة - يرجى إعادة تسجيل الدخول":"Authentication error - please login again":E.message.includes("مكتملة")?G=t==="ar"?"جميع الحقول المطلوبة يجب أن تكون مملوءة":"All required fields must be filled":E.message.includes("غير متوقع")?G=t==="ar"?"خطأ غير متوقع - يرجى المحاولة مرة أخرى":"Unexpected error - please try again":G=E.message),l(G),setTimeout(()=>l(""),5e3)}finally{n(!1)}},_=()=>{const{fullNameTR:M,fullNameAR:R,kimlikNo:L,sinirKapisi:D,gsm:A,changeDate:O,customDate:$}=u;if(!M||!R||!L||!D){alert(t==="ar"?"الرجاء تعبئة جميع الحقول المطلوبة":"Lütfen tüm zorunlu alanları doldurunuz");return}let E,G;if(O==="yes"&&$){const Y=new Date($);E=xe(Y),G=xe(Y)}else{const Y=new Date;E=xe(Y),G=xe(Y)}let z="";const K=m.filter(Y=>Y.id&&Y.name);K.length>0&&(z=`
        <br><br>REFAKATİMDEKİLER
        <table class="refakat-table">
          <thead>
            <tr>
              <th>Kimlik No</th>
              <th>İsim</th>
            </tr>
          </thead>
          <tbody>
            ${K.map(ee=>`<tr><td style="white-space: nowrap;">${ee.id}</td><td>${ee.name}</td></tr>`).join("")}
          </tbody>
        </table>
      `);const B=A?`<br><br>GSM : ${A}`:"",W=`
      <div id="turkishPage" style="text-align: center; margin-top: 60px;">
        <strong>İL GÖÇ İDARESİ MÜDÜRLÜĞÜ'NE</strong><br />MERSİN
        <div style="margin-top: 40px; text-align: left;">
          <div style="text-align: right; font-family: Arial, sans-serif;" dir="ltr">${E}</div><br />
          Ben Suriye uyrukluyum. Adım ${M} . ${L} no'lu yabancı kimlik sahibiyim . ${D.toUpperCase()} Sınır Kapısından Geçici koruma haklarımdan feraget ederek Suriye'ye gerekli gönüllü dönüş işlemin yapılması ve geçici koruma kimlik kaydımın iptal edilmesi için gereğinin yapılmasını saygımla arz ederim.
          ${z}
          ${B}
          <div style="text-align: right; margin-top: 60px;">
            <strong>AD SOYAD</strong><br />${M}
          </div>
        </div>
      </div>
    `,X=sh[D]||D,V=`
      <div id="arabicPage" dir="rtl" style="text-align: center; margin-top: 60px;">
        <strong>إلى مديرية إدارة الهجرة</strong><br />مرسين
        <div style="margin-top: 40px; text-align: right;">
          التاريخ: ${G}<br /><br />
          أنا الموقّع أدناه ${R}، أحمل بطاقة الحماية المؤقتة رقم ${L}. أطلب منكم التفضل بتسليمي الأوراق اللازمة لتنفيذ إجراءات العودة الطوعية إلى سوريا عبر معبر ${X} الحدودي.<br />
          وتفضلوا بقبول فائق الاحترام والتقدير.<br /><br />
          المقدّم/ة:<br />${R}
        </div>
      </div>
    `;x(W+V)},C=async()=>{if(!b){alert(t==="ar"?"الرجاء إنشاء الطلب أولاً":"Lütfen önce formu oluşturun");return}r&&await S(),F(b)},T=async()=>{const M=document.getElementById("output")?.querySelector("#turkishPage");if(!M){alert(t==="ar"?"الرجاء إنشاء الطلب أولاً":"Lütfen önce formu oluşturun");return}r&&await S(),F(M.outerHTML)},I=async()=>{const M=document.getElementById("output")?.querySelector("#arabicPage");if(!M){alert(t==="ar"?"الرجاء إنشاء الطلب أولاً":"Lütfen önce formu oluşturun");return}r&&await S(),F(M.outerHTML)},F=M=>{const R=window.open("","_blank","width=900,height=700");R&&(R.document.write(`
        <html>
          <head>
            <title>Yazdır / طباعة</title>
            <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
            <style>
              body {
                font-family: 'Alexandria', Arial, sans-serif;
                font-size: 16px;
                line-height: 1.6;
                color: black;
                background: white;
                margin: 20px;
              }
              [dir=rtl] {
                direction: rtl;
                font-family: 'Alexandria', Arial, sans-serif;
                font-size: 14px;
              }
              #turkishPage, #arabicPage {
                page-break-after: always;
                margin-bottom: 40px;
                text-align: center;
              }
              table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 10px;
              }
              th, td {
                border: 1px solid #555;
                padding: 6px 8px;
                text-align: left;
                background-color: white;
              }
              tr:nth-child(even) td {
                background-color: #f0f0f0;
              }
              th {
                background-color: #999999;
              }
            </style>
          </head>
          <body>
            <div id="printArea">${M}</div>
          </body>
        </html>
      `),R.document.close(),R.focus(),setTimeout(()=>{R.print()},500))};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 dark:from-jet-900 dark:via-indigo-900 dark:to-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria relative",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 dark:from-jet-900 dark:via-indigo-900 dark:to-jet-800",children:a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
                linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)
              `,backgroundSize:"50px 50px",animation:"grid-move 20s linear infinite"}})})}),a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute top-20 left-10 w-16 h-16 bg-white/10 rounded-full shadow-lg animate-float-slow transform rotate-12 flex items-center justify-center",children:a.jsx(ne,{className:"w-8 h-8 text-white/60"})}),a.jsx("div",{className:"absolute top-1/4 right-20 w-32 h-1 bg-gradient-to-r from-transparent via-caribbean-400/50 to-transparent animate-speed-line"}),a.jsx("div",{className:"absolute top-1/3 right-16 w-24 h-1 bg-gradient-to-r from-transparent via-indigo-400/40 to-transparent animate-speed-line-delayed"}),a.jsx("div",{className:"absolute top-2/5 right-24 w-20 h-1 bg-gradient-to-r from-transparent via-caribbean-300/30 to-transparent animate-speed-line-delayed-2"}),a.jsx("div",{className:"absolute bottom-20 left-10 w-16 h-16 bg-caribbean-500/40 rounded-full flex items-center justify-center animate-float-wide-slower shadow-lg",children:a.jsx(ne,{className:"w-8 h-8 text-caribbean-300"})}),a.jsx("div",{className:"absolute top-20 right-10 w-16 h-16 bg-indigo-500/40 rounded-full flex items-center justify-center animate-pulse-wide-slower shadow-lg",children:a.jsx(rt,{className:"w-8 h-8 text-indigo-300"})}),a.jsx("div",{className:"absolute bottom-1/3 left-1/6 w-16 h-16 bg-caribbean-600/40 rounded-full flex items-center justify-center animate-bounce-wide-slower shadow-lg",children:a.jsx(qr,{className:"w-8 h-8 text-caribbean-300"})}),a.jsx("div",{className:"absolute top-1/3 left-1/6 w-16 h-16 bg-purple-500/40 rounded-full flex items-center justify-center animate-float-wide-slower delay-1000 shadow-lg",children:a.jsx(Jt,{className:"w-8 h-8 text-purple-300"})}),a.jsx("div",{className:"absolute bottom-1/3 right-1/6 w-16 h-16 bg-blue-500/40 rounded-full flex items-center justify-center animate-pulse-wide-slow delay-2000 shadow-lg",children:a.jsx(sr,{className:"w-8 h-8 text-blue-300"})}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-green-500/40 rounded-full flex items-center justify-center animate-bounce-wide-slower delay-1500 shadow-lg",children:a.jsx(Ee,{className:"w-8 h-8 text-green-300"})}),a.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-16 h-16 bg-orange-500/40 rounded-full flex items-center justify-center animate-float-wide-slower delay-3000 shadow-lg",children:a.jsx(Io,{className:"w-8 h-8 text-orange-300"})}),a.jsx("div",{className:"absolute top-1/4 right-1/4 w-16 h-16 bg-red-500/40 rounded-full flex items-center justify-center animate-pulse-wide-slower delay-2500 shadow-lg",children:a.jsx(Rt,{className:"w-8 h-8 text-red-300"})}),a.jsx("div",{className:"absolute top-1/6 right-1/6 w-24 h-24 bg-gradient-to-r from-caribbean-400/20 to-indigo-400/20 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute bottom-1/6 left-1/6 w-20 h-20 bg-gradient-to-r from-purple-400/20 to-pink-400/20 rounded-full animate-spin-slow-reverse"}),a.jsx("div",{className:"absolute top-1/2 left-1/6 w-16 h-16 bg-gradient-to-r from-yellow-400/20 to-orange-400/20 rounded-full animate-bounce-slow"}),a.jsx("div",{className:"absolute top-1/2 right-1/6 w-18 h-18 bg-gradient-to-r from-green-400/20 to-teal-400/20 rounded-full animate-pulse-slow delay-500"}),a.jsx("div",{className:"absolute top-1/4 left-1/2 w-32 h-0.5 bg-gradient-to-r from-transparent via-caribbean-400/30 to-transparent animate-pulse-slow"}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-24 h-0.5 bg-gradient-to-r from-transparent via-indigo-400/30 to-transparent animate-pulse-slow delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-20 h-0.5 bg-gradient-to-r from-transparent via-purple-400/30 to-transparent animate-pulse-slow delay-2000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:a.jsxs("div",{className:"relative w-96 h-96",children:[a.jsx("div",{className:"absolute inset-0 border border-white/10 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute top-0 left-1/2 w-3 h-3 bg-caribbean-400 rounded-full transform -translate-x-1/2 -translate-y-1/2 animate-orbit"}),a.jsx("div",{className:"absolute bottom-0 right-1/2 w-2 h-2 bg-indigo-400 rounded-full transform translate-x-1/2 translate-y-1/2 animate-orbit-reverse"})]})})]})]}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"relative inline-block mb-6",children:[a.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-caribbean-400/40 via-indigo-400/40 to-caribbean-400/40 blur-3xl animate-pulse-slow",style:{transform:"scale(1.8)"}}),a.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-white/30 via-caribbean-200/30 to-white/30 blur-2xl animate-pulse-slow delay-1000",style:{transform:"scale(1.4)"}}),a.jsx("img",{src:"/logo-fınal.png",alt:"مجموعة تواصل",className:"relative w-48 h-48 md:w-56 md:h-56 lg:w-64 lg:h-64 xl:w-72 xl:h-72 object-contain animate-float brightness-0 invert",style:{filter:"drop-shadow(0 0 20px rgba(60, 110, 113, 0.5)) drop-shadow(0 0 40px rgba(60, 110, 113, 0.3))"}})]}),a.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-white via-caribbean-200 to-white bg-clip-text text-transparent bg-[length:200%_100%] animate-text-shimmer mb-4 drop-shadow-lg leading-relaxed min-h-[1.5em]",children:"نموذج العودة الطوعية"}),a.jsx("p",{className:"text-xl md:text-2xl text-white/85 drop-shadow-md",children:"Gönüllü Dönüş Formu"})]}),a.jsxs("div",{className:"bg-white/95 dark:bg-jet-800/95 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/20 dark:border-jet-600/50",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل (بالتركية)"}),a.jsx("input",{type:"text",value:u.fullNameTR,onChange:M=>h({...u,fullNameTR:M.target.value}),placeholder:"Örn: Muhammed Muhammed",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل (بالعربية)"}),a.jsx("input",{type:"text",value:u.fullNameAR,onChange:M=>h({...u,fullNameAR:M.target.value}),placeholder:"مثال: محمد المحمد",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رقم الحماية المؤقتة"}),a.jsx("input",{type:"text",value:u.kimlikNo,onChange:M=>h({...u,kimlikNo:M.target.value}),placeholder:"Örn: 99605285486",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"اسم المعبر"}),a.jsxs("select",{value:u.sinirKapisi,onChange:M=>h({...u,sinirKapisi:M.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",required:!0,children:[a.jsx("option",{value:"",children:"اختر المعبر"}),a.jsx("option",{value:"yayladağı",children:"YAYLADAĞI / كسب"}),a.jsx("option",{value:"cilvegözü",children:"CİLVEGÖZÜ / باب الهوى"}),a.jsx("option",{value:"öncüpınar",children:"ÖNCÜPINAR / باب السلامة"}),a.jsx("option",{value:"istanbul havalimanı",children:"İSTANBUL HAVALİMANI / مطار اسطنبول"}),a.jsx("option",{value:"çobanbey",children:"ÇOBANBEY / الراعي"}),a.jsx("option",{value:"zeytindalı",children:"ZEYTİNDALI / غصن الزيتون"}),a.jsx("option",{value:"karakamış",children:"KARAKAMIŞ / جرابلس"})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رقم الهاتف"}),a.jsx("input",{type:"text",value:u.gsm,onChange:M=>h({...u,gsm:M.target.value}),placeholder:"Örn: 0541 717 57 49",className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"هل تريد تغيير تاريخ الطلب؟"}),a.jsxs("select",{value:u.changeDate,onChange:M=>{h({...u,changeDate:M.target.value}),p(M.target.value==="yes")},className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"no",children:"لا"}),a.jsx("option",{value:"yes",children:"نعم"})]})]})]}),g&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"اختر التاريخ الجديد"}),a.jsx("input",{type:"date",value:u.customDate,onChange:M=>h({...u,customDate:M.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-4",children:"المرافقين"}),m.map((M,R)=>a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-jet-600 dark:text-platinum-400 min-w-[80px]",children:["مرافق ",R+1]}),a.jsx("input",{type:"text",value:M.id,onChange:L=>N(R,"id",L.target.value),placeholder:"رقم الهوية",className:"flex-1 px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"}),a.jsx("input",{type:"text",value:M.name,onChange:L=>N(R,"name",L.target.value),placeholder:"الاسم الكامل",className:"flex-1 px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"}),m.length>1&&a.jsx("button",{onClick:()=>v(R),className:"p-2 text-red-500 hover:text-red-700 transition-colors duration-300",children:a.jsx(_e,{className:"w-5 h-5"})})]},R)),a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors duration-300",children:[a.jsx(Ct,{className:"w-4 h-4"}),"إضافة مرافق جديد"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[a.jsxs("button",{onClick:y,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-semibold hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(qr,{className:"w-4 h-4"}),c?t==="ar"?"اختبار الاتصال...":"Testing...":t==="ar"?"اختبار الاتصال":"Test Connection"]}),r&&a.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-700 text-white rounded-lg font-semibold hover:from-green-700 hover:to-emerald-800 transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ss,{className:"w-5 h-5"}),i?t==="ar"?"جاري الحفظ...":"Kaydediliyor...":t==="ar"?"حفظ النموذج":"Formu Kaydet"]}),a.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(ne,{className:"w-5 h-5"}),"إنشاء النماذج"]}),a.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(Ns,{className:"w-5 h-5"}),"طباعة التركية"]}),a.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg font-semibold hover:from-green-600 hover:to-teal-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(Ns,{className:"w-5 h-5"}),"طباعة العربية"]}),a.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:[a.jsx(rs,{className:"w-5 h-5"}),"طباعة الكل"]})]}),o&&a.jsx("div",{className:`mt-4 p-3 rounded-lg text-center font-medium ${o.includes("نجاح")||o.includes("başarıyla")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:o})]}),b&&a.jsxs("div",{className:"mt-8 bg-white/95 dark:bg-jet-800/95 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/20 dark:border-jet-600/50",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-platinum-200 mb-4",children:"النماذج المُنشأة"}),a.jsx("div",{id:"output",className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:b}})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function xr(s){return s+.5|0}const Et=(s,e,t)=>Math.max(Math.min(s,t),e);function Ws(s){return Et(xr(s*2.55),0,255)}function Ot(s){return Et(xr(s*255),0,255)}function pt(s){return Et(xr(s/2.55)/100,0,1)}function fn(s){return Et(xr(s*100),0,100)}const Ke={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},oi=[..."0123456789ABCDEF"],rh=s=>oi[s&15],ah=s=>oi[(s&240)>>4]+oi[s&15],Cr=s=>(s&240)>>4===(s&15),ih=s=>Cr(s.r)&&Cr(s.g)&&Cr(s.b)&&Cr(s.a);function nh(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&Ke[s[1]]*17,g:255&Ke[s[2]]*17,b:255&Ke[s[3]]*17,a:e===5?Ke[s[4]]*17:255}:(e===7||e===9)&&(t={r:Ke[s[1]]<<4|Ke[s[2]],g:Ke[s[3]]<<4|Ke[s[4]],b:Ke[s[5]]<<4|Ke[s[6]],a:e===9?Ke[s[7]]<<4|Ke[s[8]]:255})),t}const oh=(s,e)=>s<255?e(s):"";function lh(s){var e=ih(s)?rh:ah;return s?"#"+e(s.r)+e(s.g)+e(s.b)+oh(s.a,e):void 0}const ch=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ml(s,e,t){const r=e*Math.min(t,1-t),i=(n,o=(n+s/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function dh(s,e,t){const r=(i,n=(i+s/60)%6)=>t-t*e*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function uh(s,e,t){const r=ml(s,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function hh(s,e,t,r,i){return s===i?(e-t)/r+(e<t?6:0):e===i?(t-s)/r+2:(s-e)/r+4}function yi(s){const t=s.r/255,r=s.g/255,i=s.b/255,n=Math.max(t,r,i),o=Math.min(t,r,i),l=(n+o)/2;let c,d,u;return n!==o&&(u=n-o,d=l>.5?u/(2-n-o):u/(n+o),c=hh(t,r,i,u,n),c=c*60+.5),[c|0,d||0,l]}function ki(s,e,t,r){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,r)).map(Ot)}function _i(s,e,t){return ki(ml,s,e,t)}function mh(s,e,t){return ki(uh,s,e,t)}function fh(s,e,t){return ki(dh,s,e,t)}function fl(s){return(s%360+360)%360}function gh(s){const e=ch.exec(s);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Ws(+e[5]):Ot(+e[5]));const i=fl(+e[2]),n=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=mh(i,n,o):e[1]==="hsv"?r=fh(i,n,o):r=_i(i,n,o),{r:r[0],g:r[1],b:r[2],a:t}}function xh(s,e){var t=yi(s);t[0]=fl(t[0]+e),t=_i(t),s.r=t[0],s.g=t[1],s.b=t[2]}function bh(s){if(!s)return;const e=yi(s),t=e[0],r=fn(e[1]),i=fn(e[2]);return s.a<255?`hsla(${t}, ${r}%, ${i}%, ${pt(s.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const gn={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ph(){const s={},e=Object.keys(xn),t=Object.keys(gn);let r,i,n,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],i=0;i<t.length;i++)n=t[i],l=l.replace(n,gn[n]);n=parseInt(xn[o],16),s[l]=[n>>16&255,n>>8&255,n&255]}return s}let Tr;function vh(s){Tr||(Tr=ph(),Tr.transparent=[0,0,0,0]);const e=Tr[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jh=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wh(s){const e=jh.exec(s);let t=255,r,i,n;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?Ws(o):Et(o*255,0,255)}return r=+e[1],i=+e[3],n=+e[5],r=255&(e[2]?Ws(r):Et(r,0,255)),i=255&(e[4]?Ws(i):Et(i,0,255)),n=255&(e[6]?Ws(n):Et(n,0,255)),{r,g:i,b:n,a:t}}}function yh(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${pt(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Aa=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,ps=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function kh(s,e,t){const r=ps(pt(s.r)),i=ps(pt(s.g)),n=ps(pt(s.b));return{r:Ot(Aa(r+t*(ps(pt(e.r))-r))),g:Ot(Aa(i+t*(ps(pt(e.g))-i))),b:Ot(Aa(n+t*(ps(pt(e.b))-n))),a:s.a+t*(e.a-s.a)}}function Er(s,e,t){if(s){let r=yi(s);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=_i(r),s.r=r[0],s.g=r[1],s.b=r[2]}}function gl(s,e){return s&&Object.assign(e||{},s)}function bn(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=Ot(s[3]))):(e=gl(s,{r:0,g:0,b:0,a:1}),e.a=Ot(e.a)),e}function _h(s){return s.charAt(0)==="r"?wh(s):gh(s)}class ir{constructor(e){if(e instanceof ir)return e;const t=typeof e;let r;t==="object"?r=bn(e):t==="string"&&(r=nh(e)||vh(e)||_h(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=gl(this._rgb);return e&&(e.a=pt(e.a)),e}set rgb(e){this._rgb=bn(e)}rgbString(){return this._valid?yh(this._rgb):void 0}hexString(){return this._valid?lh(this._rgb):void 0}hslString(){return this._valid?bh(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let n;const o=t===n?.5:t,l=2*o-1,c=r.a-i.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;n=1-d,r.r=255&d*r.r+n*i.r+.5,r.g=255&d*r.g+n*i.g+.5,r.b=255&d*r.b+n*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=kh(this._rgb,e._rgb,t)),this}clone(){return new ir(this.rgb)}alpha(e){return this._rgb.a=Ot(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=xr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Er(this._rgb,2,e),this}darken(e){return Er(this._rgb,2,-e),this}saturate(e){return Er(this._rgb,1,e),this}desaturate(e){return Er(this._rgb,1,-e),this}rotate(e){return xh(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ht(){}const Nh=(()=>{let s=0;return()=>s++})();function de(s){return s==null}function ke(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function le(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function Je(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function nt(s,e){return Je(s)?s:e}function re(s,e){return typeof s>"u"?e:s}const Sh=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/e,xl=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function ge(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function ue(s,e,t,r){let i,n,o;if(ke(s))for(n=s.length,i=0;i<n;i++)e.call(t,s[i],i);else if(le(s))for(o=Object.keys(s),n=o.length,i=0;i<n;i++)e.call(t,s[o[i]],o[i])}function Gr(s,e){let t,r,i,n;if(!s||!e||s.length!==e.length)return!1;for(t=0,r=s.length;t<r;++t)if(i=s[t],n=e[t],i.datasetIndex!==n.datasetIndex||i.index!==n.index)return!1;return!0}function Xr(s){if(ke(s))return s.map(Xr);if(le(s)){const e=Object.create(null),t=Object.keys(s),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=Xr(s[t[i]]);return e}return s}function bl(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Ch(s,e,t,r){if(!bl(s))return;const i=e[s],n=t[s];le(i)&&le(n)?nr(i,n,r):e[s]=Xr(n)}function nr(s,e,t){const r=ke(e)?e:[e],i=r.length;if(!le(s))return s;t=t||{};const n=t.merger||Ch;let o;for(let l=0;l<i;++l){if(o=r[l],!le(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)n(c[d],s,o,t)}return s}function Ys(s,e){return nr(s,e,{merger:Th})}function Th(s,e,t){if(!bl(s))return;const r=e[s],i=t[s];le(r)&&le(i)?Ys(r,i):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=Xr(i))}const pn={"":s=>s,x:s=>s.x,y:s=>s.y};function Eh(s){const e=s.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function Ph(s){const e=Eh(s);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function as(s,e){return(pn[e]||(pn[e]=Ph(e)))(s)}function Ni(s){return s.charAt(0).toUpperCase()+s.slice(1)}const or=s=>typeof s<"u",It=s=>typeof s=="function",vn=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function Ah(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const he=Math.PI,pe=2*he,Dh=pe+he,Jr=Number.POSITIVE_INFINITY,Rh=he/180,Ne=he/2,Ht=he/4,jn=he*2/3,pl=Math.log10,dt=Math.sign;function Gs(s,e,t){return Math.abs(s-e)<t}function wn(s){const e=Math.round(s);s=Gs(s,e,s/1e3)?e:s;const t=Math.pow(10,Math.floor(pl(s))),r=s/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function Oh(s){const e=[],t=Math.sqrt(s);let r;for(r=1;r<t;r++)s%r===0&&(e.push(r),e.push(s/r));return t===(t|0)&&e.push(t),e.sort((i,n)=>i-n).pop(),e}function Mh(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function lr(s){return!Mh(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function Ih(s,e){const t=Math.round(s);return t-e<=s&&t+e>=s}function Lh(s,e,t){let r,i,n;for(r=0,i=s.length;r<i;r++)n=s[r][t],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function vt(s){return s*(he/180)}function $h(s){return s*(180/he)}function yn(s){if(!Je(s))return;let e=1,t=0;for(;Math.round(s*e)/e!==s;)e*=10,t++;return t}function vl(s,e){const t=e.x-s.x,r=e.y-s.y,i=Math.sqrt(t*t+r*r);let n=Math.atan2(r,t);return n<-.5*he&&(n+=pe),{angle:n,distance:i}}function li(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function Fh(s,e){return(s-e+Dh)%pe-he}function st(s){return(s%pe+pe)%pe}function cr(s,e,t,r){const i=st(s),n=st(e),o=st(t),l=st(n-i),c=st(o-i),d=st(i-n),u=st(i-o);return i===n||i===o||r&&n===o||l>c&&d<u}function Me(s,e,t){return Math.max(e,Math.min(t,s))}function zh(s){return Me(s,-32768,32767)}function Pt(s,e,t,r=1e-6){return s>=Math.min(e,t)-r&&s<=Math.max(e,t)+r}function Si(s,e,t){t=t||(o=>s[o]<e);let r=s.length-1,i=0,n;for(;r-i>1;)n=i+r>>1,t(n)?i=n:r=n;return{lo:i,hi:r}}const Zt=(s,e,t,r)=>Si(s,t,r?i=>{const n=s[i][e];return n<t||n===t&&s[i+1][e]===t}:i=>s[i][e]<t),Bh=(s,e,t)=>Si(s,t,r=>s[r][e]>=t);function Wh(s,e,t){let r=0,i=s.length;for(;r<i&&s[r]<e;)r++;for(;i>r&&s[i-1]>t;)i--;return r>0||i<s.length?s.slice(r,i):s}const jl=["push","pop","shift","splice","unshift"];function Uh(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),jl.forEach(t=>{const r="_onData"+Ni(t),i=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...n){const o=i.apply(this,n);return s._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...n)}),o}})})}function kn(s,e){const t=s._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(jl.forEach(n=>{delete s[n]}),delete s._chartjs)}function wl(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const yl=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function kl(s,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,yl.call(window,()=>{r=!1,s.apply(e,t)}))}}function Hh(s,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(s,e,r)):s.apply(this,r),e}}const Ci=s=>s==="start"?"left":s==="end"?"right":"center",Oe=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2,qh=(s,e,t,r)=>s===(r?"left":"right")?t:s==="center"?(e+t)/2:e;function Vh(s,e,t){const r=e.length;let i=0,n=r;if(s._sorted){const{iScale:o,vScale:l,_parsed:c}=s,d=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,u=o.axis,{min:h,max:m,minDefined:f,maxDefined:b}=o.getUserBounds();if(f){if(i=Math.min(Zt(c,u,h).lo,t?r:Zt(e,u,o.getPixelForValue(h)).lo),d){const x=c.slice(0,i+1).reverse().findIndex(g=>!de(g[l.axis]));i-=Math.max(0,x)}i=Me(i,0,r-1)}if(b){let x=Math.max(Zt(c,o.axis,m,!0).hi+1,t?0:Zt(e,u,o.getPixelForValue(m),!0).hi+1);if(d){const g=c.slice(x-1).findIndex(p=>!de(p[l.axis]));x+=Math.max(0,g)}n=Me(x,i,r)-i}else n=r-i}return{start:i,count:n}}function Kh(s){const{xScale:e,yScale:t,_scaleRanges:r}=s,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return s._scaleRanges=i,!0;const n=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),n}const Pr=s=>s===0||s===1,_n=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*pe/t)),Nn=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*pe/t)+1,Xs={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Ne)+1,easeOutSine:s=>Math.sin(s*Ne),easeInOutSine:s=>-.5*(Math.cos(he*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Pr(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Pr(s)?s:_n(s,.075,.3),easeOutElastic:s=>Pr(s)?s:Nn(s,.075,.3),easeInOutElastic(s){return Pr(s)?s:s<.5?.5*_n(s*2,.1125,.45):.5+.5*Nn(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-Xs.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Xs.easeInBounce(s*2)*.5:Xs.easeOutBounce(s*2-1)*.5+.5};function Ti(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Sn(s){return Ti(s)?s:new ir(s)}function Da(s){return Ti(s)?s:new ir(s).saturate(.5).darken(.1).hexString()}const Yh=["x","y","borderWidth","radius","tension"],Gh=["color","borderColor","backgroundColor"];function Xh(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:Gh},numbers:{type:"number",properties:Yh}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Jh(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Cn=new Map;function Zh(s,e){e=e||{};const t=s+JSON.stringify(e);let r=Cn.get(t);return r||(r=new Intl.NumberFormat(s,e),Cn.set(t,r)),r}function Ei(s,e,t){return Zh(e,t).format(s)}const Qh={values(s){return ke(s)?s:""+s},numeric(s,e,t){if(s===0)return"0";const r=this.chart.options.locale;let i,n=s;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),n=em(s,t)}const o=pl(Math.abs(n)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Ei(s,r,c)}};function em(s,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),t}var _l={formatters:Qh};function tm(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_l.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const is=Object.create(null),ci=Object.create(null);function Js(s,e){if(!e)return s;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const n=t[r];s=s[n]||(s[n]=Object.create(null))}return s}function Ra(s,e,t){return typeof e=="string"?nr(Js(s,e),t):nr(Js(s,""),e)}class sm{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Da(i.backgroundColor),this.hoverBorderColor=(r,i)=>Da(i.borderColor),this.hoverColor=(r,i)=>Da(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ra(this,e,t)}get(e){return Js(this,e)}describe(e,t){return Ra(ci,e,t)}override(e,t){return Ra(is,e,t)}route(e,t,r,i){const n=Js(this,e),o=Js(this,r),l="_"+t;Object.defineProperties(n,{[l]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],d=o[i];return le(c)?Object.assign({},d,c):re(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var ve=new sm({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Xh,Jh,tm]);function rm(s){return!s||de(s.size)||de(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Tn(s,e,t,r,i){let n=e[i];return n||(n=e[i]=s.measureText(i).width,t.push(i)),n>r&&(r=n),r}function qt(s,e,t){const r=s.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function En(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function di(s,e,t,r){Nl(s,e,t,r,null)}function Nl(s,e,t,r,i){let n,o,l,c,d,u,h,m;const f=e.pointStyle,b=e.rotation,x=e.radius;let g=(b||0)*Rh;if(f&&typeof f=="object"&&(n=f.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]")){s.save(),s.translate(t,r),s.rotate(g),s.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),s.restore();return}if(!(isNaN(x)||x<=0)){switch(s.beginPath(),f){default:i?s.ellipse(t,r,i/2,x,0,0,pe):s.arc(t,r,x,0,pe),s.closePath();break;case"triangle":u=i?i/2:x,s.moveTo(t+Math.sin(g)*u,r-Math.cos(g)*x),g+=jn,s.lineTo(t+Math.sin(g)*u,r-Math.cos(g)*x),g+=jn,s.lineTo(t+Math.sin(g)*u,r-Math.cos(g)*x),s.closePath();break;case"rectRounded":d=x*.516,c=x-d,o=Math.cos(g+Ht)*c,h=Math.cos(g+Ht)*(i?i/2-d:c),l=Math.sin(g+Ht)*c,m=Math.sin(g+Ht)*(i?i/2-d:c),s.arc(t-h,r-l,d,g-he,g-Ne),s.arc(t+m,r-o,d,g-Ne,g),s.arc(t+h,r+l,d,g,g+Ne),s.arc(t-m,r+o,d,g+Ne,g+he),s.closePath();break;case"rect":if(!b){c=Math.SQRT1_2*x,u=i?i/2:c,s.rect(t-u,r-c,2*u,2*c);break}g+=Ht;case"rectRot":h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,l=Math.sin(g)*x,m=Math.sin(g)*(i?i/2:x),s.moveTo(t-h,r-l),s.lineTo(t+m,r-o),s.lineTo(t+h,r+l),s.lineTo(t-m,r+o),s.closePath();break;case"crossRot":g+=Ht;case"cross":h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,l=Math.sin(g)*x,m=Math.sin(g)*(i?i/2:x),s.moveTo(t-h,r-l),s.lineTo(t+h,r+l),s.moveTo(t+m,r-o),s.lineTo(t-m,r+o);break;case"star":h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,l=Math.sin(g)*x,m=Math.sin(g)*(i?i/2:x),s.moveTo(t-h,r-l),s.lineTo(t+h,r+l),s.moveTo(t+m,r-o),s.lineTo(t-m,r+o),g+=Ht,h=Math.cos(g)*(i?i/2:x),o=Math.cos(g)*x,l=Math.sin(g)*x,m=Math.sin(g)*(i?i/2:x),s.moveTo(t-h,r-l),s.lineTo(t+h,r+l),s.moveTo(t+m,r-o),s.lineTo(t-m,r+o);break;case"line":o=i?i/2:Math.cos(g)*x,l=Math.sin(g)*x,s.moveTo(t-o,r-l),s.lineTo(t+o,r+l);break;case"dash":s.moveTo(t,r),s.lineTo(t+Math.cos(g)*(i?i/2:x),r+Math.sin(g)*x);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function dr(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function Pi(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function Ai(s){s.restore()}function am(s,e,t,r,i){if(!e)return s.lineTo(t.x,t.y);if(i==="middle"){const n=(e.x+t.x)/2;s.lineTo(n,e.y),s.lineTo(n,t.y)}else i==="after"!=!!r?s.lineTo(e.x,t.y):s.lineTo(t.x,e.y);s.lineTo(t.x,t.y)}function im(s,e,t,r){if(!e)return s.lineTo(t.x,t.y);s.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function nm(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),de(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function om(s,e,t,r,i){if(i.strikethrough||i.underline){const n=s.measureText(r),o=e-n.actualBoundingBoxLeft,l=e+n.actualBoundingBoxRight,c=t-n.actualBoundingBoxAscent,d=t+n.actualBoundingBoxDescent,u=i.strikethrough?(c+d)/2:d;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=i.decorationWidth||2,s.moveTo(o,u),s.lineTo(l,u),s.stroke()}}function lm(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function ur(s,e,t,r,i,n={}){const o=ke(e)?e:[e],l=n.strokeWidth>0&&n.strokeColor!=="";let c,d;for(s.save(),s.font=i.string,nm(s,n),c=0;c<o.length;++c)d=o[c],n.backdrop&&lm(s,n.backdrop),l&&(n.strokeColor&&(s.strokeStyle=n.strokeColor),de(n.strokeWidth)||(s.lineWidth=n.strokeWidth),s.strokeText(d,t,r,n.maxWidth)),s.fillText(d,t,r,n.maxWidth),om(s,t,r,d,n),r+=Number(i.lineHeight);s.restore()}function Zr(s,e){const{x:t,y:r,w:i,h:n,radius:o}=e;s.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*he,he,!0),s.lineTo(t,r+n-o.bottomLeft),s.arc(t+o.bottomLeft,r+n-o.bottomLeft,o.bottomLeft,he,Ne,!0),s.lineTo(t+i-o.bottomRight,r+n),s.arc(t+i-o.bottomRight,r+n-o.bottomRight,o.bottomRight,Ne,0,!0),s.lineTo(t+i,r+o.topRight),s.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Ne,!0),s.lineTo(t+o.topLeft,r)}const cm=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,dm=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function um(s,e){const t=(""+s).match(cm);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const hm=s=>+s||0;function Di(s,e){const t={},r=le(e),i=r?Object.keys(e):e,n=le(s)?r?o=>re(s[o],s[e[o]]):o=>s[o]:()=>s;for(const o of i)t[o]=hm(n(o));return t}function Sl(s){return Di(s,{top:"y",right:"x",bottom:"y",left:"x"})}function ks(s){return Di(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Ze(s){const e=Sl(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ie(s,e){s=s||{},e=e||ve.font;let t=re(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=re(s.style,e.style);r&&!(""+r).match(dm)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:re(s.family,e.family),lineHeight:um(re(s.lineHeight,e.lineHeight),t),size:t,style:r,weight:re(s.weight,e.weight),string:""};return i.string=rm(i),i}function Ar(s,e,t,r){let i,n,o;for(i=0,n=s.length;i<n;++i)if(o=s[i],o!==void 0&&o!==void 0)return o}function mm(s,e,t){const{min:r,max:i}=s,n=xl(e,(i-r)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(r,-Math.abs(n)),max:o(i,n)}}function os(s,e){return Object.assign(Object.create(s),e)}function Ri(s,e=[""],t,r,i=()=>s[0]){const n=t||s;typeof r>"u"&&(r=Pl("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:n,_fallback:r,_getTarget:i,override:l=>Ri([l,...s],e,n,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete s[0][c],!0},get(l,c){return Tl(l,c,()=>wm(c,e,s,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(l,c){return An(l).includes(c)},ownKeys(l){return An(l)},set(l,c,d){const u=l._storage||(l._storage=i());return l[c]=u[c]=d,delete l._keys,!0}})}function Cs(s,e,t,r){const i={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:Cl(s,r),setContext:n=>Cs(s,n,t,r),override:n=>Cs(s.override(n),e,t,r)};return new Proxy(i,{deleteProperty(n,o){return delete n[o],delete s[o],!0},get(n,o,l){return Tl(n,o,()=>gm(n,o,l))},getOwnPropertyDescriptor(n,o){return n._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(n,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(n,o,l){return s[o]=l,delete n[o],!0}})}function Cl(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=s;return{allKeys:i,scriptable:t,indexable:r,isScriptable:It(t)?t:()=>t,isIndexable:It(r)?r:()=>r}}const fm=(s,e)=>s?s+Ni(e):e,Oi=(s,e)=>le(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Tl(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const r=t();return s[e]=r,r}function gm(s,e,t){const{_proxy:r,_context:i,_subProxy:n,_descriptors:o}=s;let l=r[e];return It(l)&&o.isScriptable(e)&&(l=xm(e,l,s,t)),ke(l)&&l.length&&(l=bm(e,l,s,o.isIndexable)),Oi(e,l)&&(l=Cs(l,i,n&&n[e],o)),l}function xm(s,e,t,r){const{_proxy:i,_context:n,_subProxy:o,_stack:l}=t;if(l.has(s))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+s);l.add(s);let c=e(n,o||r);return l.delete(s),Oi(s,c)&&(c=Mi(i._scopes,i,s,c)),c}function bm(s,e,t,r){const{_proxy:i,_context:n,_subProxy:o,_descriptors:l}=t;if(typeof n.index<"u"&&r(s))return e[n.index%e.length];if(le(e[0])){const c=e,d=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Mi(d,i,s,u);e.push(Cs(h,n,o&&o[s],l))}}return e}function El(s,e,t){return It(s)?s(e,t):s}const pm=(s,e)=>s===!0?e:typeof s=="string"?as(e,s):void 0;function vm(s,e,t,r,i){for(const n of e){const o=pm(t,n);if(o){s.add(o);const l=El(o._fallback,t,i);if(typeof l<"u"&&l!==t&&l!==r)return l}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function Mi(s,e,t,r){const i=e._rootScopes,n=El(e._fallback,t,r),o=[...s,...i],l=new Set;l.add(r);let c=Pn(l,o,t,n||t,r);return c===null||typeof n<"u"&&n!==t&&(c=Pn(l,o,n,c,r),c===null)?!1:Ri(Array.from(l),[""],i,n,()=>jm(e,t,r))}function Pn(s,e,t,r,i){for(;t;)t=vm(s,e,t,r,i);return t}function jm(s,e,t){const r=s._getTarget();e in r||(r[e]={});const i=r[e];return ke(i)&&le(t)?t:i||{}}function wm(s,e,t,r){let i;for(const n of e)if(i=Pl(fm(n,s),t),typeof i<"u")return Oi(s,i)?Mi(t,r,s,i):i}function Pl(s,e){for(const t of e){if(!t)continue;const r=t[s];if(typeof r<"u")return r}}function An(s){let e=s._keys;return e||(e=s._keys=ym(s._scopes)),e}function ym(s){const e=new Set;for(const t of s)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const km=Number.EPSILON||1e-14,Ts=(s,e)=>e<s.length&&!s[e].skip&&s[e],Al=s=>s==="x"?"y":"x";function _m(s,e,t,r){const i=s.skip?e:s,n=e,o=t.skip?e:t,l=li(n,i),c=li(o,n);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=r*d,m=r*u;return{previous:{x:n.x-h*(o.x-i.x),y:n.y-h*(o.y-i.y)},next:{x:n.x+m*(o.x-i.x),y:n.y+m*(o.y-i.y)}}}function Nm(s,e,t){const r=s.length;let i,n,o,l,c,d=Ts(s,0);for(let u=0;u<r-1;++u)if(c=d,d=Ts(s,u+1),!(!c||!d)){if(Gs(e[u],0,km)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],n=t[u+1]/e[u],l=Math.pow(i,2)+Math.pow(n,2),!(l<=9)&&(o=3/Math.sqrt(l),t[u]=i*o*e[u],t[u+1]=n*o*e[u])}}function Sm(s,e,t="x"){const r=Al(t),i=s.length;let n,o,l,c=Ts(s,0);for(let d=0;d<i;++d){if(o=l,l=c,c=Ts(s,d+1),!l)continue;const u=l[t],h=l[r];o&&(n=(u-o[t])/3,l[`cp1${t}`]=u-n,l[`cp1${r}`]=h-n*e[d]),c&&(n=(c[t]-u)/3,l[`cp2${t}`]=u+n,l[`cp2${r}`]=h+n*e[d])}}function Cm(s,e="x"){const t=Al(e),r=s.length,i=Array(r).fill(0),n=Array(r);let o,l,c,d=Ts(s,0);for(o=0;o<r;++o)if(l=c,c=d,d=Ts(s,o+1),!!c){if(d){const u=d[e]-c[e];i[o]=u!==0?(d[t]-c[t])/u:0}n[o]=l?d?dt(i[o-1])!==dt(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Nm(s,i,n),Sm(s,n,e)}function Dr(s,e,t){return Math.max(Math.min(s,t),e)}function Tm(s,e){let t,r,i,n,o,l=dr(s[0],e);for(t=0,r=s.length;t<r;++t)o=n,n=l,l=t<r-1&&dr(s[t+1],e),n&&(i=s[t],o&&(i.cp1x=Dr(i.cp1x,e.left,e.right),i.cp1y=Dr(i.cp1y,e.top,e.bottom)),l&&(i.cp2x=Dr(i.cp2x,e.left,e.right),i.cp2y=Dr(i.cp2y,e.top,e.bottom)))}function Em(s,e,t,r,i){let n,o,l,c;if(e.spanGaps&&(s=s.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")Cm(s,i);else{let d=r?s[s.length-1]:s[0];for(n=0,o=s.length;n<o;++n)l=s[n],c=_m(d,l,s[Math.min(n+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&Tm(s,t)}function Ii(){return typeof window<"u"&&typeof document<"u"}function Li(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Qr(s,e,t){let r;return typeof s=="string"?(r=parseInt(s,10),s.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=s,r}const ua=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Pm(s,e){return ua(s).getPropertyValue(e)}const Am=["top","right","bottom","left"];function es(s,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const n=Am[i];r[n]=parseFloat(s[e+"-"+n+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Dm=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function Rm(s,e){const t=s.touches,r=t&&t.length?t[0]:s,{offsetX:i,offsetY:n}=r;let o=!1,l,c;if(Dm(i,n,s.target))l=i,c=n;else{const d=e.getBoundingClientRect();l=r.clientX-d.left,c=r.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Yt(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:r}=e,i=ua(t),n=i.boxSizing==="border-box",o=es(i,"padding"),l=es(i,"border","width"),{x:c,y:d,box:u}=Rm(s,t),h=o.left+(u&&l.left),m=o.top+(u&&l.top);let{width:f,height:b}=e;return n&&(f-=o.width+l.width,b-=o.height+l.height),{x:Math.round((c-h)/f*t.width/r),y:Math.round((d-m)/b*t.height/r)}}function Om(s,e,t){let r,i;if(e===void 0||t===void 0){const n=s&&Li(s);if(!n)e=s.clientWidth,t=s.clientHeight;else{const o=n.getBoundingClientRect(),l=ua(n),c=es(l,"border","width"),d=es(l,"padding");e=o.width-d.width-c.width,t=o.height-d.height-c.height,r=Qr(l.maxWidth,n,"clientWidth"),i=Qr(l.maxHeight,n,"clientHeight")}}return{width:e,height:t,maxWidth:r||Jr,maxHeight:i||Jr}}const Rr=s=>Math.round(s*10)/10;function Mm(s,e,t,r){const i=ua(s),n=es(i,"margin"),o=Qr(i.maxWidth,s,"clientWidth")||Jr,l=Qr(i.maxHeight,s,"clientHeight")||Jr,c=Om(s,e,t);let{width:d,height:u}=c;if(i.boxSizing==="content-box"){const m=es(i,"border","width"),f=es(i,"padding");d-=f.width+m.width,u-=f.height+m.height}return d=Math.max(0,d-n.width),u=Math.max(0,r?d/r:u-n.height),d=Rr(Math.min(d,o,c.maxWidth)),u=Rr(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Rr(d/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,d=Rr(Math.floor(u*r))),{width:d,height:u}}function Dn(s,e,t){const r=e||1,i=Math.floor(s.height*r),n=Math.floor(s.width*r);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const o=s.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==r||o.height!==i||o.width!==n?(s.currentDevicePixelRatio=r,o.height=i,o.width=n,s.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Im=function(){let s=!1;try{const e={get passive(){return s=!0,!1}};Ii()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s}();function Rn(s,e){const t=Pm(s,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Gt(s,e,t,r){return{x:s.x+t*(e.x-s.x),y:s.y+t*(e.y-s.y)}}function Lm(s,e,t,r){return{x:s.x+t*(e.x-s.x),y:r==="middle"?t<.5?s.y:e.y:r==="after"?t<1?s.y:e.y:t>0?e.y:s.y}}function $m(s,e,t,r){const i={x:s.cp2x,y:s.cp2y},n={x:e.cp1x,y:e.cp1y},o=Gt(s,i,t),l=Gt(i,n,t),c=Gt(n,e,t),d=Gt(o,l,t),u=Gt(l,c,t);return Gt(d,u,t)}const Fm=function(s,e){return{x(t){return s+s+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},zm=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function _s(s,e,t){return s?Fm(e,t):zm()}function Dl(s,e){let t,r;(e==="ltr"||e==="rtl")&&(t=s.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),s.prevTextDirection=r)}function Rl(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function Ol(s){return s==="angle"?{between:cr,compare:Fh,normalize:st}:{between:Pt,compare:(e,t)=>e-t,normalize:e=>e}}function On({start:s,end:e,count:t,loop:r,style:i}){return{start:s%t,end:e%t,loop:r&&(e-s+1)%t===0,style:i}}function Bm(s,e,t){const{property:r,start:i,end:n}=t,{between:o,normalize:l}=Ol(r),c=e.length;let{start:d,end:u,loop:h}=s,m,f;if(h){for(d+=c,u+=c,m=0,f=c;m<f&&o(l(e[d%c][r]),i,n);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:s.style}}function Wm(s,e,t){if(!t)return[s];const{property:r,start:i,end:n}=t,o=e.length,{compare:l,between:c,normalize:d}=Ol(r),{start:u,end:h,loop:m,style:f}=Bm(s,e,t),b=[];let x=!1,g=null,p,j,v;const N=()=>c(i,v,p)&&l(i,v)!==0,y=()=>l(n,p)===0||c(n,v,p),S=()=>x||N(),_=()=>!x||y();for(let C=u,T=u;C<=h;++C)j=e[C%o],!j.skip&&(p=d(j[r]),p!==v&&(x=c(p,i,n),g===null&&S()&&(g=l(p,i)===0?C:T),g!==null&&_()&&(b.push(On({start:g,end:C,loop:m,count:o,style:f})),g=null),T=C,v=p));return g!==null&&b.push(On({start:g,end:h,loop:m,count:o,style:f})),b}function Um(s,e){const t=[],r=s.segments;for(let i=0;i<r.length;i++){const n=Wm(r[i],s.points,e);n.length&&t.push(...n)}return t}function Hm(s,e,t,r){let i=0,n=e-1;if(t&&!r)for(;i<e&&!s[i].skip;)i++;for(;i<e&&s[i].skip;)i++;for(i%=e,t&&(n+=i);n>i&&s[n%e].skip;)n--;return n%=e,{start:i,end:n}}function qm(s,e,t,r){const i=s.length,n=[];let o=e,l=s[e],c;for(c=e+1;c<=t;++c){const d=s[c%i];d.skip||d.stop?l.skip||(r=!1,n.push({start:e%i,end:(c-1)%i,loop:r}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&n.push({start:e%i,end:o%i,loop:r}),n}function Vm(s,e){const t=s.points,r=s.options.spanGaps,i=t.length;if(!i)return[];const n=!!s._loop,{start:o,end:l}=Hm(t,i,n,r);if(r===!0)return Mn(s,[{start:o,end:l,loop:n}],t,e);const c=l<o?l+i:l,d=!!s._fullLoop&&o===0&&l===i-1;return Mn(s,qm(t,o,c,d),t,e)}function Mn(s,e,t,r){return!r||!r.setContext||!t?e:Km(s,e,t,r)}function Km(s,e,t,r){const i=s._chart.getContext(),n=In(s.options),{_datasetIndex:o,options:{spanGaps:l}}=s,c=t.length,d=[];let u=n,h=e[0].start,m=h;function f(b,x,g,p){const j=l?-1:1;if(b!==x){for(b+=c;t[b%c].skip;)b-=j;for(;t[x%c].skip;)x+=j;b%c!==x%c&&(d.push({start:b%c,end:x%c,loop:g,style:p}),u=p,h=x%c)}}for(const b of e){h=l?h:b.start;let x=t[h%c],g;for(m=h+1;m<=b.end;m++){const p=t[m%c];g=In(r.setContext(os(i,{type:"segment",p0:x,p1:p,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),Ym(g,u)&&f(h,m-1,b.loop,u),x=p,u=g}h<m-1&&f(h,m-1,b.loop,u)}return d}function In(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function Ym(s,e){if(!e)return!1;const t=[],r=function(i,n){return Ti(n)?(t.includes(n)||t.push(n),t.indexOf(n)):n};return JSON.stringify(s,r)!==JSON.stringify(e,r)}function Or(s,e,t){return s.options.clip?s[t]:e[t]}function Gm(s,e){const{xScale:t,yScale:r}=s;return t&&r?{left:Or(t,e,"left"),right:Or(t,e,"right"),top:Or(r,e,"top"),bottom:Or(r,e,"bottom")}:e}function Xm(s,e){const t=e._clip;if(t.disabled)return!1;const r=Gm(e,s.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Jm{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const n=t.listeners[i],o=t.duration;n.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=yl.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const n=r.items;let o=n.length-1,l=!1,c;for(;o>=0;--o)c=n[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(n[o]=n[n.length-1],n.pop());l&&(i.draw(),this._notify(i,r,e,"progress")),n.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=n.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ft=new Jm;const Ln="transparent",Zm={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const r=Sn(s||Ln),i=r.valid&&Sn(e||Ln);return i&&i.valid?i.mix(r,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class Qm{constructor(e,t,r,i){const n=t[r];i=Ar([e.to,i,n,e.from]);const o=Ar([e.from,n,i]);this._active=!0,this._fn=e.fn||Zm[e.type||typeof o],this._easing=Xs[e.easing]||Xs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],n=r-this._start,o=this._duration-n;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=Ar([e.to,t,i,e.from]),this._from=Ar([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,n=this._from,o=this._loop,l=this._to;let c;if(this._active=n!==l&&(o||t<r),!this._active){this._target[i]=l,this._notify(!0);return}if(t<0){this._target[i]=n;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(n,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class Ml{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!le(e))return;const t=Object.keys(ve.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const n=e[i];if(!le(n))return;const o={};for(const l of t)o[l]=n[l];(ke(n.properties)&&n.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,t){const r=t.options,i=t0(e,r);if(!i)return[];const n=this._createAnimations(i,r);return r.$shared&&e0(e.options.$animations,r).then(()=>{e.options=r},()=>{}),n}_createAnimations(e,t){const r=this._properties,i=[],n=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[d];let h=n[d];const m=r.get(d);if(h)if(m&&h.active()){h.update(m,u,l);continue}else h.cancel();if(!m||!m.duration){e[d]=u;continue}n[d]=h=new Qm(m,e,d,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return ft.add(this._chart,r),!0}}function e0(s,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const n=s[r[i]];n&&n.active()&&t.push(n.wait())}return Promise.all(t)}function t0(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function $n(s,e){const t=s&&s.options||{},r=t.reverse,i=t.min===void 0?e:0,n=t.max===void 0?e:0;return{start:r?n:i,end:r?i:n}}function s0(s,e,t){if(t===!1)return!1;const r=$n(s,t),i=$n(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function r0(s){let e,t,r,i;return le(s)?(e=s.top,t=s.right,r=s.bottom,i=s.left):e=t=r=i=s,{top:e,right:t,bottom:r,left:i,disabled:s===!1}}function Il(s,e){const t=[],r=s._getSortedDatasetMetas(e);let i,n;for(i=0,n=r.length;i<n;++i)t.push(r[i].index);return t}function Fn(s,e,t,r={}){const i=s.keys,n=r.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=i.length;o<l;++o){if(c=+i[o],c===t){if(u=!0,r.all)continue;break}d=s.values[c],Je(d)&&(n||e===0||dt(e)===dt(d))&&(e+=d)}return!u&&!r.all?0:e}function a0(s,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",n=r.axis==="x"?"x":"y",o=Object.keys(s),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[i]:u,[n]:s[u]};return l}function Oa(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function i0(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function n0(s){const{min:e,max:t,minDefined:r,maxDefined:i}=s.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function o0(s,e,t){const r=s[e]||(s[e]={});return r[t]||(r[t]={})}function zn(s,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const n=s[i.index];if(t&&n>0||!t&&n<0)return i.index}return null}function Bn(s,e){const{chart:t,_cachedMeta:r}=s,i=t._stacks||(t._stacks={}),{iScale:n,vScale:o,index:l}=r,c=n.axis,d=o.axis,u=i0(n,o,r),h=e.length;let m;for(let f=0;f<h;++f){const b=e[f],{[c]:x,[d]:g}=b,p=b._stacks||(b._stacks={});m=p[d]=o0(i,u,x),m[l]=g,m._top=zn(m,o,!0,r.type),m._bottom=zn(m,o,!1,r.type);const j=m._visualValues||(m._visualValues={});j[l]=g}}function Ma(s,e){const t=s.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function l0(s,e){return os(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function c0(s,e,t){return os(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Is(s,e){const t=s.controller.index,r=s.vScale&&s.vScale.axis;if(r){e=e||s._parsed;for(const i of e){const n=i._stacks;if(!n||n[r]===void 0||n[r][t]===void 0)return;delete n[r][t],n[r]._visualValues!==void 0&&n[r]._visualValues[t]!==void 0&&delete n[r]._visualValues[t]}}}const Ia=s=>s==="reset"||s==="none",Wn=(s,e)=>e?s:Object.assign({},s),d0=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:Il(t,!0),values:null};class ha{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Oa(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Is(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(h,m,f,b)=>h==="x"?m:h==="r"?b:f,n=t.xAxisID=re(r.xAxisID,Ma(e,"x")),o=t.yAxisID=re(r.yAxisID,Ma(e,"y")),l=t.rAxisID=re(r.rAxisID,Ma(e,"r")),c=t.indexAxis,d=t.iAxisID=i(c,n,o,l),u=t.vAxisID=i(c,o,n,l);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&kn(this._data,this),e._stacked&&Is(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(le(t)){const i=this._cachedMeta;this._data=a0(t,i)}else if(r!==t){if(r){kn(r,this);const i=this._cachedMeta;Is(i),i._parsed=[]}t&&Object.isExtensible(t)&&Uh(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const n=t._stacked;t._stacked=Oa(t.vScale,t),t.stack!==r.stack&&(i=!0,Is(t),t.stack=r.stack),this._resyncElements(e),(i||n!==t._stacked)&&(Bn(this,t._parsed),t._stacked=Oa(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:n,_stacked:o}=r,l=n.axis;let c=e===0&&t===i.length?!0:r._sorted,d=e>0&&r._parsed[e-1],u,h,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{ke(i[e])?m=this.parseArrayData(r,i,e,t):le(i[e])?m=this.parseObjectData(r,i,e,t):m=this.parsePrimitiveData(r,i,e,t);const f=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<t;++u)r._parsed[u+e]=h=m[u],c&&(f()&&(c=!1),d=h);r._sorted=c}o&&Bn(this,m)}parsePrimitiveData(e,t,r,i){const{iScale:n,vScale:o}=e,l=n.axis,c=o.axis,d=n.getLabels(),u=n===o,h=new Array(i);let m,f,b;for(m=0,f=i;m<f;++m)b=m+r,h[m]={[l]:u||n.parse(d[b],b),[c]:o.parse(t[b],b)};return h}parseArrayData(e,t,r,i){const{xScale:n,yScale:o}=e,l=new Array(i);let c,d,u,h;for(c=0,d=i;c<d;++c)u=c+r,h=t[u],l[c]={x:n.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,t,r,i){const{xScale:n,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(i);let u,h,m,f;for(u=0,h=i;u<h;++u)m=u+r,f=t[m],d[u]={x:n.parse(as(f,l),m),y:o.parse(as(f,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,n=this._cachedMeta,o=t[e.axis],l={keys:Il(i,!0),values:t._stacks[e.axis]._visualValues};return Fn(l,o,n.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const n=r[t.axis];let o=n===null?NaN:n;const l=i&&r._stacks[t.axis];i&&l&&(i.values=l,o=Fn(i,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,n=r._sorted&&e===r.iScale,o=i.length,l=this._getOtherScale(e),c=d0(t,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=n0(l);let m,f;function b(){f=i[m];const x=f[l.axis];return!Je(f[e.axis])||u>x||h<x}for(m=0;m<o&&!(!b()&&(this.updateRangeFromParsed(d,e,f,c),n));++m);if(n){for(m=o-1;m>=0;--m)if(!b()){this.updateRangeFromParsed(d,e,f,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,n,o;for(i=0,n=t.length;i<n;++i)o=t[i][e.axis],Je(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,n=this.getParsed(e);return{label:r?""+r.getLabelForValue(n[r.axis]):"",value:i?""+i.getLabelForValue(n[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=r0(re(this.options.clip,s0(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],n=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||i.length-l,d=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,n,l,c),u=l;u<l+c;++u){const h=i[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,n))}for(u=0;u<o.length;++u)o[u].draw(e,n)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];n=o.$context||(o.$context=c0(this.getContext(),e,o)),n.parsed=this.getParsed(e),n.raw=i.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=l0(this.chart.getContext(),this.index)),n.dataset=i,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=r,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",n=this._cachedDataOpts,o=e+"-"+t,l=n[o],c=this.enableOptionSharing&&or(r);if(l)return Wn(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),f=Object.keys(ve.elements[e]),b=()=>this.getContext(r,i,t),x=d.resolveNamedOptions(m,f,b,h);return x.$shared&&(x.$shared=c,n[o]=Object.freeze(Wn(x,c))),x}_resolveAnimations(e,t,r){const i=this.chart,n=this._cachedDataOpts,o=`animation-${t}`,l=n[o];if(l)return l;let c;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(e,r,t))}const d=new Ml(i,c&&c.animations);return c&&c._cacheable&&(n[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ia(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,n=this.getSharedOptions(r),o=this.includeOptions(t,n)||n!==i;return this.updateSharedOptions(n,t,r),{sharedOptions:n,includeOptions:o}}updateElement(e,t,r,i){Ia(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!Ia(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const n=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const i=r.length,n=t.length,o=Math.min(n,i);o&&this.parse(0,o),n>i?this._insertElements(i,n-i,e):n<i&&this._removeElements(n,i-n)}_insertElements(e,t,r=!0){const i=this._cachedMeta,n=i.data,o=e+t;let l;const c=d=>{for(d.length+=t,l=d.length-1;l>=o;l--)d[l]=d[l-t]};for(c(n),l=e;l<o;++l)n[l]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,t),r&&this.updateElements(n,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&Is(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function u0(s,e){if(!s._cache.$bar){const t=s.getMatchingVisibleMetas(e);let r=[];for(let i=0,n=t.length;i<n;i++)r=r.concat(t[i].controller.getAllParsedValues(s));s._cache.$bar=wl(r.sort((i,n)=>i-n))}return s._cache.$bar}function h0(s){const e=s.iScale,t=u0(e,s.type);let r=e._length,i,n,o,l;const c=()=>{o===32767||o===-32768||(or(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(i=0,n=t.length;i<n;++i)o=e.getPixelForValue(t[i]),c();for(l=void 0,i=0,n=e.ticks.length;i<n;++i)o=e.getPixelForTick(i),c();return r}function m0(s,e,t,r){const i=t.barThickness;let n,o;return de(i)?(n=e.min*t.categoryPercentage,o=t.barPercentage):(n=i*r,o=1),{chunk:n/r,ratio:o,start:e.pixels[s]-n/2}}function f0(s,e,t,r){const i=e.pixels,n=i[s];let o=s>0?i[s-1]:null,l=s<i.length-1?i[s+1]:null;const c=t.categoryPercentage;o===null&&(o=n-(l===null?e.end-e.start:l-n)),l===null&&(l=n+n-o);const d=n-(n-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:t.barPercentage,start:d}}function g0(s,e,t,r){const i=t.parse(s[0],r),n=t.parse(s[1],r),o=Math.min(i,n),l=Math.max(i,n);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:i,end:n,min:o,max:l}}function Ll(s,e,t,r){return ke(s)?g0(s,e,t,r):e[t.axis]=t.parse(s,r),e}function Un(s,e,t,r){const i=s.iScale,n=s.vScale,o=i.getLabels(),l=i===n,c=[];let d,u,h,m;for(d=t,u=t+r;d<u;++d)m=e[d],h={},h[i.axis]=l||i.parse(o[d],d),c.push(Ll(m,h,n,d));return c}function La(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function x0(s,e,t){return s!==0?dt(s):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function b0(s){let e,t,r,i,n;return s.horizontal?(e=s.base>s.x,t="left",r="right"):(e=s.base<s.y,t="bottom",r="top"),e?(i="end",n="start"):(i="start",n="end"),{start:t,end:r,reverse:e,top:i,bottom:n}}function p0(s,e,t,r){let i=e.borderSkipped;const n={};if(!i){s.borderSkipped=n;return}if(i===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=b0(s);i==="middle"&&t&&(s.enableBorderRadius=!0,(t._top||0)===r?i=d:(t._bottom||0)===r?i=u:(n[Hn(u,o,l,c)]=!0,i=d)),n[Hn(i,o,l,c)]=!0,s.borderSkipped=n}function Hn(s,e,t,r){return r?(s=v0(s,e,t),s=qn(s,t,e)):s=qn(s,e,t),s}function v0(s,e,t){return s===e?t:s===t?e:s}function qn(s,e,t){return s==="start"?e:s==="end"?t:s}function j0(s,{inflateAmount:e},t){s.inflateAmount=e==="auto"?t===1?.33:0:e}class w0 extends ha{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,i){return Un(e,t,r,i)}parseArrayData(e,t,r,i){return Un(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:n,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=n.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let m,f,b,x;for(m=r,f=r+i;m<f;++m)x=t[m],b={},b[n.axis]=n.parse(as(x,d),m),h.push(Ll(as(x,u),b,o,m));return h}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const n=r._custom;n&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,n=this.getParsed(e),o=n._custom,l=La(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(n[i.axis]);return{label:""+r.getLabelForValue(n[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const n=i==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(t,i);for(let f=t;f<t+r;f++){const b=this.getParsed(f),x=n||de(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(f),g=this._calculateBarIndexPixels(f,u),p=(b._stacks||{})[l.axis],j={horizontal:d,base:x.base,enableBorderRadius:!p||La(b._custom)||o===p._top||o===p._bottom,x:d?x.head:g.center,y:d?g.center:x.head,height:d?g.size:Math.abs(x.size),width:d?Math.abs(x.size):g.size};m&&(j.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const v=j.options||e[f].options;p0(j,v,p,o),j0(j,v,u.ratio),this.updateElement(e[f],f,j,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),n=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(t),c=l&&l[r.axis],d=u=>{const h=u._parsed.find(f=>f[r.axis]===c),m=h&&h[u.vScale.axis];if(de(m)||isNaN(m))return!0};for(const u of i)if(!(t!==void 0&&d(u))&&((n===!1||o.indexOf(u.stack)===-1||n===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[re(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const i=this._getStacks(e,r),n=t!==void 0?i.indexOf(t):-1;return n===-1?i.length-1:n}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let n,o;for(n=0,o=t.data.length;n<o;++n)i.push(r.getPixelForValue(this.getParsed(n)[r.axis],n));const l=e.barThickness;return{min:l||h0(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:n,minBarLength:o}}=this,l=n||0,c=this.getParsed(e),d=c._custom,u=La(d);let h=c[t.axis],m=0,f=r?this.applyStack(t,c,r):h,b,x;f!==h&&(m=f-h,f=h),u&&(h=d.barStart,f=d.barEnd-d.barStart,h!==0&&dt(h)!==dt(d.barEnd)&&(m=0),m+=h);const g=!de(n)&&!u?n:m;let p=t.getPixelForValue(g);if(this.chart.getDataVisibility(e)?b=t.getPixelForValue(m+f):b=p,x=b-p,Math.abs(x)<o){x=x0(x,t,l)*o,h===l&&(p-=x/2);const j=t.getPixelForDecimal(0),v=t.getPixelForDecimal(1),N=Math.min(j,v),y=Math.max(j,v);p=Math.max(Math.min(p,y),N),b=p+x,r&&!u&&(c._stacks[t.axis]._visualValues[i]=t.getValueForPixel(b)-t.getValueForPixel(p))}if(p===t.getPixelForValue(l)){const j=dt(x)*t.getLineWidthForValue(l)/2;p+=j,x-=j}return{size:x,base:p,head:b,center:b+x/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,n=i.skipNull,o=re(i.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(t.grouped){const u=n?this._getStackCount(e):t.stackCount,h=i.barThickness==="flex"?f0(e,t,i,u*d):m0(e,t,i,u*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(re(m,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0)+f;l=h.start+h.chunk*b+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(o,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let n=0;for(;n<i;++n)this.getParsed(n)[t.axis]!==null&&!r[n].hidden&&r[n].draw(this._ctx)}}function y0(s,e,t){let r=1,i=1,n=0,o=0;if(e<pe){const l=s,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),m=Math.sin(c),f=(v,N,y)=>cr(v,l,c,!0)?1:Math.max(N,N*t,y,y*t),b=(v,N,y)=>cr(v,l,c,!0)?-1:Math.min(N,N*t,y,y*t),x=f(0,d,h),g=f(Ne,u,m),p=b(he,d,h),j=b(he+Ne,u,m);r=(x-p)/2,i=(g-j)/2,n=-(x+p)/2,o=-(g+j)/2}return{ratioX:r,ratioY:i,offsetX:n,offsetY:o}}class k0 extends ha{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((n,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:n,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let n=c=>+r[c];if(le(r[e])){const{key:c="value"}=this._parsing;n=d=>+as(r[d],c)}let o,l;for(o=e,l=e+t;o<l;++o)i._parsed[o]=n(o)}}_getRotation(){return vt(this.options.rotation-90)}_getCircumference(){return vt(this.options.circumference)}_getRotationExtents(){let e=pe,t=-pe;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,n=i._getRotation(),o=i._getCircumference();e=Math.min(e,n),t=Math.max(t,n+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,n=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(Sh(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:b,offsetY:x}=y0(h,u,c),g=(r.width-o)/m,p=(r.height-o)/f,j=Math.max(Math.min(g,p)/2,0),v=xl(this.options.radius,j),N=Math.max(v*c,0),y=(v-N)/this._getVisibleDatasetWeightTotal();this.offsetX=b*v,this.offsetY=x*v,i.total=this.calculateTotal(),this.outerRadius=v-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*d,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,n=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*n/pe)}updateElements(e,t,r,i){const n=i==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,m=n&&d.animateScale,f=m?0:this.innerRadius,b=m?0:this.outerRadius,{sharedOptions:x,includeOptions:g}=this._getSharedOptions(t,i);let p=this._getRotation(),j;for(j=0;j<t;++j)p+=this._circumference(j,n);for(j=t;j<t+r;++j){const v=this._circumference(j,n),N=e[j],y={x:u+this.offsetX,y:h+this.offsetY,startAngle:p,endAngle:p+v,circumference:v,outerRadius:b,innerRadius:f};g&&(y.options=x||this.resolveDataElementOptions(j,N.active?"active":i)),p+=v,this.updateElement(N,j,y,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const n=e._parsed[i];n!==null&&!isNaN(n)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(n))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?pe*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],n=Ei(t._parsed[e],r.options.locale);return{label:i[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,n,o,l,c;if(!e){for(i=0,n=r.data.datasets.length;i<n;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,l=o.controller;break}}if(!e)return 0;for(i=0,n=e.length;i<n;++i)c=l.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const n=this.resolveDataElementOptions(r);t=Math.max(t,n.offset||0,n.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(re(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class _0 extends ha{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:n}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=Vh(t,i,o);this._drawStart=l,this._drawCount=c,Kh(t)&&(l=0,c=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!n._decimated,r.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:d},e),this.updateElements(i,l,c,e)}updateElements(e,t,r,i){const n=i==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i),m=o.axis,f=l.axis,{spanGaps:b,segment:x}=this.options,g=lr(b)?b:Number.POSITIVE_INFINITY,p=this.chart._animationsDisabled||n||i==="none",j=t+r,v=e.length;let N=t>0&&this.getParsed(t-1);for(let y=0;y<v;++y){const S=e[y],_=p?S:{};if(y<t||y>=j){_.skip=!0;continue}const C=this.getParsed(y),T=de(C[f]),I=_[m]=o.getPixelForValue(C[m],y),F=_[f]=n||T?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[f],y);_.skip=isNaN(I)||isNaN(F)||T,_.stop=y>0&&Math.abs(C[m]-N[m])>g,x&&(_.parsed=C,_.raw=d.data[y]),h&&(_.options=u||this.resolveDataElementOptions(y,S.active?"active":i)),p||this.updateElement(S,y,_,i),N=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const n=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,n,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Vt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $i{static override(e){Object.assign($i.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Vt()}parse(){return Vt()}format(){return Vt()}add(){return Vt()}diff(){return Vt()}startOf(){return Vt()}endOf(){return Vt()}}var N0={_date:$i};function S0(s,e,t,r){const{controller:i,data:n,_sorted:o}=s,l=i._cachedMeta.iScale,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&n.length){const d=l._reversePixels?Bh:Zt;if(r){if(i._sharedOptions){const u=n[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const m=d(n,e,t-h),f=d(n,e,t+h);return{lo:m.lo,hi:f.hi}}}}else{const u=d(n,e,t);if(c){const{vScale:h}=i._cachedMeta,{_parsed:m}=s,f=m.slice(0,u.lo+1).reverse().findIndex(x=>!de(x[h.axis]));u.lo-=Math.max(0,f);const b=m.slice(u.hi).findIndex(x=>!de(x[h.axis]));u.hi+=Math.max(0,b)}return u}}return{lo:0,hi:n.length-1}}function ma(s,e,t,r,i){const n=s.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=n.length;l<c;++l){const{index:d,data:u}=n[l],{lo:h,hi:m}=S0(n[l],e,o,i);for(let f=h;f<=m;++f){const b=u[f];b.skip||r(b,d,f)}}}function C0(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(r,i){const n=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}function $a(s,e,t,r,i){const n=[];return!i&&!s.isPointInArea(e)||ma(s,t,e,function(l,c,d){!i&&!dr(l,s.chartArea,0)||l.inRange(e.x,e.y,r)&&n.push({element:l,datasetIndex:c,index:d})},!0),n}function T0(s,e,t,r){let i=[];function n(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=vl(o,{x:e.x,y:e.y});cr(h,d,u)&&i.push({element:o,datasetIndex:l,index:c})}return ma(s,t,e,n),i}function E0(s,e,t,r,i,n){let o=[];const l=C0(t);let c=Number.POSITIVE_INFINITY;function d(u,h,m){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const b=u.getCenterPoint(i);if(!(!!n||s.isPointInArea(b))&&!f)return;const g=l(e,b);g<c?(o=[{element:u,datasetIndex:h,index:m}],c=g):g===c&&o.push({element:u,datasetIndex:h,index:m})}return ma(s,t,e,d),o}function Fa(s,e,t,r,i,n){return!n&&!s.isPointInArea(e)?[]:t==="r"&&!r?T0(s,e,t,i):E0(s,e,t,r,i,n)}function Vn(s,e,t,r,i){const n=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return ma(s,t,e,(c,d,u)=>{c[o]&&c[o](e[t],i)&&(n.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,i))}),r&&!l?[]:n}var P0={modes:{index(s,e,t,r){const i=Yt(e,s),n=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?$a(s,i,n,r,o):Fa(s,i,n,!1,r,o),c=[];return l.length?(s.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(s,e,t,r){const i=Yt(e,s),n=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?$a(s,i,n,r,o):Fa(s,i,n,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,d=s.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(s,e,t,r){const i=Yt(e,s),n=t.axis||"xy",o=t.includeInvisible||!1;return $a(s,i,n,r,o)},nearest(s,e,t,r){const i=Yt(e,s),n=t.axis||"xy",o=t.includeInvisible||!1;return Fa(s,i,n,t.intersect,r,o)},x(s,e,t,r){const i=Yt(e,s);return Vn(s,i,"x",t.intersect,r)},y(s,e,t,r){const i=Yt(e,s);return Vn(s,i,"y",t.intersect,r)}}};const $l=["left","top","right","bottom"];function Ls(s,e){return s.filter(t=>t.pos===e)}function Kn(s,e){return s.filter(t=>$l.indexOf(t.pos)===-1&&t.box.axis===e)}function $s(s,e){return s.sort((t,r)=>{const i=e?r:t,n=e?t:r;return i.weight===n.weight?i.index-n.index:i.weight-n.weight})}function A0(s){const e=[];let t,r,i,n,o,l;for(t=0,r=(s||[]).length;t<r;++t)i=s[t],{position:n,options:{stack:o,stackWeight:l=1}}=i,e.push({index:t,box:i,pos:n,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&n+o,stackWeight:l});return e}function D0(s){const e={};for(const t of s){const{stack:r,pos:i,stackWeight:n}=t;if(!r||!$l.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}function R0(s,e){const t=D0(s),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let n,o,l;for(n=0,o=s.length;n<o;++n){l=s[n];const{fullSize:c}=l.box,d=t[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*r:c&&e.availableWidth,l.height=i):(l.width=r,l.height=u?u*i:c&&e.availableHeight)}return t}function O0(s){const e=A0(s),t=$s(e.filter(d=>d.box.fullSize),!0),r=$s(Ls(e,"left"),!0),i=$s(Ls(e,"right")),n=$s(Ls(e,"top"),!0),o=$s(Ls(e,"bottom")),l=Kn(e,"x"),c=Kn(e,"y");return{fullSize:t,leftAndTop:r.concat(n),rightAndBottom:i.concat(c).concat(o).concat(l),chartArea:Ls(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:n.concat(o).concat(l)}}function Yn(s,e,t,r){return Math.max(s[t],e[t])+Math.max(s[r],e[r])}function Fl(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function M0(s,e,t,r){const{pos:i,box:n}=t,o=s.maxPadding;if(!le(i)){t.size&&(s[i]-=t.size);const h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?n.height:n.width),t.size=h.size/h.count,s[i]+=t.size}n.getPadding&&Fl(o,n.getPadding());const l=Math.max(0,e.outerWidth-Yn(o,s,"left","right")),c=Math.max(0,e.outerHeight-Yn(o,s,"top","bottom")),d=l!==s.w,u=c!==s.h;return s.w=l,s.h=c,t.horizontal?{same:d,other:u}:{same:u,other:d}}function I0(s){const e=s.maxPadding;function t(r){const i=Math.max(e[r]-s[r],0);return s[r]+=i,i}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function L0(s,e){const t=e.maxPadding;function r(i){const n={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{n[o]=Math.max(e[o],t[o])}),n}return r(s?["left","right"]:["top","bottom"])}function Us(s,e,t,r){const i=[];let n,o,l,c,d,u;for(n=0,o=s.length,d=0;n<o;++n){l=s[n],c=l.box,c.update(l.width||e.w,l.height||e.h,L0(l.horizontal,e));const{same:h,other:m}=M0(e,t,l,r);d|=h&&i.length,u=u||m,c.fullSize||i.push(l)}return d&&Us(i,e,t,r)||u}function Mr(s,e,t,r,i){s.top=t,s.left=e,s.right=e+r,s.bottom=t+i,s.width=r,s.height=i}function Gn(s,e,t,r){const i=t.padding;let{x:n,y:o}=e;for(const l of s){const c=l.box,d=r[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,m=d.size||c.height;or(d.start)&&(o=d.start),c.fullSize?Mr(c,i.left,o,t.outerWidth-i.right-i.left,m):Mr(c,e.left+d.placed,o,h,m),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,m=d.size||c.width;or(d.start)&&(n=d.start),c.fullSize?Mr(c,n,i.top,m,t.outerHeight-i.bottom-i.top):Mr(c,n,e.top+d.placed,m,h),d.start=n,d.placed+=h,n=c.right}}e.x=n,e.y=o}var Ge={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,r){if(!s)return;const i=Ze(s.options.layout.padding),n=Math.max(e-i.width,0),o=Math.max(t-i.height,0),l=O0(s.boxes),c=l.vertical,d=l.horizontal;ue(s.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=c.reduce((x,g)=>g.box.options&&g.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},i);Fl(m,Ze(r));const f=Object.assign({maxPadding:m,w:n,h:o,x:i.left,y:i.top},i),b=R0(c.concat(d),h);Us(l.fullSize,f,h,b),Us(c,f,h,b),Us(d,f,h,b)&&Us(c,f,h,b),I0(f),Gn(l.leftAndTop,f,h,b),f.x+=f.w,f.y+=f.h,Gn(l.rightAndBottom,f,h,b),s.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ue(l.chartArea,x=>{const g=x.box;Object.assign(g,s.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class zl{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class $0 extends zl{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wr="$chartjs",F0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Xn=s=>s===null||s==="";function z0(s,e){const t=s.style,r=s.getAttribute("height"),i=s.getAttribute("width");if(s[Wr]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Xn(i)){const n=Rn(s,"width");n!==void 0&&(s.width=n)}if(Xn(r))if(s.style.height==="")s.height=s.width/(e||2);else{const n=Rn(s,"height");n!==void 0&&(s.height=n)}return s}const Bl=Im?{passive:!0}:!1;function B0(s,e,t){s&&s.addEventListener(e,t,Bl)}function W0(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,Bl)}function U0(s,e){const t=F0[s.type]||s.type,{x:r,y:i}=Yt(s,e);return{type:t,chart:e,native:s,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ea(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function H0(s,e,t){const r=s.canvas,i=new MutationObserver(n=>{let o=!1;for(const l of n)o=o||ea(l.addedNodes,r),o=o&&!ea(l.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function q0(s,e,t){const r=s.canvas,i=new MutationObserver(n=>{let o=!1;for(const l of n)o=o||ea(l.removedNodes,r),o=o&&!ea(l.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const hr=new Map;let Jn=0;function Wl(){const s=window.devicePixelRatio;s!==Jn&&(Jn=s,hr.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function V0(s,e){hr.size||window.addEventListener("resize",Wl),hr.set(s,e)}function K0(s){hr.delete(s),hr.size||window.removeEventListener("resize",Wl)}function Y0(s,e,t){const r=s.canvas,i=r&&Li(r);if(!i)return;const n=kl((l,c)=>{const d=i.clientWidth;t(l,c),d<i.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||n(d,u)});return o.observe(i),V0(s,n),o}function za(s,e,t){t&&t.disconnect(),e==="resize"&&K0(s)}function G0(s,e,t){const r=s.canvas,i=kl(n=>{s.ctx!==null&&t(U0(n,s))},s);return B0(r,e,i),i}class X0 extends zl{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(z0(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Wr])return!1;const r=t[Wr].initial;["height","width"].forEach(n=>{const o=r[n];de(o)?t.removeAttribute(n):t.setAttribute(n,o)});const i=r.style||{};return Object.keys(i).forEach(n=>{t.style[n]=i[n]}),t.width=t.width,delete t[Wr],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:H0,detach:q0,resize:Y0}[t]||G0;i[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:za,detach:za,resize:za}[t]||W0)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return Mm(e,t,r,i)}isAttached(e){const t=e&&Li(e);return!!(t&&t.isConnected)}}function J0(s){return!Ii()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?$0:X0}class jt{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return lr(this.x)&&lr(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(n=>{i[n]=r[n]&&r[n].active()?r[n]._to:this[n]}),i}}function Z0(s,e){const t=s.options.ticks,r=Q0(s),i=Math.min(t.maxTicksLimit||r,r),n=t.major.enabled?tf(e):[],o=n.length,l=n[0],c=n[o-1],d=[];if(o>i)return sf(e,d,n,o/i),d;const u=ef(n,e,i);if(o>0){let h,m;const f=o>1?Math.round((c-l)/(o-1)):null;for(Ir(e,d,u,de(f)?0:l-f,l),h=0,m=o-1;h<m;h++)Ir(e,d,u,n[h],n[h+1]);return Ir(e,d,u,c,de(f)?e.length:c+f),d}return Ir(e,d,u),d}function Q0(s){const e=s.options.offset,t=s._tickSize(),r=s._length/t+(e?0:1),i=s._maxLength/t;return Math.floor(Math.min(r,i))}function ef(s,e,t){const r=rf(s),i=e.length/t;if(!r)return Math.max(i,1);const n=Oh(r);for(let o=0,l=n.length-1;o<l;o++){const c=n[o];if(c>i)return c}return Math.max(i,1)}function tf(s){const e=[];let t,r;for(t=0,r=s.length;t<r;t++)s[t].major&&e.push(t);return e}function sf(s,e,t,r){let i=0,n=t[0],o;for(r=Math.ceil(r),o=0;o<s.length;o++)o===n&&(e.push(s[o]),i++,n=t[i*r])}function Ir(s,e,t,r,i){const n=re(r,0),o=Math.min(re(i,s.length),s.length);let l=0,c,d,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=n;u<0;)l++,u=Math.round(n+l*t);for(d=Math.max(n,0);d<o;d++)d===u&&(e.push(s[d]),l++,u=Math.round(n+l*t))}function rf(s){const e=s.length;let t,r;if(e<2)return!1;for(r=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==r)return!1;return r}const af=s=>s==="left"?"right":s==="right"?"left":s,Zn=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,Qn=(s,e)=>Math.min(e||s,s);function eo(s,e){const t=[],r=s.length/e,i=s.length;let n=0;for(;n<i;n+=r)t.push(s[Math.floor(n)]);return t}function nf(s,e,t){const r=s.ticks.length,i=Math.min(e,r-1),n=s._startPixel,o=s._endPixel,l=1e-6;let c=s.getPixelForTick(i),d;if(!(t&&(r===1?d=Math.max(c-n,o-c):e===0?d=(s.getPixelForTick(1)-c)/2:d=(c-s.getPixelForTick(i-1))/2,c+=i<e?d:-d,c<n-l||c>o+l)))return c}function of(s,e){ue(s,t=>{const r=t.gc,i=r.length/2;let n;if(i>e){for(n=0;n<i;++n)delete t.data[r[n]];r.splice(0,i)}})}function Fs(s){return s.drawTicks?s.tickLength:0}function to(s,e){if(!s.display)return 0;const t=Ie(s.font,e),r=Ze(s.padding);return(ke(s.text)?s.text.length:1)*t.lineHeight+r.height}function lf(s,e){return os(s,{scale:e,type:"scale"})}function cf(s,e,t){return os(s,{tick:t,index:e,type:"tick"})}function df(s,e,t){let r=Ci(s);return(t&&e!=="right"||!t&&e==="right")&&(r=af(r)),r}function uf(s,e,t,r){const{top:i,left:n,bottom:o,right:l,chart:c}=s,{chartArea:d,scales:u}=c;let h=0,m,f,b;const x=o-i,g=l-n;if(s.isHorizontal()){if(f=Oe(r,n,l),le(t)){const p=Object.keys(t)[0],j=t[p];b=u[p].getPixelForValue(j)+x-e}else t==="center"?b=(d.bottom+d.top)/2+x-e:b=Zn(s,t,e);m=l-n}else{if(le(t)){const p=Object.keys(t)[0],j=t[p];f=u[p].getPixelForValue(j)-g+e}else t==="center"?f=(d.left+d.right)/2-g+e:f=Zn(s,t,e);b=Oe(r,o,i),h=t==="left"?-Ne:Ne}return{titleX:f,titleY:b,maxWidth:m,rotation:h}}class As extends jt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=nt(e,Number.POSITIVE_INFINITY),t=nt(t,Number.NEGATIVE_INFINITY),r=nt(r,Number.POSITIVE_INFINITY),i=nt(i,Number.NEGATIVE_INFINITY),{min:nt(e,r),max:nt(t,i),minDefined:Je(e),maxDefined:Je(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:n}=this.getUserBounds(),o;if(i&&n)return{min:t,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),n||(r=Math.max(r,o.max));return t=n&&t>r?r:t,r=i&&t>r?t:r,{min:nt(t,nt(r,t)),max:nt(r,nt(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ge(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:n,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=mm(this,n,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?eo(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Z0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ge(this.options.afterUpdate,[this])}beforeSetDimensions(){ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ge(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ge(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,n;for(r=0,i=e.length;r<i;r++)n=e[r],n.label=ge(t.callback,[n.value,r,e],this)}afterTickToLabelConversion(){ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Qn(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,n=t.maxRotation;let o=i,l,c,d;if(!this._isVisible()||!t.display||i>=n||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,m=u.highest.height,f=Me(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/r:f/(r-1),h+6>l&&(l=f/(r-(e.offset?.5:1)),c=this.maxHeight-Fs(e.grid)-t.padding-to(e.title,this.chart.options.font),d=Math.sqrt(h*h+m*m),o=$h(Math.min(Math.asin(Me((u.highest.height+6)/l,-1,1)),Math.asin(Me(c/d,-1,1))-Math.asin(Me(m/d,-1,1)))),o=Math.max(i,Math.min(n,o))),this.labelRotation=o}afterCalculateLabelRotation(){ge(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ge(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:n}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=to(i,t.options.font);if(l?(e.width=this.maxWidth,e.height=Fs(n)+c):(e.height=this.maxHeight,e.width=Fs(n)+c),r.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:m}=this._getLabelSizes(),f=r.padding*2,b=vt(this.labelRotation),x=Math.cos(b),g=Math.sin(b);if(l){const p=r.mirror?0:g*h.width+x*m.height;e.height=Math.min(this.maxHeight,e.height+p+f)}else{const p=r.mirror?0:x*h.width+g*m.height;e.width=Math.min(this.maxWidth,e.width+p+f)}this._calculatePadding(d,u,g,x)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:n,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,f=0;c?d?(m=i*e.width,f=r*t.height):(m=r*e.height,f=i*t.width):n==="start"?f=t.width:n==="end"?m=e.width:n!=="inner"&&(m=e.width/2,f=t.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;n==="start"?(u=0,h=e.height):n==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ge(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)de(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=eo(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:n}=this,o=[],l=[],c=Math.floor(t/Qn(t,r));let d=0,u=0,h,m,f,b,x,g,p,j,v,N,y;for(h=0;h<t;h+=c){if(b=e[h].label,x=this._resolveTickFontOptions(h),i.font=g=x.string,p=n[g]=n[g]||{data:{},gc:[]},j=x.lineHeight,v=N=0,!de(b)&&!ke(b))v=Tn(i,p.data,p.gc,v,b),N=j;else if(ke(b))for(m=0,f=b.length;m<f;++m)y=b[m],!de(y)&&!ke(y)&&(v=Tn(i,p.data,p.gc,v,y),N+=j);o.push(v),l.push(N),d=Math.max(v,d),u=Math.max(N,u)}of(n,t);const S=o.indexOf(d),_=l.indexOf(u),C=T=>({width:o[T]||0,height:l[T]||0});return{first:C(0),last:C(t-1),widest:C(S),highest:C(_),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return zh(this._alignToPixels?qt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=cf(this.getContext(),e,r))}return this.$context||(this.$context=lf(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=vt(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,l=n?n.widest.width+o:0,c=n?n.highest.height+o:0;return this.isHorizontal()?c*r>l*i?l/r:c/i:c*i<l*r?c/r:l/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:n,position:o,border:l}=i,c=n.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=Fs(n),f=[],b=l.setContext(this.getContext()),x=b.display?b.width:0,g=x/2,p=function(A){return qt(r,A,x)};let j,v,N,y,S,_,C,T,I,F,M,R;if(o==="top")j=p(this.bottom),_=this.bottom-m,T=j-g,F=p(e.top)+g,R=e.bottom;else if(o==="bottom")j=p(this.top),F=e.top,R=p(e.bottom)-g,_=j+g,T=this.top+m;else if(o==="left")j=p(this.right),S=this.right-m,C=j-g,I=p(e.left)+g,M=e.right;else if(o==="right")j=p(this.left),I=e.left,M=p(e.right)-g,S=j+g,C=this.left+m;else if(t==="x"){if(o==="center")j=p((e.top+e.bottom)/2+.5);else if(le(o)){const A=Object.keys(o)[0],O=o[A];j=p(this.chart.scales[A].getPixelForValue(O))}F=e.top,R=e.bottom,_=j+g,T=_+m}else if(t==="y"){if(o==="center")j=p((e.left+e.right)/2);else if(le(o)){const A=Object.keys(o)[0],O=o[A];j=p(this.chart.scales[A].getPixelForValue(O))}S=j-g,C=S-m,I=e.left,M=e.right}const L=re(i.ticks.maxTicksLimit,h),D=Math.max(1,Math.ceil(h/L));for(v=0;v<h;v+=D){const A=this.getContext(v),O=n.setContext(A),$=l.setContext(A),E=O.lineWidth,G=O.color,z=$.dash||[],K=$.dashOffset,B=O.tickWidth,W=O.tickColor,X=O.tickBorderDash||[],V=O.tickBorderDashOffset;N=nf(this,v,c),N!==void 0&&(y=qt(r,N,E),d?S=C=I=M=y:_=T=F=R=y,f.push({tx1:S,ty1:_,tx2:C,ty2:T,x1:I,y1:F,x2:M,y2:R,width:E,color:G,borderDash:z,borderDashOffset:K,tickWidth:B,tickColor:W,tickBorderDash:X,tickBorderDashOffset:V}))}return this._ticksLength=h,this._borderValue=j,f}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:n}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=n,m=Fs(r.grid),f=m+u,b=h?-u:f,x=-vt(this.labelRotation),g=[];let p,j,v,N,y,S,_,C,T,I,F,M,R="middle";if(i==="top")S=this.bottom-b,_=this._getXAxisLabelAlignment();else if(i==="bottom")S=this.top+b,_=this._getXAxisLabelAlignment();else if(i==="left"){const D=this._getYAxisLabelAlignment(m);_=D.textAlign,y=D.x}else if(i==="right"){const D=this._getYAxisLabelAlignment(m);_=D.textAlign,y=D.x}else if(t==="x"){if(i==="center")S=(e.top+e.bottom)/2+f;else if(le(i)){const D=Object.keys(i)[0],A=i[D];S=this.chart.scales[D].getPixelForValue(A)+f}_=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")y=(e.left+e.right)/2-f;else if(le(i)){const D=Object.keys(i)[0],A=i[D];y=this.chart.scales[D].getPixelForValue(A)}_=this._getYAxisLabelAlignment(m).textAlign}t==="y"&&(c==="start"?R="top":c==="end"&&(R="bottom"));const L=this._getLabelSizes();for(p=0,j=l.length;p<j;++p){v=l[p],N=v.label;const D=n.setContext(this.getContext(p));C=this.getPixelForTick(p)+n.labelOffset,T=this._resolveTickFontOptions(p),I=T.lineHeight,F=ke(N)?N.length:1;const A=F/2,O=D.color,$=D.textStrokeColor,E=D.textStrokeWidth;let G=_;o?(y=C,_==="inner"&&(p===j-1?G=this.options.reverse?"left":"right":p===0?G=this.options.reverse?"right":"left":G="center"),i==="top"?d==="near"||x!==0?M=-F*I+I/2:d==="center"?M=-L.highest.height/2-A*I+I:M=-L.highest.height+I/2:d==="near"||x!==0?M=I/2:d==="center"?M=L.highest.height/2-A*I:M=L.highest.height-F*I,h&&(M*=-1),x!==0&&!D.showLabelBackdrop&&(y+=I/2*Math.sin(x))):(S=C,M=(1-F)*I/2);let z;if(D.showLabelBackdrop){const K=Ze(D.backdropPadding),B=L.heights[p],W=L.widths[p];let X=M-K.top,V=0-K.left;switch(R){case"middle":X-=B/2;break;case"bottom":X-=B;break}switch(_){case"center":V-=W/2;break;case"right":V-=W;break;case"inner":p===j-1?V-=W:p>0&&(V-=W/2);break}z={left:V,top:X,width:W+K.width,height:B+K.height,color:D.backdropColor}}g.push({label:N,font:T,textOffset:M,options:{rotation:x,color:O,strokeColor:$,strokeWidth:E,textAlign:G,textBaseline:R,translation:[y,S],backdrop:z}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-vt(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:n}}=this.options,o=this._getLabelSizes(),l=e+n,c=o.widest.width;let d,u;return t==="left"?i?(u=this.right+n,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u=this.left)):t==="right"?i?(u=this.left+n,r==="near"?d="right":r==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,r==="near"?d="left":r==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:n,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,n,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(n=>n.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const l=(c,d,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(t.display)for(n=0,o=i.length;n<o;++n){const c=i[n];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,n=r.setContext(this.getContext()),o=r.display?n.width:0;if(!o)return;const l=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,m;this.isHorizontal()?(d=qt(e,this.left,o)-o/2,u=qt(e,this.right,l)+l/2,h=m=c):(h=qt(e,this.top,o)-o/2,m=qt(e,this.bottom,l)+l/2,d=u=c),t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.beginPath(),t.moveTo(d,h),t.lineTo(u,m),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Pi(r,i);const n=this.getLabelItems(e);for(const o of n){const l=o.options,c=o.font,d=o.label,u=o.textOffset;ur(r,d,0,u,c,l)}i&&Ai(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const n=Ie(r.font),o=Ze(r.padding),l=r.align;let c=n.lineHeight/2;t==="bottom"||t==="center"||le(t)?(c+=o.bottom,ke(r.text)&&(c+=n.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:m}=uf(this,c,t,l);ur(e,r.text,0,0,n,{color:r.color,maxWidth:h,rotation:m,textAlign:df(l,t,i),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=re(e.grid&&e.grid.z,-1),i=re(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==As.prototype.draw?[{z:t,draw:n=>{this.draw(n)}}]:[{z:r,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let n,o;for(n=0,o=t.length;n<o;++n){const l=t[n];l[r]===this.id&&(!e||l.type===e)&&i.push(l)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ie(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Lr{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;ff(t)&&(r=this.register(t));const i=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in i||(i[n]=e,hf(e,o,r),this.override&&ve.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in ve[i]&&(delete ve[i][r],this.override&&delete is[r])}}function hf(s,e,t){const r=nr(Object.create(null),[t?ve.get(t):{},ve.get(e),s.defaults]);ve.set(e,r),s.defaultRoutes&&mf(e,s.defaultRoutes),s.descriptors&&ve.describe(e,s.descriptors)}function mf(s,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),n=[s].concat(r).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");ve.route(n,i,c,l)})}function ff(s){return"id"in s&&"defaults"in s}class gf{constructor(){this.controllers=new Lr(ha,"datasets",!0),this.elements=new Lr(jt,"elements"),this.plugins=new Lr(Object,"plugins"),this.scales=new Lr(As,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const n=r||this._getRegistryForType(i);r||n.isForType(i)||n===this.plugins&&i.id?this._exec(e,n,i):ue(i,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,r){const i=Ni(e);ge(r["before"+i],[],r),t[e](r),ge(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ct=new gf;class xf{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(n,e,t,r);return t==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const n of e){const o=n.plugin,l=o[r],c=[t,i,n.options];if(ge(l,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){de(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=re(r.options&&r.options.plugins,{}),n=bf(r);return i===!1&&!t?[]:vf(e,n,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(n,o)=>n.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function bf(s){const e={},t=[],r=Object.keys(ct.plugins.items);for(let n=0;n<r.length;n++)t.push(ct.getPlugin(r[n]));const i=s.plugins||[];for(let n=0;n<i.length;n++){const o=i[n];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function pf(s,e){return!e&&s===!1?null:s===!0?{}:s}function vf(s,{plugins:e,localIds:t},r,i){const n=[],o=s.getContext();for(const l of e){const c=l.id,d=pf(r[c],i);d!==null&&n.push({plugin:l,options:jf(s.config,{plugin:l,local:t[c]},d,o)})}return n}function jf(s,{plugin:e,local:t},r,i){const n=s.pluginScopeKeys(e),o=s.getOptionScopes(r,n);return t&&e.defaults&&o.push(e.defaults),s.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ui(s,e){const t=ve.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function wf(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function yf(s,e){return s===e?"_index_":"_value_"}function so(s){if(s==="x"||s==="y"||s==="r")return s}function kf(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function hi(s,...e){if(so(s))return s;for(const t of e){const r=t.axis||kf(t.position)||s.length>1&&so(s[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function ro(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function _f(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===s||r.yAxisID===s);if(t.length)return ro(s,"x",t[0])||ro(s,"y",t[0])}return{}}function Nf(s,e){const t=is[s.type]||{scales:{}},r=e.scales||{},i=ui(s.type,e),n=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!le(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=hi(o,l,_f(o,s),ve.scales[l.type]),d=yf(c,i),u=t.scales||{};n[o]=Ys(Object.create(null),[{axis:c},l,u[c],u[d]])}),s.data.datasets.forEach(o=>{const l=o.type||s.type,c=o.indexAxis||ui(l,e),u=(is[l]||{}).scales||{};Object.keys(u).forEach(h=>{const m=wf(h,c),f=o[m+"AxisID"]||m;n[f]=n[f]||Object.create(null),Ys(n[f],[{axis:m},r[f],u[h]])})}),Object.keys(n).forEach(o=>{const l=n[o];Ys(l,[ve.scales[l.type],ve.scale])}),n}function Ul(s){const e=s.options||(s.options={});e.plugins=re(e.plugins,{}),e.scales=Nf(s,e)}function Hl(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function Sf(s){return s=s||{},s.data=Hl(s.data),Ul(s),s}const ao=new Map,ql=new Set;function $r(s,e){let t=ao.get(s);return t||(t=e(),ao.set(s,t),ql.add(t)),t}const zs=(s,e,t)=>{const r=as(e,t);r!==void 0&&s.add(r)};class Cf{constructor(e){this._config=Sf(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Hl(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ul(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $r(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return $r(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return $r(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return $r(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:n}=this,o=this._cachedScopes(e,r),l=o.get(t);if(l)return l;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>zs(c,e,h))),u.forEach(h=>zs(c,i,h)),u.forEach(h=>zs(c,is[n]||{},h)),u.forEach(h=>zs(c,ve,h)),u.forEach(h=>zs(c,ci,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),ql.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,is[t]||{},ve.datasets[t]||{},{type:t},ve,ci]}resolveNamedOptions(e,t,r,i=[""]){const n={$shared:!0},{resolver:o,subPrefixes:l}=io(this._resolverCache,e,i);let c=o;if(Ef(o,t)){n.$shared=!1,r=It(r)?r():r;const d=this.createResolver(e,r,l);c=Cs(o,r,d)}for(const d of t)n[d]=c[d];return n}createResolver(e,t,r=[""],i){const{resolver:n}=io(this._resolverCache,e,r);return le(t)?Cs(n,t,void 0,i):n}}function io(s,e,t){let r=s.get(e);r||(r=new Map,s.set(e,r));const i=t.join();let n=r.get(i);return n||(n={resolver:Ri(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,n)),n}const Tf=s=>le(s)&&Object.getOwnPropertyNames(s).some(e=>It(s[e]));function Ef(s,e){const{isScriptable:t,isIndexable:r}=Cl(s);for(const i of e){const n=t(i),o=r(i),l=(o||n)&&s[i];if(n&&(It(l)||Tf(l))||o&&ke(l))return!0}return!1}var Pf="4.5.0";const Af=["top","bottom","left","right","chartArea"];function no(s,e){return s==="top"||s==="bottom"||Af.indexOf(s)===-1&&e==="x"}function oo(s,e){return function(t,r){return t[s]===r[s]?t[e]-r[e]:t[s]-r[s]}}function lo(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ge(t&&t.onComplete,[s],e)}function Df(s){const e=s.chart,t=e.options.animation;ge(t&&t.onProgress,[s],e)}function Vl(s){return Ii()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Ur={},co=s=>{const e=Vl(s);return Object.values(Ur).filter(t=>t.canvas===e).pop()};function Rf(s,e,t){const r=Object.keys(s);for(const i of r){const n=+i;if(n>=e){const o=s[i];delete s[i],(t>0||n>e)&&(s[n+t]=o)}}}function Of(s,e,t,r){return!t||s.type==="mouseout"?null:r?e:s}let fa=class{static defaults=ve;static instances=Ur;static overrides=is;static registry=ct;static version=Pf;static getChart=co;static register(...e){ct.add(...e),uo()}static unregister(...e){ct.remove(...e),uo()}constructor(e,t){const r=this.config=new Cf(t),i=Vl(e),n=co(i);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||J0(i)),this.platform.updateConfig(r);const l=this.platform.acquireContext(i,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=Nh(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xf,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Hh(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Ur[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ft.listen(this,"complete",lo),ft.listen(this,"progress",Df),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:n}=this;return de(e)?t&&n?n:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ct}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Dn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return En(this.canvas,this.ctx),this}stop(){return ft.stop(this),this}resize(e,t){ft.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,n=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,n),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Dn(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ge(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ue(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let n=[];t&&(n=n.concat(Object.keys(t).map(o=>{const l=t[o],c=hi(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),ue(n,o=>{const l=o.options,c=l.id,d=hi(c,l),u=re(l.type,o.dtype);(l.position===void 0||no(l.position,d)!==no(o.dposition))&&(l.position=o.dposition),i[c]=!0;let h=null;if(c in r&&r[c].type===u)h=r[c];else{const m=ct.getScale(u);h=new m({id:c,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,e)}),ue(i,(o,l)=>{o||delete r[l]}),ue(r,o=>{Ge.configure(this,o,o.options),Ge.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,n)=>i.index-n.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(oo("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(n=>n===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const n=t[r];let o=this.getDatasetMeta(r);const l=n.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=n.indexAxis||ui(l,this.options),o.order=n.order||0,o.index=r,o.label=""+n.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=ct.getController(l),{datasetElementType:d,dataElementType:u}=ve.datasets[l];Object.assign(c,{dataElementType:ct.getElement(u),datasetElementType:d&&ct.getElement(d)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ue(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),m=!i&&n.indexOf(h)===-1;h.buildOrUpdateElements(m),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ue(n,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(oo("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ue(this.scales,e=>{Ge.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!vn(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:n}of t){const o=r==="_removeElements"?-n:n;Rf(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=n=>new Set(e.filter(o=>o[0]===n).map((o,l)=>l+","+o.splice(1).join(","))),i=r(0);for(let n=1;n<t;n++)if(!vn(i,r(n)))return;return Array.from(i).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ge.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],ue(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,n)=>{i._idx=n}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,It(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ft.has(this)?this.attached&&!ft.running(this)&&ft.start(this):(this.draw(),lo({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,n;for(i=0,n=t.length;i<n;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=Xm(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Pi(t,i),e.controller.draw(),i&&Ai(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return dr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const n=P0.modes[t];return typeof n=="function"?n(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(n=>n&&n._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=os(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",n=this.getDatasetMeta(e),o=n.controller._resolveAnimations(void 0,i);or(t)?(n.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(n,{visible:r}),this.update(l=>l.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ft.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),En(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ur[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(n,o)=>{t.addEventListener(this,n,o),e[n]=o},i=(n,o,l)=>{n.offsetX=o,n.offsetY=l,this._eventHandler(n)};ue(this.options.events,n=>r(n,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},i=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},n=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{i("attach",l),this.attached=!0,this.resize(),r("resize",n),r("detach",o)};o=()=>{this.attached=!1,i("resize",n),this._stop(),this._resize(0,0),r("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){ue(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ue(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let n,o,l,c;for(t==="dataset"&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+i+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:n,index:o})=>{const l=this.getDatasetMeta(n);if(!l)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:l.data[o],index:o}});!Gr(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,n=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=n(t,e),l=r?e:n(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const n=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(n||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:n}=this,o=t,l=this._getActiveElements(e,i,r,o),c=Ah(e),d=Of(e,this._lastEvent,r,c);r&&(this._lastEvent=null,ge(n.onHover,[e,l,this],this),c&&ge(n.onClick,[e,l,this],this));const u=!Gr(l,i);return(u||t)&&(this._active=l,this._updateHoverStyles(l,i,t)),this._lastEvent=d,u}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,i)}};function uo(){return ue(fa.instances,s=>s._plugins.invalidate())}function Mf(s,e,t){const{startAngle:r,x:i,y:n,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,st(r-t));if(s.beginPath(),s.arc(i,n,o-d/2,r+h/2,t-h/2),l>0){const m=Math.min(d/l,st(r-t));s.arc(i,n,l+d/2,t-m/2,r+m/2,!0)}else{const m=Math.min(d/2,o*st(r-t));if(u==="round")s.arc(i,n,m,t-he/2,r+he/2,!0);else if(u==="bevel"){const f=2*m*m,b=-f*Math.cos(t+he/2)+i,x=-f*Math.sin(t+he/2)+n,g=f*Math.cos(r+he/2)+i,p=f*Math.sin(r+he/2)+n;s.lineTo(b,x),s.lineTo(g,p)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function If(s,e,t){const{startAngle:r,pixelMargin:i,x:n,y:o,outerRadius:l,innerRadius:c}=e;let d=i/l;s.beginPath(),s.arc(n,o,l,r-d,t+d),c>i?(d=i/c,s.arc(n,o,c,t+d,r-d,!0)):s.arc(n,o,i,t+Ne,r-Ne),s.closePath(),s.clip()}function Lf(s){return Di(s,["outerStart","outerEnd","innerStart","innerEnd"])}function $f(s,e,t,r){const i=Lf(s.options.borderRadius),n=(t-e)/2,o=Math.min(n,r*e/2),l=c=>{const d=(t-Math.min(n,c))*r/2;return Me(c,0,Math.min(n,d))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:Me(i.innerStart,0,o),innerEnd:Me(i.innerEnd,0,o)}}function vs(s,e,t,r){return{x:t+s*Math.cos(e),y:r+s*Math.sin(e)}}function ta(s,e,t,r,i,n){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-d,0),m=u>0?u+r+t+d:0;let f=0;const b=i-c;if(r){const D=u>0?u-r:0,A=h>0?h-r:0,O=(D+A)/2,$=O!==0?b*O/(O+r):b;f=(b-$)/2}const x=Math.max(.001,b*h-t/he)/h,g=(b-x)/2,p=c+g+f,j=i-g-f,{outerStart:v,outerEnd:N,innerStart:y,innerEnd:S}=$f(e,m,h,j-p),_=h-v,C=h-N,T=p+v/_,I=j-N/C,F=m+y,M=m+S,R=p+y/F,L=j-S/M;if(s.beginPath(),n){const D=(T+I)/2;if(s.arc(o,l,h,T,D),s.arc(o,l,h,D,I),N>0){const E=vs(C,I,o,l);s.arc(E.x,E.y,N,I,j+Ne)}const A=vs(M,j,o,l);if(s.lineTo(A.x,A.y),S>0){const E=vs(M,L,o,l);s.arc(E.x,E.y,S,j+Ne,L+Math.PI)}const O=(j-S/m+(p+y/m))/2;if(s.arc(o,l,m,j-S/m,O,!0),s.arc(o,l,m,O,p+y/m,!0),y>0){const E=vs(F,R,o,l);s.arc(E.x,E.y,y,R+Math.PI,p-Ne)}const $=vs(_,p,o,l);if(s.lineTo($.x,$.y),v>0){const E=vs(_,T,o,l);s.arc(E.x,E.y,v,p-Ne,T)}}else{s.moveTo(o,l);const D=Math.cos(T)*h+o,A=Math.sin(T)*h+l;s.lineTo(D,A);const O=Math.cos(I)*h+o,$=Math.sin(I)*h+l;s.lineTo(O,$)}s.closePath()}function Ff(s,e,t,r,i){const{fullCircles:n,startAngle:o,circumference:l}=e;let c=e.endAngle;if(n){ta(s,e,t,r,c,i);for(let d=0;d<n;++d)s.fill();isNaN(l)||(c=o+(l%pe||pe))}return ta(s,e,t,r,c,i),s.fill(),c}function zf(s,e,t,r,i){const{fullCircles:n,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:m,borderRadius:f}=c,b=c.borderAlign==="inner";if(!d)return;s.setLineDash(h||[]),s.lineDashOffset=m,b?(s.lineWidth=d*2,s.lineJoin=u||"round"):(s.lineWidth=d,s.lineJoin=u||"bevel");let x=e.endAngle;if(n){ta(s,e,t,r,x,i);for(let g=0;g<n;++g)s.stroke();isNaN(l)||(x=o+(l%pe||pe))}b&&If(s,e,x),c.selfJoin&&x-o>=he&&f===0&&u!=="miter"&&Mf(s,e,x),n||(ta(s,e,t,r,x,i),s.stroke())}class Bf extends jt{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.getProps(["x","y"],r),{angle:n,distance:o}=vl(i,{x:e,y:t}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,f=re(h,c-l),b=cr(n,l,c)&&l!==c,x=f>=pe||b,g=Pt(o,d+m,u+m);return x&&g}getCenterPoint(e){const{x:t,y:r,startAngle:i,endAngle:n,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(i+n)/2,h=(o+l+d+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,i=(t.offset||0)/4,n=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>pe?Math.floor(r/pe):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(he,r||0)),d=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Ff(e,this,d,n,o),zf(e,this,d,n,o),e.restore()}}function Kl(s,e,t=e){s.lineCap=re(t.borderCapStyle,e.borderCapStyle),s.setLineDash(re(t.borderDash,e.borderDash)),s.lineDashOffset=re(t.borderDashOffset,e.borderDashOffset),s.lineJoin=re(t.borderJoinStyle,e.borderJoinStyle),s.lineWidth=re(t.borderWidth,e.borderWidth),s.strokeStyle=re(t.borderColor,e.borderColor)}function Wf(s,e,t){s.lineTo(t.x,t.y)}function Uf(s){return s.stepped?am:s.tension||s.cubicInterpolationMode==="monotone"?im:Wf}function Yl(s,e,t={}){const r=s.length,{start:i=0,end:n=r-1}=t,{start:o,end:l}=e,c=Math.max(i,o),d=Math.min(n,l),u=i<o&&n<o||i>l&&n>l;return{count:r,start:c,loop:e.loop,ilen:d<c&&!u?r+d-c:d-c}}function Hf(s,e,t,r){const{points:i,options:n}=e,{count:o,start:l,loop:c,ilen:d}=Yl(i,t,r),u=Uf(n);let{move:h=!0,reverse:m}=r||{},f,b,x;for(f=0;f<=d;++f)b=i[(l+(m?d-f:f))%o],!b.skip&&(h?(s.moveTo(b.x,b.y),h=!1):u(s,x,b,m,n.stepped),x=b);return c&&(b=i[(l+(m?d:0))%o],u(s,x,b,m,n.stepped)),!!c}function qf(s,e,t,r){const i=e.points,{count:n,start:o,ilen:l}=Yl(i,t,r),{move:c=!0,reverse:d}=r||{};let u=0,h=0,m,f,b,x,g,p;const j=N=>(o+(d?l-N:N))%n,v=()=>{x!==g&&(s.lineTo(u,g),s.lineTo(u,x),s.lineTo(u,p))};for(c&&(f=i[j(0)],s.moveTo(f.x,f.y)),m=0;m<=l;++m){if(f=i[j(m)],f.skip)continue;const N=f.x,y=f.y,S=N|0;S===b?(y<x?x=y:y>g&&(g=y),u=(h*u+N)/++h):(v(),s.lineTo(N,y),b=S,h=0,x=g=y),p=y}v()}function mi(s){const e=s.options,t=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?qf:Hf}function Vf(s){return s.stepped?Lm:s.tension||s.cubicInterpolationMode==="monotone"?$m:Gt}function Kf(s,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),Kl(s,e.options),s.stroke(i)}function Yf(s,e,t,r){const{segments:i,options:n}=e,o=mi(e);for(const l of i)Kl(s,n,l.style),s.beginPath(),o(s,e,l,{start:t,end:t+r-1})&&s.closePath(),s.stroke()}const Gf=typeof Path2D=="function";function Xf(s,e,t,r){Gf&&!e.options.segment?Kf(s,e,t,r):Yf(s,e,t,r)}class Jf extends jt{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Em(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Vm(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],n=this.points,o=Um(this,{property:t,start:i,end:i});if(!o.length)return;const l=[],c=Vf(r);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:m}=o[d],f=n[h],b=n[m];if(f===b){l.push(f);continue}const x=Math.abs((i-f[t])/(b[t]-f[t])),g=c(f,b,x,r.stepped);g[t]=e[t],l.push(g)}return l.length===1?l[0]:l}pathSegment(e,t,r){return mi(this)(e,this,t,r)}path(e,t,r){const i=this.segments,n=mi(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const l of i)o&=n(e,this,l,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),Xf(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ho(s,e,t,r){const i=s.options,{[t]:n}=s.getProps([t],r);return Math.abs(e-n)<i.radius+i.hitRadius}class Zf extends jt{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:n,y:o}=this.getProps(["x","y"],r);return Math.pow(e-n,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return ho(this,e,"x",t)}inYRange(e,t){return ho(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!dr(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,di(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Gl(s,e){const{x:t,y:r,base:i,width:n,height:o}=s.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return s.horizontal?(h=o/2,l=Math.min(t,i),c=Math.max(t,i),d=r-h,u=r+h):(h=n/2,l=t-h,c=t+h,d=Math.min(r,i),u=Math.max(r,i)),{left:l,top:d,right:c,bottom:u}}function At(s,e,t,r){return s?0:Me(e,t,r)}function Qf(s,e,t){const r=s.options.borderWidth,i=s.borderSkipped,n=Sl(r);return{t:At(i.top,n.top,0,t),r:At(i.right,n.right,0,e),b:At(i.bottom,n.bottom,0,t),l:At(i.left,n.left,0,e)}}function eg(s,e,t){const{enableBorderRadius:r}=s.getProps(["enableBorderRadius"]),i=s.options.borderRadius,n=ks(i),o=Math.min(e,t),l=s.borderSkipped,c=r||le(i);return{topLeft:At(!c||l.top||l.left,n.topLeft,0,o),topRight:At(!c||l.top||l.right,n.topRight,0,o),bottomLeft:At(!c||l.bottom||l.left,n.bottomLeft,0,o),bottomRight:At(!c||l.bottom||l.right,n.bottomRight,0,o)}}function tg(s){const e=Gl(s),t=e.right-e.left,r=e.bottom-e.top,i=Qf(s,t/2,r/2),n=eg(s,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:n},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,n.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(i.b,i.r))}}}}function Ba(s,e,t,r){const i=e===null,n=t===null,l=s&&!(i&&n)&&Gl(s,r);return l&&(i||Pt(e,l.left,l.right))&&(n||Pt(t,l.top,l.bottom))}function sg(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function rg(s,e){s.rect(e.x,e.y,e.w,e.h)}function Wa(s,e,t={}){const r=s.x!==t.x?-e:0,i=s.y!==t.y?-e:0,n=(s.x+s.w!==t.x+t.w?e:0)-r,o=(s.y+s.h!==t.y+t.h?e:0)-i;return{x:s.x+r,y:s.y+i,w:s.w+n,h:s.h+o,radius:s.radius}}class ag extends jt{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:n,outer:o}=tg(this),l=sg(o.radius)?Zr:rg;e.save(),(o.w!==n.w||o.h!==n.h)&&(e.beginPath(),l(e,Wa(o,t,n)),e.clip(),l(e,Wa(n,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),l(e,Wa(n,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return Ba(this,e,t,r)}inXRange(e,t){return Ba(this,e,null,t)}inYRange(e,t){return Ba(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(t+i)/2:t,y:n?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const mo=(s,e)=>{let{boxHeight:t=e,boxWidth:r=e}=s;return s.usePointStyle&&(t=Math.min(t,e),r=s.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},ig=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class fo extends jt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ge(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ie(r.font),n=i.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=mo(r,n);let d,u;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,n,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,i,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:n,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=i+l;let h=e;n.textAlign="left",n.textBaseline="middle";let m=-1,f=-u;return this.legendItems.forEach((b,x)=>{const g=r+t/2+n.measureText(b.text).width;(x===0||d[d.length-1]+g+2*l>o)&&(h+=u,d[d.length-(x>0?0:1)]=0,f+=u,m++),c[x]={left:0,top:f,row:m,width:g,height:i},d[d.length-1]+=g+l}),h}_fitCols(e,t,r,i){const{ctx:n,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,m=0,f=0,b=0,x=0;return this.legendItems.forEach((g,p)=>{const{itemWidth:j,itemHeight:v}=ng(r,t,n,g,i);p>0&&f+v+2*l>u&&(h+=m+l,d.push({width:m,height:f}),b+=m+l,x++,m=f=0),c[p]={left:b,top:f,col:x,width:j,height:v},m=Math.max(m,j),f+=v+l}),h+=m,d.push({width:m,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:n}}=this,o=_s(n,this.left,this.width);if(this.isHorizontal()){let l=0,c=Oe(r,this.left+i,this.right-this.lineWidths[l]);for(const d of t)l!==d.row&&(l=d.row,c=Oe(r,this.left+i,this.right-this.lineWidths[l])),d.top+=this.top+e+i,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+i}else{let l=0,c=Oe(r,this.top+e+i,this.bottom-this.columnSizes[l].height);for(const d of t)d.col!==l&&(l=d.col,c=Oe(r,this.top+e+i,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+i,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pi(e,this),this._draw(),Ai(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:n,labels:o}=e,l=ve.color,c=_s(e.rtl,this.left,this.width),d=Ie(o.font),{padding:u}=o,h=d.size,m=h/2;let f;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:b,boxHeight:x,itemHeight:g}=mo(o,h),p=function(S,_,C){if(isNaN(b)||b<=0||isNaN(x)||x<0)return;i.save();const T=re(C.lineWidth,1);if(i.fillStyle=re(C.fillStyle,l),i.lineCap=re(C.lineCap,"butt"),i.lineDashOffset=re(C.lineDashOffset,0),i.lineJoin=re(C.lineJoin,"miter"),i.lineWidth=T,i.strokeStyle=re(C.strokeStyle,l),i.setLineDash(re(C.lineDash,[])),o.usePointStyle){const I={radius:x*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:T},F=c.xPlus(S,b/2),M=_+m;Nl(i,I,F,M,o.pointStyleWidth&&b)}else{const I=_+Math.max((h-x)/2,0),F=c.leftForLtr(S,b),M=ks(C.borderRadius);i.beginPath(),Object.values(M).some(R=>R!==0)?Zr(i,{x:F,y:I,w:b,h:x,radius:M}):i.rect(F,I,b,x),i.fill(),T!==0&&i.stroke()}i.restore()},j=function(S,_,C){ur(i,C.text,S,_+g/2,d,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},v=this.isHorizontal(),N=this._computeTitleHeight();v?f={x:Oe(n,this.left+u,this.right-r[0]),y:this.top+u+N,line:0}:f={x:this.left+u,y:Oe(n,this.top+N+u,this.bottom-t[0].height),line:0},Dl(this.ctx,e.textDirection);const y=g+u;this.legendItems.forEach((S,_)=>{i.strokeStyle=S.fontColor,i.fillStyle=S.fontColor;const C=i.measureText(S.text).width,T=c.textAlign(S.textAlign||(S.textAlign=o.textAlign)),I=b+m+C;let F=f.x,M=f.y;c.setWidth(this.width),v?_>0&&F+I+u>this.right&&(M=f.y+=y,f.line++,F=f.x=Oe(n,this.left+u,this.right-r[f.line])):_>0&&M+y>this.bottom&&(F=f.x=F+t[f.line].width+u,f.line++,M=f.y=Oe(n,this.top+N+u,this.bottom-t[f.line].height));const R=c.x(F);if(p(R,M,S),F=qh(T,F+b+m,v?F+I:this.right,e.rtl),j(c.x(F),M,S),v)f.x+=I+u;else if(typeof S.text!="string"){const L=d.lineHeight;f.y+=Xl(S,L)+u}else f.y+=y}),Rl(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Ie(t.font),i=Ze(t.padding);if(!t.display)return;const n=_s(e.rtl,this.left,this.width),o=this.ctx,l=t.position,c=r.size/2,d=i.top+c;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,h=Oe(e.align,h,this.right-m);else{const b=this.columnSizes.reduce((x,g)=>Math.max(x,g.height),0);u=d+Oe(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}const f=Oe(l,h,h+m);o.textAlign=n.textAlign(Ci(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,ur(o,t.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,t=Ie(e.font),r=Ze(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,n;if(Pt(e,this.left,this.right)&&Pt(t,this.top,this.bottom)){for(n=this.legendHitBoxes,r=0;r<n.length;++r)if(i=n[r],Pt(e,i.left,i.left+i.width)&&Pt(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!cg(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,n=ig(i,r);i&&!n&&ge(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!n&&ge(t.onHover,[e,r,this],this)}else r&&ge(t.onClick,[e,r,this],this)}}function ng(s,e,t,r,i){const n=og(r,s,e,t),o=lg(i,r,e.lineHeight);return{itemWidth:n,itemHeight:o}}function og(s,e,t,r){let i=s.text;return i&&typeof i!="string"&&(i=i.reduce((n,o)=>n.length>o.length?n:o)),e+t.size/2+r.measureText(i).width}function lg(s,e,t){let r=s;return typeof e.text!="string"&&(r=Xl(e,t)),r}function Xl(s,e){const t=s.text?s.text.length:0;return e*t}function cg(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var dg={id:"legend",_element:fo,start(s,e,t){const r=s.legend=new fo({ctx:s.ctx,options:t,chart:s});Ge.configure(s,r,t),Ge.addBox(s,r)},stop(s){Ge.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,t){const r=s.legend;Ge.configure(s,r,t),r.options=t},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:n,useBorderRadius:o,borderRadius:l}}=s.legend.options;return s._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),u=Ze(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:n,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Jl extends jt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=ke(r.text)?r.text.length:1;this._padding=Ze(r.padding);const n=i*Ie(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:n,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=Oe(l,r,n),h=t+e,d=n-r):(o.position==="left"?(u=r+e,h=Oe(l,i,t),c=he*-.5):(u=n-e,h=Oe(l,t,i),c=he*.5),d=i-t),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Ie(t.font),n=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(n);ur(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:d,textAlign:Ci(t.align),textBaseline:"middle",translation:[o,l]})}}function ug(s,e){const t=new Jl({ctx:s.ctx,options:e,chart:s});Ge.configure(s,t,e),Ge.addBox(s,t),s.titleBlock=t}var hg={id:"title",_element:Jl,start(s,e,t){ug(s,t)},stop(s){const e=s.titleBlock;Ge.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,t){const r=s.titleBlock;Ge.configure(s,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hs={average(s){if(!s.length)return!1;let e,t,r=new Set,i=0,n=0;for(e=0,t=s.length;e<t;++e){const l=s[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),i+=c.y,++n}}return n===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:i/n}},nearest(s,e){if(!s.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,n,o,l;for(n=0,o=s.length;n<o;++n){const c=s[n].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=li(e,d);u<i&&(i=u,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function ot(s,e){return e&&(ke(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function gt(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function mg(s,e){const{element:t,datasetIndex:r,index:i}=e,n=s.getDatasetMeta(r).controller,{label:o,value:l}=n.getLabelAndValue(i);return{chart:s,label:o,parsed:n.getParsed(i),raw:s.data.datasets[r].data[i],formattedValue:l,dataset:n.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function go(s,e){const t=s.chart.ctx,{body:r,footer:i,title:n}=s,{boxWidth:o,boxHeight:l}=e,c=Ie(e.bodyFont),d=Ie(e.titleFont),u=Ie(e.footerFont),h=n.length,m=i.length,f=r.length,b=Ze(e.padding);let x=b.height,g=0,p=r.reduce((N,y)=>N+y.before.length+y.lines.length+y.after.length,0);if(p+=s.beforeBody.length+s.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),p){const N=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=f*N+(p-f)*c.lineHeight+(p-1)*e.bodySpacing}m&&(x+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let j=0;const v=function(N){g=Math.max(g,t.measureText(N).width+j)};return t.save(),t.font=d.string,ue(s.title,v),t.font=c.string,ue(s.beforeBody.concat(s.afterBody),v),j=e.displayColors?o+2+e.boxPadding:0,ue(r,N=>{ue(N.before,v),ue(N.lines,v),ue(N.after,v)}),j=0,t.font=u.string,ue(s.footer,v),t.restore(),g+=b.width,{width:g,height:x}}function fg(s,e){const{y:t,height:r}=e;return t<r/2?"top":t>s.height-r/2?"bottom":"center"}function gg(s,e,t,r){const{x:i,width:n}=r,o=t.caretSize+t.caretPadding;if(s==="left"&&i+n+o>e.width||s==="right"&&i-n-o<0)return!0}function xg(s,e,t,r){const{x:i,width:n}=t,{width:o,chartArea:{left:l,right:c}}=s;let d="center";return r==="center"?d=i<=(l+c)/2?"left":"right":i<=n/2?d="left":i>=o-n/2&&(d="right"),gg(d,s,e,t)&&(d="center"),d}function xo(s,e,t){const r=t.yAlign||e.yAlign||fg(s,t);return{xAlign:t.xAlign||e.xAlign||xg(s,e,t,r),yAlign:r}}function bg(s,e){let{x:t,width:r}=s;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function pg(s,e,t){let{y:r,height:i}=s;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function bo(s,e,t,r){const{caretSize:i,caretPadding:n,cornerRadius:o}=s,{xAlign:l,yAlign:c}=t,d=i+n,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:f}=ks(o);let b=bg(e,l);const x=pg(e,c,d);return c==="center"?l==="left"?b+=d:l==="right"&&(b-=d):l==="left"?b-=Math.max(u,m)+i:l==="right"&&(b+=Math.max(h,f)+i),{x:Me(b,0,r.width-e.width),y:Me(x,0,r.height-e.height)}}function Fr(s,e,t){const r=Ze(t.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-r.right:s.x+r.left}function po(s){return ot([],gt(s))}function vg(s,e,t){return os(s,{tooltip:e,tooltipItems:t,type:"tooltip"})}function vo(s,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?s.override(t):s}const Zl={beforeTitle:ht,title(s){if(s.length>0){const e=s[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:ht,beforeBody:ht,beforeLabel:ht,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const t=s.formattedValue;return de(t)||(e+=t),e},labelColor(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ht,afterBody:ht,beforeFooter:ht,footer:ht,afterFooter:ht};function We(s,e,t,r){const i=s[e].call(t,r);return typeof i>"u"?Zl[e].call(t,r):i}class jo extends jt{static positioners=Hs;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,n=new Ml(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=vg(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=We(r,"beforeTitle",this,e),n=We(r,"title",this,e),o=We(r,"afterTitle",this,e);let l=[];return l=ot(l,gt(i)),l=ot(l,gt(n)),l=ot(l,gt(o)),l}getBeforeBody(e,t){return po(We(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return ue(e,n=>{const o={before:[],lines:[],after:[]},l=vo(r,n);ot(o.before,gt(We(l,"beforeLabel",this,n))),ot(o.lines,We(l,"label",this,n)),ot(o.after,gt(We(l,"afterLabel",this,n))),i.push(o)}),i}getAfterBody(e,t){return po(We(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=We(r,"beforeFooter",this,e),n=We(r,"footer",this,e),o=We(r,"afterFooter",this,e);let l=[];return l=ot(l,gt(i)),l=ot(l,gt(n)),l=ot(l,gt(o)),l}_createItems(e){const t=this._active,r=this.chart.data,i=[],n=[],o=[];let l=[],c,d;for(c=0,d=t.length;c<d;++c)l.push(mg(this.chart,t[c]));return e.filter&&(l=l.filter((u,h,m)=>e.filter(u,h,m,r))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,r))),ue(l,u=>{const h=vo(e.callbacks,u);i.push(We(h,"labelColor",this,u)),n.push(We(h,"labelPointStyle",this,u)),o.push(We(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let n,o=[];if(!i.length)this.opacity!==0&&(n={opacity:0});else{const l=Hs[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=go(this,r),d=Object.assign({},l,c),u=xo(this.chart,r,d),h=bo(r,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const n=this.getCaretPosition(e,r,i);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:n}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=ks(l),{x:m,y:f}=e,{width:b,height:x}=t;let g,p,j,v,N,y;return n==="center"?(N=f+x/2,i==="left"?(g=m,p=g-o,v=N+o,y=N-o):(g=m+b,p=g+o,v=N-o,y=N+o),j=g):(i==="left"?p=m+Math.max(c,u)+o:i==="right"?p=m+b-Math.max(d,h)-o:p=this.caretX,n==="top"?(v=f,N=v-o,g=p-o,j=p+o):(v=f+x,N=v+o,g=p+o,j=p-o),y=v),{x1:g,x2:p,x3:j,y1:v,y2:N,y3:y}}drawTitle(e,t,r){const i=this.title,n=i.length;let o,l,c;if(n){const d=_s(r.rtl,this.x,this.width);for(e.x=Fr(this,r.titleAlign,r),t.textAlign=d.textAlign(r.titleAlign),t.textBaseline="middle",o=Ie(r.titleFont),l=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,c=0;c<n;++c)t.fillText(i[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===n&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,t,r,i,n){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=n,u=Ie(n.bodyFont),h=Fr(this,"left",n),m=i.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,b=t.y+f;if(n.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},g=i.leftForLtr(m,d)+d/2,p=b+c/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,di(e,x,g,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,di(e,x,g,p)}else{e.lineWidth=le(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=i.leftForLtr(m,d),g=i.leftForLtr(i.xPlus(m,1),d-2),p=ks(o.borderRadius);Object.values(p).some(j=>j!==0)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,Zr(e,{x,y:b,w:d,h:c,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Zr(e,{x:g,y:b+1,w:d-2,h:c-2,radius:p}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(x,b,d,c),e.strokeRect(x,b,d,c),e.fillStyle=o.backgroundColor,e.fillRect(g,b+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:n,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=r,h=Ie(r.bodyFont);let m=h.lineHeight,f=0;const b=_s(r.rtl,this.x,this.width),x=function(C){t.fillText(C,b.x(e.x+f),e.y+m/2),e.y+=m+n},g=b.textAlign(o);let p,j,v,N,y,S,_;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=Fr(this,g,r),t.fillStyle=r.bodyColor,ue(this.beforeBody,x),f=l&&g!=="right"?o==="center"?d/2+u:d+2+u:0,N=0,S=i.length;N<S;++N){for(p=i[N],j=this.labelTextColors[N],t.fillStyle=j,ue(p.before,x),v=p.lines,l&&v.length&&(this._drawColorBox(t,e,N,b,r),m=Math.max(h.lineHeight,c)),y=0,_=v.length;y<_;++y)x(v[y]),m=h.lineHeight;ue(p.after,x)}f=0,m=h.lineHeight,ue(this.afterBody,x),e.y-=n}drawFooter(e,t,r){const i=this.footer,n=i.length;let o,l;if(n){const c=_s(r.rtl,this.x,this.width);for(e.x=Fr(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",o=Ie(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,l=0;l<n;++l)t.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:n,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=r,{topLeft:h,topRight:m,bottomLeft:f,bottomRight:b}=ks(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(l+h,c),o==="top"&&this.drawCaret(e,t,r,i),t.lineTo(l+d-m,c),t.quadraticCurveTo(l+d,c,l+d,c+m),o==="center"&&n==="right"&&this.drawCaret(e,t,r,i),t.lineTo(l+d,c+u-b),t.quadraticCurveTo(l+d,c+u,l+d-b,c+u),o==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(l+f,c+u),t.quadraticCurveTo(l,c+u,l,c+u-f),o==="center"&&n==="left"&&this.drawCaret(e,t,r,i),t.lineTo(l,c+h),t.quadraticCurveTo(l,c,l+h,c),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,n=r&&r.y;if(i||n){const o=Hs[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=go(this,e),c=Object.assign({},o,this._size),d=xo(t,e,c),u=bo(e,c,d,t);(i._to!==u.x||n._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},n={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ze(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(n,e,i,t),Dl(e,t.textDirection),n.y+=o.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),Rl(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),n=!Gr(r,i),o=this._positionChanged(i,t);(n||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,n=this._active||[],o=this._getActiveElements(e,n,t,r),l=this._positionChanged(o,e),c=t||!Gr(o,n)||l;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,i){const n=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,n.mode,n,r);return n.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:n}=this,o=Hs[n.position].call(this,e,t);return o!==!1&&(r!==o.x||i!==o.y)}}var jg={id:"tooltip",_element:jo,positioners:Hs,afterInit(s,e,t){t&&(s.tooltip=new jo({chart:s,options:t}))},beforeUpdate(s,e,t){s.tooltip&&s.tooltip.initialize(t)},reset(s,e,t){s.tooltip&&s.tooltip.initialize(t)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",t)}},afterEvent(s,e){if(s.tooltip){const t=e.replay;s.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Zl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const wg=(s,e,t,r)=>(typeof e=="string"?(t=s.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function yg(s,e,t,r){const i=s.indexOf(e);if(i===-1)return wg(s,e,t,r);const n=s.lastIndexOf(e);return i!==n?t:i}const kg=(s,e)=>s===null?null:Me(Math.round(s),0,e);function wo(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class _g extends As{static id="category";static defaults={ticks:{callback:wo}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:n}of t)r[i]===n&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(de(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:yg(r,e,re(t,e),this._addedLabels),kg(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let n=this.getLabels();n=e===0&&t===n.length-1?n:n.slice(e,t+1),this._valueRange=Math.max(n.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return wo.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ng(s,e){const t=[],{bounds:i,step:n,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:m}=s,f=n||1,b=u-1,{min:x,max:g}=e,p=!de(o),j=!de(l),v=!de(d),N=(g-x)/(h+1);let y=wn((g-x)/b/f)*f,S,_,C,T;if(y<1e-14&&!p&&!j)return[{value:x},{value:g}];T=Math.ceil(g/y)-Math.floor(x/y),T>b&&(y=wn(T*y/b/f)*f),de(c)||(S=Math.pow(10,c),y=Math.ceil(y*S)/S),i==="ticks"?(_=Math.floor(x/y)*y,C=Math.ceil(g/y)*y):(_=x,C=g),p&&j&&n&&Ih((l-o)/n,y/1e3)?(T=Math.round(Math.min((l-o)/y,u)),y=(l-o)/T,_=o,C=l):v?(_=p?o:_,C=j?l:C,T=d-1,y=(C-_)/T):(T=(C-_)/y,Gs(T,Math.round(T),y/1e3)?T=Math.round(T):T=Math.ceil(T));const I=Math.max(yn(y),yn(_));S=Math.pow(10,de(c)?I:c),_=Math.round(_*S)/S,C=Math.round(C*S)/S;let F=0;for(p&&(m&&_!==o?(t.push({value:o}),_<o&&F++,Gs(Math.round((_+F*y)*S)/S,o,yo(o,N,s))&&F++):_<o&&F++);F<T;++F){const M=Math.round((_+F*y)*S)/S;if(j&&M>l)break;t.push({value:M})}return j&&m&&C!==l?t.length&&Gs(t[t.length-1].value,l,yo(l,N,s))?t[t.length-1].value=l:t.push({value:l}):(!j||C===l)&&t.push({value:C}),t}function yo(s,e,{horizontal:t,minRotation:r}){const i=vt(r),n=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+s).length;return Math.min(e/n,o)}class Sg extends As{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return de(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:n}=this;const o=c=>i=t?i:c,l=c=>n=r?n:c;if(e){const c=dt(i),d=dt(n);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(i===n){let c=n===0?1:Math.abs(n*.05);l(n+c),e||o(i-c)}this.min=i,this.max=n}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},n=this._range||this,o=Ng(i,n);return e.bounds==="ticks"&&Lh(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Ei(e,this.chart.options.locale,this.options.ticks.format)}}class Cg extends Sg{static id="linear";static defaults={ticks:{callback:_l.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Je(e)?e:0,this.max=Je(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=vt(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,n.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ga={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qe=Object.keys(ga);function ko(s,e){return s-e}function _o(s,e){if(de(e))return null;const t=s._adapter,{parser:r,round:i,isoWeekday:n}=s._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Je(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(lr(n)||n===!0)?t.startOf(o,"isoWeek",n):t.startOf(o,i)),+o)}function No(s,e,t,r){const i=qe.length;for(let n=qe.indexOf(s);n<i-1;++n){const o=ga[qe[n]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=r)return qe[n]}return qe[i-1]}function Tg(s,e,t,r,i){for(let n=qe.length-1;n>=qe.indexOf(t);n--){const o=qe[n];if(ga[o].common&&s._adapter.diff(i,r,o)>=e-1)return o}return qe[t?qe.indexOf(t):0]}function Eg(s){for(let e=qe.indexOf(s)+1,t=qe.length;e<t;++e)if(ga[qe[e]].common)return qe[e]}function So(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:r,hi:i}=Si(t,e),n=t[r]>=e?t[r]:t[i];s[n]=!0}}function Pg(s,e,t,r){const i=s._adapter,n=+i.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=n;l<=o;l=+i.add(l,1,r))c=t[l],c>=0&&(e[c].major=!0);return e}function Co(s,e,t){const r=[],i={},n=e.length;let o,l;for(o=0;o<n;++o)l=e[o],i[l]=o,r.push({value:l,major:!1});return n===0||!t?r:Pg(s,r,i,t)}class To extends As{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new N0._date(e.adapters.date);i.init(t),Ys(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:_o(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:n,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!l&&!isNaN(d.max)&&(n=Math.max(n,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=Je(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),n=Je(n)&&!isNaN(n)?n:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,n-1),this.max=Math.max(i+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const n=this.min,o=this.max,l=Wh(i,n,o);return this._unit=t.unit||(r.autoSkip?No(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):Tg(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Eg(this._unit),this.initOffsets(i),e.reverse&&l.reverse(),Co(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,n;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,n=this.getDecimalForValue(e[e.length-1]),e.length===1?r=n:r=(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Me(t,0,o),r=Me(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,n=i.time,o=n.unit||No(n.minUnit,t,r,this._getLabelCapacity(t)),l=re(i.ticks.stepSize,1),c=o==="week"?n.isoWeekday:!1,d=lr(c)||c===!0,u={};let h=t,m,f;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(r,t,o)>1e5*l)throw new Error(t+" and "+r+" are too far apart with stepSize of "+l+" "+o);const b=i.ticks.source==="data"&&this.getDataTimestamps();for(m=h,f=0;m<r;m=+e.add(m,l,o),f++)So(u,m,b);return(m===r||i.bounds==="ticks"||f===1)&&So(u,m,b),Object.keys(u).sort(ko).map(x=>+x)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,n=this._unit,o=t||i[n];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,i){const n=this.options,o=n.ticks.callback;if(o)return ge(o,[e,t,r],this);const l=n.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],m=r[t],f=d&&h&&m&&m.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=vt(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(i),o=Math.sin(i),l=this._resolveTickFontOptions(0).size;return{w:r*n+l*o,h:r*o+l*n}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,n=this._tickFormatFunction(e,0,Co(this,[e],this._majorUnit),i),o=this._getLabelSize(n),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(_o(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wl(e.sort(ko))}}function zr(s,e,t){let r=0,i=s.length-1,n,o,l,c;t?(e>=s[r].pos&&e<=s[i].pos&&({lo:r,hi:i}=Zt(s,"pos",e)),{pos:n,time:l}=s[r],{pos:o,time:c}=s[i]):(e>=s[r].time&&e<=s[i].time&&({lo:r,hi:i}=Zt(s,"time",e)),{time:n,pos:l}=s[r],{time:o,pos:c}=s[i]);const d=o-n;return d?l+(c-l)*(e-n)/d:l}class cx extends To{static id="timeseries";static defaults=To.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=zr(t,this.min),this._tableRange=zr(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],n=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=t&&d<=r&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,l=i.length;o<l;++o)u=i[o+1],c=i[o-1],d=i[o],Math.round((u+c)/2)!==d&&n.push({time:d,pos:o/(l-1)});return n}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,n)=>i-n)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(zr(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return zr(this._table,r*this._tableRange+this._minPos,!0)}}const Ql="label";function Eo(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function Ag(s,e){const t=s.options;t&&e&&Object.assign(t,e)}function ec(s,e){s.labels=e}function tc(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ql;const r=[];s.datasets=e.map(i=>{const n=s.datasets.find(o=>o[t]===i[t]);return!n||!i.data||r.includes(n)?{...i}:(r.push(n),Object.assign(n,i),n)})}function Dg(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ql;const t={labels:[],datasets:[]};return ec(t,s.labels),tc(t,s.datasets,e),t}function Rg(s,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:n,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...m}=s,f=k.useRef(null),b=k.useRef(null),x=()=>{f.current&&(b.current=new fa(f.current,{type:o,data:Dg(l,n),options:c&&{...c},plugins:d}),Eo(e,b.current))},g=()=>{Eo(e,null),b.current&&(b.current.destroy(),b.current=null)};return k.useEffect(()=>{!i&&b.current&&c&&Ag(b.current,c)},[i,c]),k.useEffect(()=>{!i&&b.current&&ec(b.current.config.data,l.labels)},[i,l.labels]),k.useEffect(()=>{!i&&b.current&&l.datasets&&tc(b.current.config.data,l.datasets,n)},[i,l.datasets]),k.useEffect(()=>{b.current&&(i?(g(),setTimeout(x)):b.current.update(h))},[i,c,l.labels,l.datasets,h]),k.useEffect(()=>{b.current&&(g(),setTimeout(x))},[o]),k.useEffect(()=>(x(),()=>g()),[]),lt.createElement("canvas",{ref:f,role:"img",height:t,width:r,...m},u)}const Og=k.forwardRef(Rg);function Fi(s,e){return fa.register(e),k.forwardRef((t,r)=>lt.createElement(Og,{...t,ref:r,type:s}))}const Po=Fi("line",_0),Mg=Fi("bar",w0),Ig=Fi("doughnut",k0);fa.register(_g,Cg,Zf,Jf,ag,hg,jg,dg,Bf);const sc=({isDarkMode:s})=>{const{language:e}=$e(),[t,r]=k.useState([]),[i,n]=k.useState(!0),[o,l]=k.useState("30days"),[c,d]=k.useState("line"),[u,h]=k.useState(""),[m,f]=k.useState(new Date),[b,x]=k.useState(!1);k.useEffect(()=>{g()},[]),k.useEffect(()=>{if(!b)return;const R=setInterval(()=>{console.log("🔄 Auto refreshing data..."),g()},3e4);return()=>clearInterval(R)},[b]);const g=async()=>{try{n(!0),h(""),console.log("🔄 بدء تحميل النماذج...");const{data:R,error:L}=await ar.getAllForms();if(L)throw L;r(R||[]),f(new Date),console.log("✅ تم تحميل النماذج بنجاح:",R?.length||0)}catch(R){console.error("Error loading forms:",R),h(e==="ar"?"خطأ في تحميل البيانات":"Veri yüklenirken hata oluştu")}finally{n(!1)}},p=R=>{const L=new Date,D=new Date;switch(R){case"7days":D.setDate(L.getDate()-7);break;case"30days":D.setDate(L.getDate()-30);break;case"3months":D.setMonth(L.getMonth()-3);break;case"6months":D.setMonth(L.getMonth()-6);break;case"1year":D.setFullYear(L.getFullYear()-1);break}return{startDate:D,endDate:L}},j=R=>{const{startDate:L,endDate:D}=p(R);return t.filter(A=>{const O=new Date(A.created_at);return O>=L&&O<=D})},v=R=>{const{startDate:L,endDate:D}=p(R),A=[],O=new Date(L);switch(R){case"7days":for(;O<=D;)A.push(xe(O)),O.setDate(O.getDate()+1);break;case"30days":for(;O<=D;)A.push(xe(O)),O.setDate(O.getDate()+1);break;case"3months":case"6months":for(;O<=D;)A.push(xe(O)),O.setMonth(O.getMonth()+1);break;case"1year":for(;O<=D;)A.push(xe(O)),O.setMonth(O.getMonth()+1);break}return A},N=R=>{const L=j(R),D=v(R),A=new Array(D.length).fill(0);return L.forEach(O=>{const $=new Date(O.created_at),{startDate:E}=p(R);let G=0;switch(R){case"7days":case"30days":G=Math.floor(($.getTime()-E.getTime())/(1e3*60*60*24));break;case"3months":case"6months":case"1year":G=($.getFullYear()-E.getFullYear())*12+($.getMonth()-E.getMonth());break}G>=0&&G<A.length&&A[G]++}),A},y=()=>{const R=j(o),L={};return R.forEach(D=>{const A=D.sinir_kapisi;L[A]=(L[A]||0)+1}),{labels:Object.keys(L),data:Object.values(L)}},S=()=>{const R=j(o),L=R.length,D=new Set(R.map(B=>B.user_id)).size,A=y(),O=A.labels.length>0?A.labels[A.data.indexOf(Math.max(...A.data))]:e==="ar"?"لا توجد بيانات":"Veri Yok",E=Math.round(L/(o==="7days"?7:o==="30days"?30:o==="3months"?90:o==="6months"?180:365)*10)/10,G=_(o),z=j(G).length,K=z>0?Math.round((L-z)/z*100):0;return{totalForms:L,uniqueUsers:D,mostUsedCrossing:O,dailyAverage:E,growthRate:K,crossingData:A}},_=R=>{switch(R){case"7days":return"7days";case"30days":return"30days";case"3months":return"3months";case"6months":return"6months";case"1year":return"1year";default:return"30days"}},C={line:{labels:v(o),datasets:[{label:e==="ar"?"عدد النماذج":"Form Sayısı",data:N(o),borderColor:s?"#10b981":"#059669",backgroundColor:s?"rgba(16, 185, 129, 0.1)":"rgba(5, 150, 105, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:s?"#10b981":"#059669",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},bar:{labels:v(o),datasets:[{label:e==="ar"?"عدد النماذج":"Form Sayısı",data:N(o),backgroundColor:s?"rgba(59, 130, 246, 0.8)":"rgba(37, 99, 235, 0.8)",borderColor:s?"#3b82f6":"#2563eb",borderWidth:2,borderRadius:8,borderSkipped:!1}]},doughnut:{labels:y().labels,datasets:[{data:y().data,backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"],borderColor:s?"#1f2937":"#ffffff",borderWidth:2,hoverOffset:4}]}},T={line:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:s?"#f3f4f6":"#374151",font:{size:14,weight:"bold"}}},tooltip:{backgroundColor:s?"#374151":"#ffffff",titleColor:s?"#f3f4f6":"#374151",bodyColor:s?"#f3f4f6":"#374151",borderColor:s?"#6b7280":"#d1d5db",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{x:{grid:{color:s?"#374151":"#e5e7eb"},ticks:{color:s?"#9ca3af":"#6b7280"}},y:{grid:{color:s?"#374151":"#e5e7eb"},ticks:{color:s?"#9ca3af":"#6b7280",stepSize:1},beginAtZero:!0}}},bar:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:s?"#f3f4f6":"#374151",font:{size:14,weight:"bold"}}},tooltip:{backgroundColor:s?"#374151":"#ffffff",titleColor:s?"#f3f4f6":"#374151",bodyColor:s?"#f3f4f6":"#374151",borderColor:s?"#6b7280":"#d1d5db",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{x:{grid:{color:s?"#374151":"#e5e7eb"},ticks:{color:s?"#9ca3af":"#6b7280"}},y:{grid:{color:s?"#374151":"#e5e7eb"},ticks:{color:s?"#9ca3af":"#6b7280",stepSize:1},beginAtZero:!0}}},doughnut:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:s?"#f3f4f6":"#374151",font:{size:12},padding:20}},tooltip:{backgroundColor:s?"#374151":"#ffffff",titleColor:s?"#f3f4f6":"#374151",bodyColor:s?"#f3f4f6":"#374151",borderColor:s?"#6b7280":"#d1d5db",borderWidth:1,cornerRadius:8,displayColors:!0}}}},I=()=>{const R=S(),L={timeRange:o,lastUpdated:m.toISOString(),statistics:R,forms:j(o)},D=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),A=URL.createObjectURL(D),O=document.createElement("a");O.href=A,O.download=`voluntary-return-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(A)};if(i)return a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-caribbean-600"}),a.jsx("span",{className:"mr-3 text-jet-600 dark:text-platinum-400",children:e==="ar"?"جاري تحميل البيانات...":"Veriler yükleniyor..."})]});if(u)return a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:u}),a.jsx("button",{onClick:g,className:"px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors",children:e==="ar"?"إعادة المحاولة":"Tekrar Dene"})]});const F=()=>{switch(c){case"line":return a.jsx(Po,{data:C.line,options:T.line});case"bar":return a.jsx(Mg,{data:C.bar,options:T.bar});case"doughnut":return a.jsx(Ig,{data:C.doughnut,options:T.doughnut});default:return a.jsx(Po,{data:C.line,options:T.line})}},M=S();return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-platinum-200",children:e==="ar"?"الإحصائيات الزمنية":"Zaman Serisi İstatistikleri"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-jet-500 dark:text-platinum-500",children:[a.jsx(at,{className:"w-4 h-4"}),a.jsxs("span",{children:[e==="ar"?"آخر تحديث:":"Son güncelleme:"," ",m.toLocaleTimeString()]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(it,{className:"w-5 h-5 text-caribbean-600"}),a.jsxs("select",{value:o,onChange:R=>l(R.target.value),className:"px-3 py-2 bg-white dark:bg-jet-800 border border-platinum-200 dark:border-jet-600 rounded-lg text-jet-800 dark:text-platinum-200 focus:ring-2 focus:ring-caribbean-500 focus:border-transparent",children:[a.jsx("option",{value:"7days",children:e==="ar"?"آخر 7 أيام":"Son 7 Gün"}),a.jsx("option",{value:"30days",children:e==="ar"?"آخر 30 يوم":"Son 30 Gün"}),a.jsx("option",{value:"3months",children:e==="ar"?"آخر 3 أشهر":"Son 3 Ay"}),a.jsx("option",{value:"6months",children:e==="ar"?"آخر 6 أشهر":"Son 6 Ay"}),a.jsx("option",{value:"1year",children:e==="ar"?"آخر سنة":"Son 1 Yıl"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fc,{className:"w-5 h-5 text-caribbean-600"}),a.jsxs("div",{className:"flex bg-white dark:bg-jet-800 border border-platinum-200 dark:border-jet-600 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>d("line"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="line"?"bg-caribbean-600 text-white":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600"}`,title:e==="ar"?"خط زمني":"Zaman Serisi",children:a.jsx(Ka,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>d("bar"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="bar"?"bg-caribbean-600 text-white":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600"}`,title:e==="ar"?"أعمدة":"Sütun Grafik",children:a.jsx(xi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>d("doughnut"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="doughnut"?"bg-caribbean-600 text-white":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600"}`,title:e==="ar"?"دائري":"Pasta Grafik",children:a.jsx(gc,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zs,{className:`w-5 h-5 ${b?"text-green-600 animate-spin":"text-jet-600"}`}),a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:R=>x(R.target.checked),className:"rounded border-platinum-300 text-caribbean-600 focus:ring-caribbean-500"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:e==="ar"?"تحديث تلقائي":"Otomatik Yenile"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:g,className:"px-4 py-2 bg-caribbean-600 text-white rounded-lg hover:bg-caribbean-700 transition-colors flex items-center gap-2",title:e==="ar"?"تحديث البيانات":"Verileri Yenile",children:[a.jsx(Zs,{className:"w-4 h-4"}),e==="ar"?"تحديث":"Yenile"]}),a.jsxs("button",{onClick:I,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:e==="ar"?"تصدير البيانات":"Verileri Dışa Aktar",children:[a.jsx(rs,{className:"w-4 h-4"}),e==="ar"?"تصدير":"Dışa Aktar"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-caribbean-500 to-caribbean-600 text-white p-6 rounded-xl shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:e==="ar"?"إجمالي النماذج":"Toplam Form"}),a.jsx("p",{className:"text-3xl font-bold",children:M.totalForms}),M.growthRate!==0&&a.jsxs("p",{className:`text-sm ${M.growthRate>0?"text-green-200":"text-red-200"}`,children:[M.growthRate>0?"+":"",M.growthRate,"% ",e==="ar"?"من الفترة السابقة":"önceki dönemden"]})]}),a.jsx(ne,{className:"w-10 h-10 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:e==="ar"?"المستخدمين الفريدين":"Benzersiz Kullanıcılar"}),a.jsx("p",{className:"text-3xl font-bold",children:M.uniqueUsers}),a.jsx("p",{className:"text-sm opacity-80",children:e==="ar"?"مستخدم نشط":"aktif kullanıcı"})]}),a.jsx(rt,{className:"w-10 h-10 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:e==="ar"?"المعبر الأكثر استخداماً":"En Çok Kullanılan Geçiş"}),a.jsx("p",{className:"text-lg font-bold truncate",children:M.mostUsedCrossing}),a.jsx("p",{className:"text-sm opacity-80",children:e==="ar"?"معبر شائع":"popüler geçiş"})]}),a.jsx(sr,{className:"w-10 h-10 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:e==="ar"?"المتوسط اليومي":"Günlük Ortalama"}),a.jsx("p",{className:"text-3xl font-bold",children:M.dailyAverage}),a.jsx("p",{className:"text-sm opacity-80",children:e==="ar"?"نموذج/يوم":"form/gün"})]}),a.jsx(Ka,{className:"w-10 h-10 opacity-80"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:[a.jsx("h4",{className:"text-lg font-semibold text-jet-800 dark:text-platinum-200 mb-4",children:e==="ar"?"توزيع المعابر":"Geçiş Dağılımı"}),a.jsx("div",{className:"space-y-2",children:M.crossingData.labels.slice(0,5).map((R,L)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 text-sm",children:R}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 bg-platinum-200 dark:bg-jet-600 rounded-full h-2",children:a.jsx("div",{className:"bg-caribbean-500 h-2 rounded-full",style:{width:`${M.crossingData.data[L]/Math.max(...M.crossingData.data)*100}%`}})}),a.jsx("span",{className:"text-jet-800 dark:text-platinum-200 text-sm font-medium",children:M.crossingData.data[L]})]})]},R))})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:[a.jsx("h4",{className:"text-lg font-semibold text-jet-800 dark:text-platinum-200 mb-4",children:e==="ar"?"ملخص سريع":"Hızlı Özet"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:e==="ar"?"النماذج هذا الشهر":"Bu ayki formlar"}),a.jsx("span",{className:"font-semibold text-jet-800 dark:text-platinum-200",children:j("30days").length})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:e==="ar"?"النماذج هذا الأسبوع":"Bu haftaki formlar"}),a.jsx("span",{className:"font-semibold text-jet-800 dark:text-platinum-200",children:j("7days").length})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:e==="ar"?"معدل النمو":"Büyüme Oranı"}),a.jsxs("span",{className:`font-semibold ${M.growthRate>0?"text-green-600":M.growthRate<0?"text-red-600":"text-jet-600"}`,children:[M.growthRate>0?"+":"",M.growthRate,"%"]})]})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-jet-800 dark:text-platinum-200",children:[c==="line"&&(e==="ar"?"الرسم البياني الزمني":"Zaman Serisi Grafiği"),c==="bar"&&(e==="ar"?"رسم بياني بالأعمدة":"Sütun Grafiği"),c==="doughnut"&&(e==="ar"?"رسم بياني دائري":"Pasta Grafiği")]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-jet-500 dark:text-platinum-500",children:[a.jsx(ts,{className:"w-4 h-4"}),a.jsx("span",{children:e==="ar"?"عرض تفاعلي":"İnteraktif Görünüm"})]})]}),a.jsx("div",{className:"h-96",children:F()})]})]})},Lg=({isDarkMode:s})=>{const{user:e,profile:t}=Le(),{t:r}=$e(),[i,n]=k.useState([]),[o,l]=k.useState(!0),[c,d]=k.useState(!1),[u,h]=k.useState(null),[m,f]=k.useState(null),[b,x]=k.useState(null),[g,p]=k.useState(null),[j,v]=k.useState({email:"",full_name:""}),[N,y]=k.useState(!1),S=t?.role==="admin",_=async D=>{if(!(!D||D.length<3))try{console.log("🔍 Searching for existing user:",D);const{data:A,error:O}=await H.from("user_profiles").select("id, email, full_name").eq("email",D).single();if(A&&!O){console.log("✅ Found existing user profile:",A),v($=>({...$,full_name:A.full_name||$.full_name})),y(!0);return}try{const{data:$,error:E}=await H.functions.invoke("search-user",{body:{email:D}});$?.found&&!E?(console.log("✅ Found existing user via Edge Function:",$.user),v(G=>({...G,full_name:$.user.full_name||G.full_name})),y(!0)):console.log("ℹ️ User not found, will be created on first login")}catch{console.log("ℹ️ Could not search via Edge Function, user will be created on first login")}}catch{console.log("ℹ️ No existing user found for:",D),y(!1)}};k.useEffect(()=>{S&&C()},[S]);const C=async()=>{try{l(!0),console.log("🔍 Fetching moderators...");const{data:D,error:A}=await H.from("moderators").select("*").order("created_at",{ascending:!1});if(A){console.error("❌ Error fetching moderators:",A),p(`فشل في جلب قائمة المشرفين: ${A.message}`);return}console.log("✅ Moderators fetched successfully:",D),n(D||[])}catch(D){console.error("❌ Error fetching moderators:",D),p("فشل في جلب قائمة المشرفين")}finally{l(!1)}},T=async D=>{if(D.preventDefault(),!j.email||!j.full_name){p("يرجى ملء جميع الحقول المطلوبة");return}try{l(!0),console.log("🔍 Adding moderator:",j);let{data:A,error:O}=await H.from("user_profiles").select("id, email, full_name").eq("email",j.email).single(),$=null;if(A)$=A.id,console.log("✅ Found existing user in profiles:",A);else try{const{data:z,error:K}=await H.functions.invoke("search-user",{body:{email:j.email}});z?.found&&!K&&($=z.user.id,console.log("✅ Found existing user via Edge Function:",z.user))}catch{console.log("ℹ️ Could not search via Edge Function")}const{data:E,error:G}=await H.from("moderators").insert({email:j.email,full_name:j.full_name,created_by:e?.id,user_id:$}).select().single();if(G){console.error("❌ Error adding moderator:",G),p(`فشل في إضافة المشرف: ${G.message}`);return}if(console.log("✅ Moderator added successfully:",E),$){console.log("🔄 Updating existing user role to moderator...");const{error:z}=await H.from("user_profiles").upsert({id:$,email:j.email,full_name:j.full_name,role:"moderator",updated_at:new Date().toISOString()});z?console.error("⚠️ Warning: Could not update user profile:",z):console.log("✅ User profile updated to moderator role")}n(z=>[E,...z]),v({email:"",full_name:""}),d(!1),x($?`تم إضافة المشرف بنجاح! المستخدم ${j.email} مسجل بالفعل وتم تعيينه كمشرف فوراً.`:`تم إضافة المشرف بنجاح! عندما يسجل ${j.email} دخوله لأول مرة، سيتم تعيينه تلقائياً كـ "مشرف" في النظام.`),setTimeout(()=>x(null),5e3)}catch(A){console.error("❌ Error adding moderator:",A),p("فشل في إضافة المشرف")}finally{l(!1)}},I=async D=>{if(D.preventDefault(),!u||!j.email||!j.full_name){p("يرجى ملء جميع الحقول المطلوبة");return}try{l(!0);const{error:A}=await H.from("moderators").update({email:j.email,full_name:j.full_name,updated_at:new Date().toISOString()}).eq("id",u.id);if(A){console.error("Error updating moderator:",A),p("فشل في تحديث المشرف");return}n(O=>O.map($=>$.id===u.id?{...$,email:j.email,full_name:j.full_name}:$)),h(null),v({email:"",full_name:""}),x("تم تحديث المشرف بنجاح"),setTimeout(()=>x(null),3e3)}catch(A){console.error("Error updating moderator:",A),p("فشل في تحديث المشرف")}finally{l(!1)}},F=async D=>{try{l(!0);const{error:A}=await H.from("moderators").delete().eq("id",D);if(A){console.error("Error deleting moderator:",A),p("فشل في حذف المشرف");return}n(O=>O.filter($=>$.id!==D)),f(null),x("تم حذف المشرف بنجاح"),setTimeout(()=>x(null),3e3)}catch(A){console.error("Error deleting moderator:",A),p("فشل في حذف المشرف")}finally{l(!1)}},M=D=>{h(D),v({email:D.email,full_name:D.full_name})},R=()=>{h(null),v({email:"",full_name:""}),y(!1)},L=D=>{const A=D.target.value;v(O=>({...O,email:A})),y(!1),A&&A.includes("@")&&setTimeout(()=>_(A),500)};return S?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx(Ee,{className:"w-8 h-8 text-caribbean-600 dark:text-caribbean-400"}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"إدارة المشرفين"})]}),a.jsxs("button",{onClick:()=>d(!0),className:"flex items-center px-4 py-2 bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white rounded-lg hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300",children:[a.jsx(Ya,{className:"w-4 h-4 ml-2"}),"إضافة مشرف جديد"]})]}),b&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center",children:[a.jsx(fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 ml-2"}),a.jsx("span",{className:"text-green-800 dark:text-green-200",children:b})]}),g&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center",children:[a.jsx(Ae,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("span",{className:"text-red-800 dark:text-red-200",children:g})]}),(c||u)&&a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-lg border border-platinum-200 dark:border-jet-700 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-jet-800 dark:text-white",children:u?"تعديل المشرف":"إضافة مشرف جديد"}),!u&&a.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("strong",{children:"ملاحظة:"})," عند إضافة مشرف جديد، سيتم البحث تلقائياً عن المستخدم في قاعدة البيانات. إذا كان المستخدم مسجل بالفعل، سيتم تعيينه كمشرف فوراً. وإذا لم يكن مسجل، سيتم تعيينه كمشرف عند أول تسجيل دخول."]})}),a.jsxs("form",{onSubmit:u?I:T,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"البريد الإلكتروني"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"email",value:j.email,onChange:L,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-800 dark:text-white ${N?"border-green-500 dark:border-green-400":"border-platinum-300 dark:border-jet-600"}`,placeholder:"example@tevasul.group",required:!0}),N&&a.jsxs("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 flex items-center text-green-600 dark:text-green-400",children:[a.jsx(fe,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs mr-1",children:"مستخدم موجود"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل"}),a.jsx("input",{type:"text",value:j.full_name,onChange:D=>v(A=>({...A,full_name:D.target.value})),className:"w-full px-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-800 dark:text-white",placeholder:"اسم المشرف",required:!0})]}),a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsxs("button",{type:"submit",disabled:o,className:"flex items-center px-4 py-2 bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white rounded-lg hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300 disabled:opacity-50",children:[a.jsx(ss,{className:"w-4 h-4 ml-2"}),u?"تحديث":"إضافة"]}),a.jsxs("button",{type:"button",onClick:u?R:()=>d(!1),className:"flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-300",children:[a.jsx(_e,{className:"w-4 h-4 ml-2"}),"إلغاء"]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-lg border border-platinum-200 dark:border-jet-700",children:[a.jsx("div",{className:"p-6 border-b border-platinum-200 dark:border-jet-700",children:a.jsxs("h3",{className:"text-lg font-semibold text-jet-800 dark:text-white",children:["قائمة المشرفين (",i.length,")"]})}),o?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-caribbean-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"جاري التحميل..."})]}):i.length===0?a.jsx("div",{className:"p-6 text-center text-gray-600 dark:text-gray-400",children:"لا توجد مشرفين حالياً"}):a.jsx("div",{className:"divide-y divide-platinum-200 dark:divide-jet-700",children:i.map(D=>a.jsxs("div",{className:"p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-caribbean-500 to-indigo-500 rounded-full flex items-center justify-center",children:a.jsx(rt,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-jet-800 dark:text-white",children:D.full_name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:D.email}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${D.user_id?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}`,children:D.user_id?"مسجل":"في انتظار التسجيل"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:xe(D.created_at)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>M(D),className:"p-2 text-caribbean-600 hover:text-caribbean-700 dark:text-caribbean-400 dark:hover:text-caribbean-300 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 rounded-lg transition-colors duration-200",title:"تعديل المشرف",children:a.jsx(tr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>f(D.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:"حذف المشرف",children:a.jsx(Tt,{className:"w-4 h-4"})})]})]},D.id))})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-jet-800 dark:text-white mb-4",children:"تأكيد الحذف"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"هل أنت متأكد من حذف هذا المشرف؟ لا يمكن التراجع عن هذا الإجراء."}),a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("button",{onClick:()=>F(m),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"حذف"}),a.jsx("button",{onClick:()=>f(null),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200",children:"إلغاء"})]})]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ae,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-red-600 dark:text-red-400 mb-2",children:"غير مصرح"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"فقط المشرفون يمكنهم الوصول إلى هذه الصفحة"})]})},Ao=({isDarkMode:s})=>{const{isArabic:e,language:t}=$e(),r=!0,{user:i}=Le(),[n,o]=k.useState({fullName:"",identityNumber:"",phoneNumber:"",address:""}),[l,c]=k.useState(!1),[d,u]=k.useState({}),[h,m]=k.useState(!1),[f,b]=k.useState(""),x=()=>{const y={};return n.fullName.trim()||(y.fullName="الاسم مطلوب"),n.identityNumber.trim()||(y.identityNumber="رقم الهوية مطلوب"),n.phoneNumber.trim()||(y.phoneNumber="رقم الجوال مطلوب"),n.address.trim()||(y.address="العنوان مطلوب"),u(y),Object.keys(y).length===0},g=async()=>{if(console.log("🔍 بدء عملية حفظ نموذج التأمين الصحي..."),!i){const T="يجب تسجيل الدخول لحفظ النموذج";console.error("❌",T),alert(T);return}const{fullName:y,identityNumber:S,phoneNumber:_,address:C}=n;if(console.log("📊 بيانات النموذج:",n),!y||!S||!_||!C){const T="الرجاء تعبئة جميع الحقول المطلوبة";console.error("❌",T),alert(T);return}m(!0),b("");try{const T={full_name:y,kimlik_no:S,phone:_,address:C,user_id:i.id,created_at:new Date().toISOString()};console.log("💾 بيانات الحفظ:",T);const{data:I,error:F}=await H.from("health_insurance_activation_forms").insert([T]);if(F)throw console.error("❌ خطأ من قاعدة البيانات:",F),F;console.log("✅ تم الحفظ بنجاح:",I),b(r?"تم حفظ النموذج بنجاح!":"Form başarıyla kaydedildi!"),setTimeout(()=>b(""),5e3),o({fullName:"",identityNumber:"",phoneNumber:"",address:""})}catch(T){console.error("💥 خطأ في حفظ النموذج:",T);let I=e?"خطأ في حفظ النموذج":"Form kaydedilirken hata oluştu";T?.message&&(T.message.includes("المصادقة")?I=e?"خطأ في المصادقة - يرجى إعادة تسجيل الدخول":"Authentication error - please login again":T.message.includes("مكتملة")?I=e?"جميع الحقول المطلوبة يجب أن تكون مملوءة":"All required fields must be filled":T.message.includes("غير متوقع")?I=e?"خطأ غير متوقع - يرجى المحاولة مرة أخرى":"Unexpected error - please try again":I=T.message),b(I),setTimeout(()=>b(""),5e3)}finally{m(!1)}},p=async y=>{y.preventDefault(),x()&&(i&&await g(),c(!0))},j=()=>{const y=document.getElementById("print-content");if(y){const S=window.open("","_blank");S&&(S.document.write(`
          <html>
            <head>
              <title>${e?"طلب تفعيل التأمين الصحي":"Health Insurance Activation Request"}</title>
              <style>
                body { 
                  font-family: ${e?"Arial, Tahoma, sans-serif":"Arial, sans-serif"}; 
                  margin: 40px; 
                  direction: ${e?"rtl":"ltr"};
                  text-align: ${e?"right":"left"};
                }
                .header { text-align: center; margin-bottom: 30px; }
                .content { line-height: 1.6; }
                .form-field { margin: 15px 0; }
                .signature { margin-top: 40px; }
                .text-center { text-align: center !important; }
                .text-lg { font-size: 18px !important; }
                .text-base { font-size: 16px !important; }
                .font-bold { font-weight: bold !important; }
                .mb-2 { margin-bottom: 8px !important; }
                .mb-8 { margin-bottom: 32px !important; }
                @media print { body { margin: 20px; } }
              </style>
            </head>
            <body>
              ${y.innerHTML}
            </body>
          </html>
        `),S.document.close(),S.print())}},v=()=>{const y=document.getElementById("print-content");if(y){const S=window.open("","_blank");S&&(S.document.write(`
          <html>
            <head>
              <title>${e?"طلب تفعيل التأمين الصحي":"Health Insurance Activation Request"}</title>
              <style>
                body { 
                  font-family: ${e?"Arial, Tahoma, sans-serif":"Arial, sans-serif"}; 
                  margin: 40px; 
                  direction: ${e?"rtl":"ltr"};
                  text-align: ${e?"right":"left"};
                }
                .header { text-align: center; margin-bottom: 30px; }
                .content { line-height: 1.6; }
                .form-field { margin: 15px 0; }
                .signature { margin-top: 40px; }
                .text-center { text-align: center !important; }
                .text-lg { font-size: 18px !important; }
                .text-base { font-size: 16px !important; }
                .font-bold { font-weight: bold !important; }
                .mb-2 { margin-bottom: 8px !important; }
                .mb-8 { margin-bottom: 32px !important; }
                @media print { body { margin: 20px; } }
              </style>
            </head>
            <body>
              ${y.innerHTML}
            </body>
          </html>
        `),S.document.close(),S.print())}},N=()=>{const y=new Date,S=y.getDate().toString().padStart(2,"0"),_=(y.getMonth()+1).toString().padStart(2,"0"),C=y.getFullYear();return`${S}/${_}/${C}`};return l?a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-600 to-pink-700 text-white p-4 print:hidden",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>c(!1),className:"flex items-center space-x-2 space-x-reverse bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 transition-colors duration-200",children:[a.jsx(er,{className:"w-4 h-4"}),a.jsx("span",{children:e?"العودة للتعديل":"Back to Edit"})]}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsxs("button",{onClick:j,className:"flex items-center space-x-2 space-x-reverse bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 transition-colors duration-200",children:[a.jsx(Ns,{className:"w-4 h-4"}),a.jsx("span",{children:e?"طباعة":"Print"})]}),a.jsxs("button",{onClick:v,className:"flex items-center space-x-2 space-x-reverse bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 transition-colors duration-200",children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{children:e?"تحميل PDF":"Download PDF"})]})]})]})}),a.jsx("div",{id:"print-content",className:"p-8 max-w-4xl mx-auto",children:a.jsxs("div",{className:e?"text-right":"text-left",dir:e?"rtl":"ltr",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("h1",{className:"text-lg font-bold mb-2",children:"T.C."}),a.jsx("h2",{className:"text-base font-bold mb-2",children:"MERSİN İL GÖÇ İDARESİ MÜDÜRLÜĞÜ'NE"})]}),a.jsx("div",{className:"mb-6",children:a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Konu: Geçici Koruma Kapsamındaki Sağlık Sigortamın Aktifleştirilmesi Talebi"})}),a.jsx("div",{className:"mb-8",children:a.jsx("p",{className:"mb-4",children:"Aşağıda bilgileri bulunan şahsım, geçici koruma kimlik belgesine (kimlik kartı) sahip olup, sağlık hizmetlerinden yararlanabilmem için sağlık sigortamın aktifleştirilmesini arz ederim."})}),a.jsx("div",{className:"mb-8",children:a.jsx("p",{className:"mb-4",children:"Gereğini arz ederim."})}),a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"form-field",children:[a.jsx("span",{className:"font-semibold",children:"Adı Soyadı:"}),a.jsx("span",{className:`${e?"mr-4":"ml-4"} px-2 py-1 min-w-[300px] inline-block`,children:n.fullName})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("span",{className:"font-semibold",children:"Yabancı Kimlik No:"}),a.jsx("span",{className:`${e?"mr-4":"ml-4"} px-2 py-1 min-w-[200px] inline-block`,children:n.identityNumber})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("span",{className:"font-semibold",children:"Adres:"}),a.jsx("span",{className:`${e?"mr-4":"ml-4"} px-2 py-1 min-w-[400px] inline-block`,children:n.address})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("span",{className:"font-semibold",children:"Gsm:"}),a.jsx("span",{className:`${e?"mr-4":"ml-4"} px-2 py-1 min-w-[200px] inline-block`,children:n.phoneNumber})]})]})}),a.jsx("div",{className:"signature",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"Tarih:"}),a.jsx("span",{className:`${e?"mr-4":"ml-4"} px-2 py-1 min-w-[100px] inline-block`,children:N()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"İmza:"}),a.jsx("span",{className:`${e?"mr-4":"ml-4"} px-2 py-1 min-w-[150px] inline-block`,children:"....................."})]})]})})]})})]}):a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Rt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"طلب تفعيل التأمين الصحي"}),a.jsx("p",{className:"text-jet-600 dark:text-jet-400",children:"أدخل بياناتك لإنشاء طلب تفعيل التأمين الصحي"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-jet-300 mb-2",children:"الاسم الكامل"}),a.jsxs("div",{className:"relative",children:[a.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-jet-400"}),a.jsx("input",{type:"text",value:n.fullName,onChange:y=>o({...n,fullName:y.target.value}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200 ${d.fullName?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-jet-300 dark:border-jet-600 bg-white dark:bg-jet-700 text-jet-900 dark:text-white"}`,placeholder:"أدخل الاسم الكامل"})]}),d.fullName&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center",children:[a.jsx(Ae,{className:"w-4 h-4 ml-1"}),d.fullName]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-jet-300 mb-2",children:"رقم الهوية الأجنبية"}),a.jsxs("div",{className:"relative",children:[a.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-jet-400"}),a.jsx("input",{type:"text",value:n.identityNumber,onChange:y=>o({...n,identityNumber:y.target.value}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200 ${d.identityNumber?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-jet-300 dark:border-jet-600 bg-white dark:bg-jet-700 text-jet-900 dark:text-white"}`,placeholder:"أدخل رقم الهوية"})]}),d.identityNumber&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center",children:[a.jsx(Ae,{className:"w-4 h-4 ml-1"}),d.identityNumber]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-jet-300 mb-2",children:"رقم الجوال (GSM)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-jet-400"}),a.jsx("input",{type:"tel",value:n.phoneNumber,onChange:y=>o({...n,phoneNumber:y.target.value}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200 ${d.phoneNumber?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-jet-300 dark:border-jet-600 bg-white dark:bg-jet-700 text-jet-900 dark:text-white"}`,placeholder:"أدخل رقم الجوال"})]}),d.phoneNumber&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center",children:[a.jsx(Ae,{className:"w-4 h-4 ml-1"}),d.phoneNumber]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-jet-300 mb-2",children:"العنوان"}),a.jsxs("div",{className:"relative",children:[a.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-jet-400"}),a.jsx("textarea",{value:n.address,onChange:y=>o({...n,address:y.target.value}),rows:3,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors duration-200 resize-none ${d.address?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-jet-300 dark:border-jet-600 bg-white dark:bg-jet-700 text-jet-900 dark:text-white"}`,placeholder:"أدخل العنوان الكامل"})]}),d.address&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center",children:[a.jsx(Ae,{className:"w-4 h-4 ml-1"}),d.address]})]}),a.jsx("div",{className:"pt-6",children:a.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-red-600 to-pink-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-red-700 hover:to-pink-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center space-x-2 space-x-reverse",children:[a.jsx(fe,{className:"w-5 h-5"}),a.jsx("span",{children:"إنشاء الطلب"})]})})]}),f&&a.jsx("div",{className:`mt-4 p-3 rounded-lg text-center font-medium ${f.includes("نجاح")||f.includes("başarıyla")||f.includes("success")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:f}),a.jsx("div",{className:"mt-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[a.jsx(fe,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"معلومات مهمة"}),a.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-400 space-y-1",children:[a.jsxs("li",{children:["• ","سيتم إنشاء طلب قابل للطباعة"]}),a.jsxs("li",{children:["• ","يمكنك طباعة الطلب أو تحميله كملف PDF"]})]})]})]})})]})})},$g=s=>{let e=s.replace(/\D/g,"");for(e.startsWith("0")&&(e="90"+e.substring(1)),e.startsWith("90")||(e="90"+e);e.length<12;)e="90"+e;return e.substring(0,12)},Fg=({onBack:s,isDarkMode:e,onToggleDarkMode:t})=>{const{user:r,profile:i}=Le(),{t:n}=$e(),o=Ro(),l=gi(),[c,d]=k.useState([]),[u,h]=k.useState([]),[m,f]=k.useState([]),[b,x]=k.useState(!0),[g,p]=k.useState(""),[j,v]=k.useState("all"),[N,y]=k.useState("requests"),[S,_]=k.useState("list"),[C,T]=k.useState("list"),[I,F]=k.useState("all"),[M,R]=k.useState(null),[L,D]=k.useState(null),[A,O]=k.useState(null),[$,E]=k.useState({question:"",answer:"",category:"عام",order_index:0,is_active:!0}),[G,z]=k.useState({status:"pending",priority:"medium",admin_notes:""}),[K,B]=k.useState({admin_reply:"",status:"pending"}),[W,X]=k.useState(null),[V,Y]=k.useState(!1),[ee,se]=k.useState(!1),[q,oe]=k.useState({isOpen:!1,fileUrl:"",fileName:"",fileData:null});k.useEffect(()=>{r&&(De(),Qe(),Se())},[r]),k.useEffect(()=>{const w=o.pathname,Q=new URLSearchParams(o.search),we=Q.get("view"),P=Q.get("form");w==="/admin"||w==="/admin/dashboard"||w==="/admin/service-requests"?(y("requests"),_("list"),T("list")):w==="/admin/support-messages"?(y("support"),_("list"),T("list")):w==="/admin/ready-forms"?(y("ready-forms"),P==="voluntary-return"?_(we==="create"?"create":we==="chart"?"chart":"list"):P==="health-insurance"?T(we==="create"?"create":"list"):(_("list"),T("list"))):w==="/admin/faq"?(y("faqs"),_("list"),T("list")):w==="/admin/moderators"?(y("moderators"),_("list"),T("list")):w==="/admin/analytics"&&(y("ready-forms"),_("chart"),T("list"))},[o.pathname,o.search]);const Z=w=>{switch(y(w),w){case"requests":l("/admin/service-requests");break;case"support":l("/admin/support-messages");break;case"faqs":l("/admin/faq");break;case"ready-forms":l("/admin/ready-forms");break;case"moderators":l("/admin/moderators");break;case"health-insurance":l("/admin/health-insurance");break}},be=w=>{switch(_(w),w){case"list":l("/admin/ready-forms?form=voluntary-return&view=list");break;case"create":l("/admin/ready-forms?form=voluntary-return&view=create");break;case"chart":l("/admin/ready-forms?form=voluntary-return&view=chart");break}},U=w=>{switch(T(w),w){case"list":l("/admin/ready-forms?form=health-insurance&view=list");break;case"create":l("/admin/ready-forms?form=health-insurance&view=create");break}},De=async()=>{try{x(!0),console.log("🔍 جلب طلبات الخدمات...");const{data:w,error:Q}=await H.from("service_requests").select("*").order("created_at",{ascending:!1});if(Q){console.error("خطأ في جلب الطلبات:",Q);return}console.log("📋 طلبات الخدمات:",w?.length||0),d(w||[])}catch(w){console.error("خطأ غير متوقع:",w)}finally{x(!1)}},Qe=async()=>{try{console.log("🔍 جلب رسائل الدعم...");const{data:w,error:Q}=await H.from("support_messages").select("*").order("created_at",{ascending:!1});if(Q){console.error("خطأ في جلب رسائل الدعم:",Q);return}console.log("📋 رسائل الدعم:",w?.length||0),h(w||[])}catch(w){console.error("خطأ غير متوقع:",w)}},Se=async()=>{try{console.log("🔍 جلب الأسئلة المتكررة...");const{data:w,error:Q}=await H.from("faqs").select("*").order("order_index",{ascending:!0});if(Q){console.error("خطأ في جلب الأسئلة المتكررة:",Q);return}console.log("📋 الأسئلة المتكررة:",w?.length||0),f(w||[])}catch(w){console.error("خطأ غير متوقع:",w)}},$t=w=>{R(w),z({status:w.status,priority:w.priority,admin_notes:w.admin_notes||""})},Ft=async()=>{if(M)try{const{error:w}=await H.from("service_requests").update({status:G.status,priority:G.priority,admin_notes:G.admin_notes||null,updated_at:new Date().toISOString()}).eq("id",M.id);if(w){console.error("خطأ في تحديث الطلب:",w);return}await De(),R(null),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(w){console.error("خطأ غير متوقع:",w)}},xa=w=>{D(w),B({admin_reply:w.admin_reply||"",status:w.status})},zt=async()=>{if(L)try{const{error:w}=await H.from("support_messages").update({admin_reply:K.admin_reply||null,status:K.status,updated_at:new Date().toISOString()}).eq("id",L.id);if(w){console.error("خطأ في تحديث الرد:",w);return}await Qe(),D(null),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(w){console.error("خطأ غير متوقع:",w)}},br=w=>{O(w)},Ds=async w=>{try{if(A){const{error:Q}=await H.from("faqs").update({question:w.question,answer:w.answer,category:w.category,order_index:w.order_index,is_active:w.is_active,updated_at:new Date().toISOString()}).eq("id",A.id);if(Q){console.error("خطأ في تحديث السؤال:",Q);return}}else{const{error:Q}=await H.from("faqs").insert({question:w.question,answer:w.answer,category:w.category||"عام",order_index:w.order_index||0,is_active:w.is_active!==!1});if(Q){console.error("خطأ في إضافة السؤال:",Q);return}}await Se(),O(null),se(!1),E({question:"",answer:"",category:"عام",order_index:0,is_active:!0}),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(Q){console.error("خطأ غير متوقع:",Q)}},ba=async w=>{try{const{error:Q}=await H.from("faqs").delete().eq("id",w);if(Q){console.error("خطأ في حذف السؤال:",Q);return}await Se(),X(null),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(Q){console.error("خطأ غير متوقع:",Q)}},pr=async(w,Q,we)=>{try{console.log("محاولة عرض الملف في مودال:",w);let P=null,J="application/octet-stream";if(w.startsWith("base64://")){const ie=w.replace("base64://","");let{data:ce,error:Ce}=await H.from("file_attachments").select("file_data, file_type").eq("id",ie).single();if(Ce||!ce)if(console.log("الملف غير موجود في file_attachments، محاولة جلب من service_requests..."),we){const{data:Fe,error:Ve}=await H.from("service_requests").select("file_data, file_name").eq("id",we).single();if(Ve||!Fe||!Fe.file_data)throw new Error("فشل في جلب الملف من قاعدة البيانات");P=Fe.file_data;const Re=Fe.file_name?.toLowerCase()||"";Re.endsWith(".pdf")?J="application/pdf":Re.endsWith(".jpg")||Re.endsWith(".jpeg")?J="image/jpeg":Re.endsWith(".png")?J="image/png":Re.endsWith(".gif")?J="image/gif":Re.endsWith(".txt")?J="text/plain":(Re.endsWith(".doc")||Re.endsWith(".docx"))&&(J="application/msword")}else throw new Error("فشل في جلب الملف من قاعدة البيانات");else P=ce.file_data,J=ce.file_type}else{const ie=await fetch(w,{method:"GET",headers:{Accept:"*/*"}});if(!ie.ok)throw console.error("فشل في تحميل الملف:",ie.status,ie.statusText),new Error(`فشل في تحميل الملف: ${ie.status}`);const ce=await ie.blob(),Ce=new FileReader;return new Promise(Fe=>{Ce.onload=()=>{P=Ce.result.split(",")[1],J=ce.type,oe({isOpen:!0,fileUrl:w,fileName:Q,fileData:P})},Ce.readAsDataURL(ce)})}oe({isOpen:!0,fileUrl:w,fileName:Q,fileData:P})}catch(P){console.error("خطأ في عرض الملف:",P),alert("فشل في عرض الملف. يرجى المحاولة مرة أخرى أو تحميل الملف مباشرة.")}},wt=async(w,Q,we)=>{try{console.log("محاولة تحميل الملف:",w);let P;if(w.startsWith("base64://")){const ce=w.replace("base64://","");let{data:Ce,error:Fe}=await H.from("file_attachments").select("file_data, file_type").eq("id",ce).single();if(Fe||!Ce)if(console.log("الملف غير موجود في file_attachments، محاولة جلب من service_requests..."),we){const{data:Ve,error:Re}=await H.from("service_requests").select("file_data, file_name").eq("id",we).single();if(Re||!Ve||!Ve.file_data)throw new Error("فشل في جلب الملف من قاعدة البيانات");const ut=atob(Ve.file_data),yt=new Array(ut.length);for(let wr=0;wr<ut.length;wr++)yt[wr]=ut.charCodeAt(wr);const va=new Uint8Array(yt),kt=Ve.file_name?.toLowerCase()||"";let Bt="application/octet-stream";kt.endsWith(".pdf")?Bt="application/pdf":kt.endsWith(".jpg")||kt.endsWith(".jpeg")?Bt="image/jpeg":kt.endsWith(".png")?Bt="image/png":kt.endsWith(".gif")?Bt="image/gif":kt.endsWith(".txt")?Bt="text/plain":(kt.endsWith(".doc")||kt.endsWith(".docx"))&&(Bt="application/msword"),P=new Blob([va],{type:Bt})}else throw new Error("فشل في جلب الملف من قاعدة البيانات");else{const Ve=atob(Ce.file_data),Re=new Array(Ve.length);for(let yt=0;yt<Ve.length;yt++)Re[yt]=Ve.charCodeAt(yt);const ut=new Uint8Array(Re);P=new Blob([ut],{type:Ce.file_type})}}else{const ce=await fetch(w,{method:"GET",headers:{Accept:"*/*"}});if(!ce.ok)throw console.error("فشل في تحميل الملف:",ce.status,ce.statusText),new Error(`فشل في تحميل الملف: ${ce.status}`);P=await ce.blob()}console.log("تم تحميل الملف بنجاح:",P.size,"bytes");const J=window.URL.createObjectURL(P),ie=document.createElement("a");ie.href=J,ie.download=Q||"file",ie.style.display="none",document.body.appendChild(ie),ie.click(),setTimeout(()=>{window.URL.revokeObjectURL(J),document.body.removeChild(ie)},1e3)}catch(P){console.error("خطأ في تحميل الملف:",P),alert("فشل في تحميل الملف. يرجى المحاولة مرة أخرى.")}},Rs=async w=>{try{const{error:Q}=await H.from("service_requests").delete().eq("id",w);if(Q){console.error("خطأ في حذف الطلب:",Q);return}await De(),X(null),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(Q){console.error("خطأ غير متوقع:",Q)}},Os=c.filter(w=>{const Q=w.title.toLowerCase().includes(g.toLowerCase())||w.contact_name.toLowerCase().includes(g.toLowerCase())||w.contact_email.toLowerCase().includes(g.toLowerCase()),we=j==="all"||w.status===j,P=I==="all"||w.status===I;return Q&&we&&P}),ls=u.filter(w=>{const Q=w.subject.toLowerCase().includes(g.toLowerCase())||w.message.toLowerCase().includes(g.toLowerCase())||w.name.toLowerCase().includes(g.toLowerCase()),we=j==="all"||w.status===j;return Q&&we}),cs=m.filter(w=>w.question.toLowerCase().includes(g.toLowerCase())||w.answer.toLowerCase().includes(g.toLowerCase())),ds=w=>{switch(w){case"pending":return"text-sky-600 bg-sky-100 dark:bg-sky-900/20";case"in_progress":return"text-blue-600 bg-blue-100 dark:bg-blue-900/20";case"completed":return"text-green-600 bg-green-100 dark:bg-green-900/20";case"resolved":return"text-green-600 bg-green-100 dark:bg-green-900/20";case"cancelled":return"text-red-600 bg-red-100 dark:bg-red-900/20";case"closed":return"text-gray-600 bg-gray-100 dark:bg-gray-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20"}},us=w=>{switch(w){case"pending":return a.jsx(at,{className:"w-4 h-4"});case"in_progress":return a.jsx(Ae,{className:"w-4 h-4"});case"completed":return a.jsx(fe,{className:"w-4 h-4"});case"resolved":return a.jsx(fe,{className:"w-4 h-4"});case"cancelled":return a.jsx(Ga,{className:"w-4 h-4"});case"closed":return a.jsx(Ga,{className:"w-4 h-4"});default:return a.jsx(ne,{className:"w-4 h-4"})}},vr=w=>{switch(w){case"urgent":return"text-red-600 bg-red-100 dark:bg-red-900/20";case"high":return"text-blue-600 bg-blue-100 dark:bg-blue-900/20";case"medium":return"text-sky-600 bg-sky-100 dark:bg-sky-900/20";case"low":return"text-green-600 bg-green-100 dark:bg-green-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20"}},jr=w=>({translation:"خدمات الترجمة المحلفة",travel:"خدمات السفر والسياحة",legal:"الاستشارات القانونية",government:"الخدمات الحكومية",insurance:"خدمات التأمين"})[w]||w,hs=w=>{switch(w){case"pending":return"قيد الانتظار";case"in_progress":return"قيد التنفيذ";case"completed":return"مكتملة";case"resolved":return"محلولة";case"cancelled":return"ملغية";case"closed":return"مغلقة";default:return w}},pa=w=>{switch(w){case"urgent":return"عاجل";case"high":return"عالية";case"medium":return"متوسطة";case"low":return"منخفضة";default:return w}};return b?a.jsxs("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:[a.jsx(Pe,{isDarkMode:e}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-caribbean-600 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"جاري تحميل لوحة التحكم..."})]})]}):r?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-blue-50/40 to-cyan-50/30 dark:from-jet-900 dark:via-jet-800 dark:to-jet-900 relative overflow-hidden",children:[a.jsx(Pe,{isDarkMode:e}),a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-gradient-to-br from-sky-200/8 to-transparent rounded-full animate-pulse",style:{animationDuration:"4s"}}),a.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 bg-gradient-to-bl from-blue-200/6 to-transparent rounded-full animate-pulse",style:{animationDelay:"2s",animationDuration:"5s"}}),a.jsx("div",{className:"absolute bottom-20 left-1/4 w-40 h-40 bg-gradient-to-tr from-cyan-200/4 to-sky-200/4 rounded-full animate-pulse",style:{animationDelay:"1s",animationDuration:"6s"}}),a.jsx("div",{className:"absolute bottom-40 right-1/3 w-20 h-20 bg-gradient-to-r from-blue-200/5 to-cyan-200/5 rounded-full animate-pulse",style:{animationDelay:"3s",animationDuration:"4s"}})]}),a.jsx("style",{jsx:!0,global:!0,children:`
        /* Phone number formatting for Arabic */
        .phone-number {
          direction: ltr !important;
          text-align: left !important;
          unicode-bidi: bidi-override !important;
          font-family: monospace !important;
        }

        /* Flag Gloss Effect */
        .flag-gloss {
          position: relative;
          overflow: hidden;
        }
        
        .flag-gloss::before {
          content: '';
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: linear-gradient(
            45deg,
            transparent 30%,
            rgba(255, 255, 255, 0.1) 40%,
            rgba(255, 255, 255, 0.2) 50%,
            rgba(255, 255, 255, 0.1) 60%,
            transparent 70%
          );
          transform: rotate(45deg);
          transition: all 0.3s ease;
          opacity: 0;
        }
        
        .flag-gloss:hover::before {
          opacity: 1;
          animation: gloss-shine 1.5s ease-in-out;
        }
        
        @keyframes gloss-shine {
          0% {
            transform: translateX(-100%) translateY(-100%) rotate(45deg);
          }
          50% {
            transform: translateX(0%) translateY(0%) rotate(45deg);
          }
          100% {
            transform: translateX(100%) translateY(100%) rotate(45deg);
          }
        }

        /* Flag Shadow Effect */
        .flag-shadow {
          box-shadow: 
            0 2px 4px rgba(0, 0, 0, 0.1),
            0 4px 8px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        /* Ensure cursor is always on top */
        .cursor-element {
          z-index: 9999 !important;
          position: fixed !important;
        }

        /* Hide custom cursor on touch devices */
        @media (hover: none) and (pointer: coarse) {
          .cursor-element {
            display: none !important;
          }
        }
      `}),a.jsx(Zu,{}),a.jsx(Yu,{onBack:s,isDarkMode:e,onToggleDarkMode:t}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 md:py-8",children:[a.jsxs("div",{className:"mb-4 flex items-center text-sm text-jet-600 dark:text-platinum-400",children:[a.jsx("button",{onClick:()=>l("/admin"),className:"hover:text-caribbean-600 dark:hover:text-caribbean-400 transition-colors duration-200",children:"لوحة التحكم"}),N!=="requests"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mx-2",children:"/"}),a.jsxs("span",{className:"text-caribbean-600 dark:text-caribbean-400",children:[N==="support"&&"رسائل الدعم",N==="faqs"&&"الأسئلة الشائعة",N==="ready-forms"&&"نماذج جاهزة",N==="moderators"&&(i?.role==="admin"?"إدارة المشرفين":"الوصول مرفوض")]})]}),N==="ready-forms"&&S!=="list"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mx-2",children:"/"}),a.jsxs("span",{className:"text-caribbean-600 dark:text-caribbean-400",children:[S==="create"&&"إنشاء نموذج جديد",S==="chart"&&"الإحصائيات"]})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-white via-sky-50/30 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 rounded-xl shadow-lg border border-sky-200 dark:border-jet-700 mb-8 overflow-hidden",children:a.jsxs("div",{className:"flex border-b border-sky-200 dark:border-jet-700 overflow-x-auto bg-gradient-to-r from-sky-50/20 via-transparent to-blue-50/20 dark:from-sky-900/10 dark:via-transparent dark:to-blue-900/10",children:[a.jsx("button",{onClick:()=>Z("requests"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${N==="requests"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsxs("span",{className:"text-sm md:text-base",children:["طلبات (",c.length,")"]})]})}),a.jsx("button",{onClick:()=>Z("support"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${N==="support"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsxs("span",{className:"text-sm md:text-base",children:["دعم (",u.length,")"]})]})}),a.jsx("button",{onClick:()=>Z("faqs"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${N==="faqs"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vr,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsxs("span",{className:"text-sm md:text-base",children:["أسئلة (",m.length,")"]})]})}),a.jsx("button",{onClick:()=>Z("ready-forms"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${N==="ready-forms"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Jt,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"نماذج جاهزة"})]})}),a.jsx("button",{onClick:()=>Z("moderators"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${N==="moderators"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ee,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"المشرفين"})]})}),a.jsx("button",{onClick:()=>Z("health-insurance"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${N==="health-insurance"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ee,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"التأمين الصحي"})]})})]})}),N==="requests"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 mb-6 md:mb-8",children:[a.jsx("button",{onClick:()=>F("all"),className:`group bg-gradient-to-br from-white via-sky-50/20 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 p-4 md:p-6 rounded-xl shadow-lg border transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-right ${I==="all"?"border-sky-300 dark:border-sky-500 shadow-sky-200/50 dark:shadow-sky-500/20":"border-sky-200 dark:border-jet-700"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`p-3 rounded-lg transition-all duration-300 ${I==="all"?"bg-caribbean-200 dark:bg-caribbean-800 group-hover:animate-pulse":"bg-caribbean-100 dark:bg-caribbean-900/20"}`,children:a.jsx(ne,{className:"w-6 h-6 text-caribbean-600 dark:text-caribbean-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"إجمالي الطلبات"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:c.length})]})]})}),a.jsx("button",{onClick:()=>F("pending"),className:`group bg-gradient-to-br from-white via-sky-50/20 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 p-4 md:p-6 rounded-xl shadow-lg border transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-right ${I==="pending"?"border-sky-300 dark:border-sky-500 shadow-sky-200/50 dark:shadow-sky-500/20":"border-sky-200 dark:border-jet-700"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`p-3 rounded-lg transition-all duration-300 ${I==="pending"?"bg-sky-200 dark:bg-sky-800 group-hover:animate-pulse":"bg-sky-100 dark:bg-sky-900/20"}`,children:a.jsx(at,{className:"w-6 h-6 text-sky-600 dark:text-sky-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"قيد الانتظار"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:c.filter(w=>w.status==="pending").length})]})]})}),a.jsx("button",{onClick:()=>F("in_progress"),className:`group bg-gradient-to-br from-white via-sky-50/20 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 p-4 md:p-6 rounded-xl shadow-lg border transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-right ${I==="in_progress"?"border-blue-300 dark:border-blue-500 shadow-blue-200/50 dark:shadow-blue-500/20":"border-sky-200 dark:border-jet-700"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`p-3 rounded-lg transition-all duration-300 ${I==="in_progress"?"bg-blue-200 dark:bg-blue-800 group-hover:animate-pulse":"bg-blue-100 dark:bg-blue-900/20"}`,children:a.jsx(Ae,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"قيد التنفيذ"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:c.filter(w=>w.status==="in_progress").length})]})]})}),a.jsx("button",{onClick:()=>F("completed"),className:`group bg-gradient-to-br from-white via-sky-50/20 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 p-4 md:p-6 rounded-xl shadow-lg border transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-right ${I==="completed"?"border-green-300 dark:border-green-500 shadow-green-200/50 dark:shadow-green-500/20":"border-sky-200 dark:border-jet-700"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`p-3 rounded-lg transition-all duration-300 ${I==="completed"?"bg-green-200 dark:bg-green-800 group-hover:animate-pulse":"bg-green-100 dark:bg-green-900/20"}`,children:a.jsx(fe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"مكتملة"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:c.filter(w=>w.status==="completed").length})]})]})})]}),I!=="all"&&a.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-sky-50 to-blue-50 dark:from-sky-900/20 dark:to-blue-900/20 rounded-xl border border-sky-200 dark:border-sky-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-sky-100 dark:bg-sky-800 rounded-lg mr-3",children:a.jsx(ne,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"عرض الطلبات:"}),a.jsx("p",{className:"font-semibold text-jet-800 dark:text-white",children:I==="pending"?"قيد الانتظار":I==="in_progress"?"قيد التنفيذ":I==="completed"?"مكتملة":"جميع الطلبات"})]})]}),a.jsx("button",{onClick:()=>F("all"),className:"px-3 py-1 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors text-sm",children:"عرض الكل"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-white via-sky-50/30 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 p-6 rounded-xl shadow-lg border border-sky-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-500 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"البحث في الطلبات...",value:g,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]}),a.jsxs("select",{value:j,onChange:w=>v(w.target.value),className:"px-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"جميع الحالات"}),a.jsx("option",{value:"pending",children:"قيد الانتظار"}),a.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),a.jsx("option",{value:"completed",children:"مكتملة"}),a.jsx("option",{value:"cancelled",children:"ملغية"})]})]})}),a.jsx("div",{className:"space-y-4 md:space-y-6",children:Os.length===0?a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-12 text-center",children:[a.jsx(ne,{className:"w-16 h-16 text-jet-400 dark:text-platinum-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-jet-800 dark:text-white mb-2",children:"لا توجد طلبات"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"لا توجد طلبات تطابق معايير البحث"})]}):Os.map(w=>a.jsx("div",{className:"group bg-gradient-to-br from-white via-sky-50/20 to-white dark:from-jet-800 dark:via-jet-700 dark:to-jet-800 rounded-xl shadow-lg border border-sky-200 dark:border-jet-700 p-4 md:p-6 hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-white ml-3",children:w.title}),a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ds(w.status)}`,children:[us(w.status),a.jsx("span",{className:"mr-1",children:hs(w.status)})]})]}),a.jsxs("p",{className:"text-jet-600 dark:text-platinum-400 mb-2",children:[a.jsx("strong",{children:"نوع الخدمة:"})," ",jr(w.service_type)]}),w.description&&a.jsx("p",{className:"text-jet-700 dark:text-platinum-300 mb-3",children:w.description}),w.file_url&&a.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-r from-sky-50 to-blue-50 dark:from-sky-900/10 dark:to-blue-900/10 rounded-lg border border-sky-200 dark:border-sky-700/30",children:[a.jsxs("p",{className:"text-sm text-sky-800 dark:text-sky-300 mb-2",children:[a.jsx("strong",{children:"الملف المرفق:"})," ",w.file_name||"ملف مرفق",w.file_url.startsWith("base64://")&&a.jsx("span",{className:"ml-2 text-xs text-emerald-600 dark:text-emerald-400",children:"(محفوظ في قاعدة البيانات)"})]}),a.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[a.jsxs("button",{onClick:()=>pr(w.file_url,w.file_name||"file",w.id),className:"group flex items-center px-4 py-2 bg-gradient-to-r from-sky-500 to-blue-500 text-white text-sm rounded-xl hover:from-sky-600 hover:to-blue-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx(ts,{className:"w-4 h-4 ml-2 group-hover:animate-pulse"}),a.jsx("span",{className:"font-semibold",children:"عرض"})]}),a.jsxs("button",{onClick:()=>wt(w.file_url,w.file_name||"file",w.id),className:"group flex items-center px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-sm rounded-xl hover:from-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx(rs,{className:"w-4 h-4 ml-2 group-hover:animate-bounce"}),a.jsx("span",{className:"font-semibold",children:"تحميل"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse text-sm text-jet-500 dark:text-platinum-500 mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(it,{className:"w-4 h-4 ml-1"}),a.jsx("span",{children:xe(w.created_at)})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${vr(w.priority)}`,children:pa(w.priority)})]}),a.jsxs("div",{className:"bg-platinum-50 dark:bg-jet-700 p-3 rounded-lg mb-3",children:[a.jsx("h4",{className:"font-medium text-jet-800 dark:text-white mb-2",children:"معلومات التواصل"}),a.jsxs("div",{className:"text-sm text-jet-600 dark:text-platinum-400 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"الاسم:"})," ",w.contact_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"البريد الإلكتروني:"})," ",w.contact_email]}),w.contact_phone&&a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:"text-jet-600 dark:text-platinum-400",children:[a.jsx("strong",{children:"رقم الجوال:"})," ",a.jsxs("span",{className:"font-mono text-left font-bold",dir:"ltr",children:[w.contact_country_code," ",w.contact_phone]})]}),a.jsx("a",{href:`https://wa.me/${$g(w.contact_country_code+w.contact_phone)}`,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors cursor-pointer",title:"فتح الواتساب",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"w-4 h-4 ml-1"}),a.jsx("a",{href:`mailto:${w.contact_email}?subject=بخصوص طلبك: ${w.title}`,className:"text-caribbean-600 dark:text-caribbean-400 hover:underline",children:"إرسال بريد إلكتروني"})]})]})]}),w.admin_notes&&a.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[a.jsx("strong",{children:"ملاحظات الإدارة:"})," ",w.admin_notes]})})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>$t(w),className:"p-2 text-caribbean-600 hover:text-caribbean-700 dark:text-caribbean-400 dark:hover:text-caribbean-300 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 rounded-lg transition-colors duration-200",title:"تعديل الطلب",children:a.jsx(tr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>X(w.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:"حذف الطلب",children:a.jsx(Tt,{className:"w-4 h-4"})})]})]})},w.id))})]}),N==="support"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-caribbean-100 dark:bg-caribbean-900/20 rounded-lg",children:a.jsx(He,{className:"w-6 h-6 text-caribbean-600 dark:text-caribbean-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"إجمالي الرسائل"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:u.length})]})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-sky-100 dark:bg-sky-900/20 rounded-lg",children:a.jsx(at,{className:"w-6 h-6 text-sky-600 dark:text-sky-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"قيد الانتظار"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:u.filter(w=>w.status==="pending").length})]})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(Ae,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"قيد المعالجة"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:u.filter(w=>w.status==="in_progress").length})]})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(fe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"محلولة"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:u.filter(w=>w.status==="resolved").length})]})]})})]}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-500 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"البحث في رسائل الدعم...",value:g,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]}),a.jsxs("select",{value:j,onChange:w=>v(w.target.value),className:"px-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"جميع الحالات"}),a.jsx("option",{value:"pending",children:"قيد الانتظار"}),a.jsx("option",{value:"in_progress",children:"قيد المعالجة"}),a.jsx("option",{value:"resolved",children:"محلولة"}),a.jsx("option",{value:"closed",children:"مغلقة"})]})]})}),a.jsx("div",{className:"space-y-6",children:ls.length===0?a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-12 text-center",children:[a.jsx(He,{className:"w-16 h-16 text-jet-400 dark:text-platinum-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-jet-800 dark:text-white mb-2",children:"لا توجد رسائل"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"لا توجد رسائل دعم تطابق معايير البحث"})]}):ls.map(w=>a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-6",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-white ml-3",children:w.subject}),a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ds(w.status)}`,children:[us(w.status),a.jsx("span",{className:"mr-1",children:hs(w.status)})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("p",{className:"text-jet-600 dark:text-platinum-400 mb-2",children:[a.jsx("strong",{children:"من:"})," ",w.name," (",w.email,")"]}),a.jsx("p",{className:"text-jet-700 dark:text-platinum-300 bg-platinum-50 dark:bg-jet-700 p-3 rounded-lg",children:w.message})]}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse text-sm text-jet-500 dark:text-platinum-500 mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(it,{className:"w-4 h-4 ml-1"}),a.jsx("span",{children:xe(w.created_at)})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"w-4 h-4 ml-1"}),a.jsx("a",{href:`mailto:${w.email}?subject=رد على: ${w.subject}`,className:"text-caribbean-600 dark:text-caribbean-400 hover:underline",children:"رد بالبريد الإلكتروني"})]})]}),w.admin_reply&&a.jsxs("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[a.jsx("strong",{children:"رد الإدارة:"})," ",w.admin_reply]}),w.admin_reply_date&&a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["تاريخ الرد: ",xe(w.admin_reply_date)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>xa(w),className:"p-2 text-caribbean-600 hover:text-caribbean-700 dark:text-caribbean-400 dark:hover:text-caribbean-300 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 rounded-lg transition-colors duration-200",title:"الرد على الرسالة",children:a.jsx(Hi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>X(w.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:"حذف الرسالة",children:a.jsx(Tt,{className:"w-4 h-4"})})]})]})},w.id))})]}),N==="faqs"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"إدارة الأسئلة المتكررة"}),a.jsxs("button",{onClick:()=>se(!0),className:"flex items-center px-4 py-2 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300",children:[a.jsx(Ct,{className:"w-4 h-4 ml-2"}),"إضافة سؤال جديد"]})]}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-500 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"البحث في الأسئلة المتكررة...",value:g,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]})}),a.jsx("div",{className:"space-y-6",children:cs.length===0?a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-12 text-center",children:[a.jsx(Vr,{className:"w-16 h-16 text-jet-400 dark:text-platinum-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-jet-800 dark:text-white mb-2",children:"لا توجد أسئلة"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"لا توجد أسئلة متكررة تطابق معايير البحث"})]}):cs.map(w=>a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-6",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("h3",{className:"text-lg font-bold text-jet-800 dark:text-white ml-3",children:w.question}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.is_active?"text-green-600 bg-green-100 dark:bg-green-900/20":"text-red-600 bg-red-100 dark:bg-red-900/20"}`,children:w.is_active?"نشط":"غير نشط"}),a.jsx("span",{className:"inline-block px-2 py-1 bg-caribbean-100 dark:bg-caribbean-900/20 text-caribbean-700 dark:text-caribbean-400 text-xs rounded-full mr-2",children:w.category})]}),a.jsx("p",{className:"text-jet-700 dark:text-platinum-300 mb-3 bg-platinum-50 dark:bg-jet-700 p-3 rounded-lg",children:w.answer}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse text-sm text-jet-500 dark:text-platinum-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(it,{className:"w-4 h-4 ml-1"}),a.jsx("span",{children:xe(w.created_at)})]}),a.jsxs("span",{children:["ترتيب: ",w.order_index]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>br(w),className:"p-2 text-caribbean-600 hover:text-caribbean-700 dark:text-caribbean-400 dark:hover:text-caribbean-300 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 rounded-lg transition-colors duration-200",title:"تعديل السؤال",children:a.jsx(tr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>X(w.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:"حذف السؤال",children:a.jsx(Tt,{className:"w-4 h-4"})})]})]})},w.id))})]}),N==="ready-forms"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 md:mb-8 space-y-4 md:space-y-0",children:a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-jet-800 dark:text-white text-center md:text-right",children:"إدارة النماذج الجاهزة"})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"flex border-b border-platinum-200 dark:border-jet-700 overflow-x-auto",children:[a.jsx("button",{onClick:()=>{_("list"),T("list"),l("/admin/ready-forms?form=voluntary-return&view=list")},className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${!searchParams.get("form")||searchParams.get("form")==="voluntary-return"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"نموذج عودة طوعية"})]})}),a.jsx("button",{onClick:()=>{_("list"),T("list"),l("/admin/ready-forms?form=health-insurance&view=list")},className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${searchParams.get("form")==="health-insurance"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rt,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"نموذج تفعيل التأمين الصحي"})]})})]})}),(!searchParams.get("form")||searchParams.get("form")==="voluntary-return")&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"flex border-b border-platinum-200 dark:border-jet-700 overflow-x-auto",children:[a.jsx("button",{onClick:()=>be("list"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${S==="list"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"قائمة النماذج المنشأة"})]})}),a.jsx("button",{onClick:()=>be("create"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${S==="create"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ct,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"إنشاء نموذج جديد"})]})}),a.jsx("button",{onClick:()=>be("chart"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${S==="chart"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(xi,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"الإحصائيات"})]})})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:S==="list"?a.jsx(ul,{isDarkMode:e}):S==="create"?a.jsx(hl,{isDarkMode:e}):a.jsx(sc,{isDarkMode:e})})]}),searchParams.get("form")==="health-insurance"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"flex border-b border-platinum-200 dark:border-jet-700 overflow-x-auto",children:[a.jsx("button",{onClick:()=>U("list"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${C==="list"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"قائمة النماذج المنشأة"})]})}),a.jsx("button",{onClick:()=>U("create"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${C==="create"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ct,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"إنشاء نموذج جديد"})]})})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:C==="list"?a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-jet-800 dark:text-white mb-4",children:"قائمة نماذج تفعيل التأمين الصحي"}),a.jsx("p",{className:"text-jet-600 dark:text-jet-400",children:"سيتم إضافة قائمة النماذج المنشأة هنا قريباً"})]}):a.jsx(Ao,{isDarkMode:e})})]})]})]}),M&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>R(null)}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"تحديث الطلب"}),a.jsx("button",{onClick:()=>R(null),className:"text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200",children:a.jsx(_e,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"حالة الطلب"}),a.jsxs("select",{value:G.status,onChange:w=>z({...G,status:w.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"pending",children:"قيد الانتظار"}),a.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),a.jsx("option",{value:"completed",children:"مكتملة"}),a.jsx("option",{value:"cancelled",children:"ملغية"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"أولوية الطلب"}),a.jsxs("select",{value:G.priority,onChange:w=>z({...G,priority:w.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"low",children:"منخفضة"}),a.jsx("option",{value:"medium",children:"متوسطة"}),a.jsx("option",{value:"high",children:"عالية"}),a.jsx("option",{value:"urgent",children:"عاجل"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"ملاحظات الإدارة"}),a.jsx("textarea",{value:G.admin_notes,onChange:w=>z({...G,admin_notes:w.target.value}),rows:4,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"أضف ملاحظات للعميل..."})]}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse pt-4",children:[a.jsxs("button",{onClick:Ft,className:"flex-1 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 flex items-center justify-center",children:[a.jsx(ss,{className:"w-4 h-4 ml-2"}),"حفظ التغييرات"]}),a.jsx("button",{onClick:()=>R(null),className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300",children:"إلغاء"})]})]})]})]}),L&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>D(null)}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"الرد على الرسالة"}),a.jsx("button",{onClick:()=>D(null),className:"text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200",children:a.jsx(_e,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-platinum-50 dark:bg-jet-700 p-3 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mb-1",children:[a.jsx("strong",{children:"الموضوع:"})," ",L.subject]}),a.jsxs("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:[a.jsx("strong",{children:"من:"})," ",L.name," (",L.email,")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"حالة الرسالة"}),a.jsxs("select",{value:K.status,onChange:w=>B({...K,status:w.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"pending",children:"قيد الانتظار"}),a.jsx("option",{value:"in_progress",children:"قيد المعالجة"}),a.jsx("option",{value:"resolved",children:"محلولة"}),a.jsx("option",{value:"closed",children:"مغلقة"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رد الإدارة"}),a.jsx("textarea",{value:K.admin_reply,onChange:w=>B({...K,admin_reply:w.target.value}),rows:4,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب ردك هنا..."})]}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse pt-4",children:[a.jsxs("button",{onClick:zt,className:"flex-1 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 flex items-center justify-center",children:[a.jsx(Hi,{className:"w-4 h-4 ml-2"}),"إرسال الرد"]}),a.jsx("button",{onClick:()=>D(null),className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300",children:"إلغاء"})]})]})]})]}),(ee||A)&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>{se(!1),O(null)}}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:A?"تعديل السؤال":"إضافة سؤال جديد"}),a.jsx("button",{onClick:()=>{se(!1),O(null)},className:"text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200",children:a.jsx(_e,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"السؤال"}),a.jsx("input",{type:"text",value:A?A.question:$.question,onChange:w=>{A?O({...A,question:w.target.value}):E({...$,question:w.target.value})},className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب السؤال هنا..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الإجابة"}),a.jsx("textarea",{value:A?A.answer:$.answer,onChange:w=>{A?O({...A,answer:w.target.value}):E({...$,answer:w.target.value})},rows:4,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب الإجابة هنا..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"التصنيف"}),a.jsx("input",{type:"text",value:A?A.category:$.category,onChange:w=>{A?O({...A,category:w.target.value}):E({...$,category:w.target.value})},className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"مثال: عام، خدمات، أسعار..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"ترتيب العرض"}),a.jsx("input",{type:"number",value:A?A.order_index:$.order_index,onChange:w=>{const Q=parseInt(w.target.value)||0;A?O({...A,order_index:Q}):E({...$,order_index:Q})},className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"0"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"is_active",checked:A?A.is_active:$.is_active,onChange:w=>{A?O({...A,is_active:w.target.checked}):E({...$,is_active:w.target.checked})},className:"w-4 h-4 text-caribbean-600 bg-white dark:bg-jet-700 border-platinum-300 dark:border-jet-600 rounded focus:ring-caribbean-500 dark:focus:ring-caribbean-400 focus:ring-2"}),a.jsx("label",{htmlFor:"is_active",className:"mr-2 text-sm font-medium text-jet-700 dark:text-platinum-300",children:"نشط (يظهر للعملاء)"})]}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse pt-4",children:[a.jsxs("button",{onClick:()=>Ds(A||$),className:"flex-1 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 flex items-center justify-center",children:[a.jsx(ss,{className:"w-4 h-4 ml-2"}),A?"حفظ التغييرات":"إضافة السؤال"]}),a.jsx("button",{onClick:()=>{se(!1),O(null)},className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300",children:"إلغاء"})]})]})]})]}),W&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>X(null)}),a.jsx("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Tt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"تأكيد الحذف"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-6",children:"هل أنت متأكد من حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء."}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[a.jsx("button",{onClick:()=>{N==="requests"?Rs(W):N==="faqs"&&ba(W)},className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-red-700 transition-colors duration-300",children:"حذف"}),a.jsx("button",{onClick:()=>X(null),className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300",children:"إلغاء"})]})]})})]}),q.isOpen&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 via-purple-900/20 to-blue-900/20 backdrop-blur-xl",onClick:()=>oe({...q,isOpen:!1})}),a.jsx("div",{className:"relative w-full max-w-3xl mx-auto animate-fade-in-up",children:a.jsxs("div",{className:"bg-white/10 dark:bg-jet-900/20 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/20 dark:border-jet-600/20 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-pink-500/20 rounded-3xl blur-xl"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20 dark:border-jet-600/20 bg-white/10 dark:bg-jet-800/10 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(ne,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white dark:border-jet-800 animate-pulse"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"عرض الملف"}),a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mt-1",children:q.fileName})]})]}),a.jsx("button",{onClick:()=>oe({...q,isOpen:!1}),className:"group w-10 h-10 bg-white/20 dark:bg-jet-700/20 hover:bg-white/30 dark:hover:bg-jet-600/30 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 hover:rotate-90",children:a.jsx(_e,{className:"w-5 h-5 text-jet-600 dark:text-platinum-400 group-hover:text-red-500 transition-colors duration-200"})})]}),a.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:q.fileData?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50/80 via-purple-50/80 to-pink-50/80 dark:from-blue-900/30 dark:via-purple-900/30 dark:to-pink-900/30 backdrop-blur-sm rounded-2xl p-6 border border-white/30 dark:border-jet-600/30 shadow-xl",children:[a.jsx("div",{className:"mb-6",children:(()=>{const w=q.fileName.toLowerCase(),Q=w.endsWith(".jpg")||w.endsWith(".jpeg")||w.endsWith(".png")||w.endsWith(".gif")||w.endsWith(".webp"),we=w.endsWith(".pdf"),P=w.endsWith(".txt")||w.endsWith(".doc")||w.endsWith(".docx")||w.endsWith(".rtf");if(Q){let J=`data:image/jpeg;base64,${q.fileData}`;return w.endsWith(".png")?J=`data:image/png;base64,${q.fileData}`:w.endsWith(".gif")?J=`data:image/gif;base64,${q.fileData}`:w.endsWith(".webp")&&(J=`data:image/webp;base64,${q.fileData}`),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsx("img",{src:J,alt:q.fileName,className:"max-w-full max-h-64 rounded-xl shadow-lg border-2 border-white/30 dark:border-jet-600/30 object-contain",onError:ie=>{const ce=ie.currentTarget;ce.style.display="none";const Ce=ce.nextElementSibling;Ce&&(Ce.style.display="flex")}}),a.jsx("div",{className:"hidden w-64 h-64 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(ne,{className:"w-16 h-16 text-white"})})]}),a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mt-2",children:"معاينة الصورة"})]})}else{if(we)return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-64 h-64 bg-gradient-to-r from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ne,{className:"w-16 h-16 text-white mb-2"}),a.jsx("p",{className:"text-white font-semibold",children:"PDF"})]})}),a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mt-2",children:'ملف PDF - اضغط "فتح في تبويب جديد" لعرضه'})]});if(P)try{const J=atob(q.fileData),ie=J.length>200?J.substring(0,200)+"...":J;return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-64 h-32 bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-4 mx-auto overflow-hidden",children:a.jsx("div",{className:"text-white text-sm text-right leading-relaxed h-full overflow-y-auto",children:ie})}),a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mt-2",children:"معاينة النص"})]})}catch{return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-64 h-32 bg-gradient-to-r from-gray-500 to-gray-600 rounded-xl flex items-center justify-center mx-auto",children:a.jsx(ne,{className:"w-12 h-12 text-white"})}),a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mt-2",children:"ملف نصي"})]})}else return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-64 h-32 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg mx-auto",children:a.jsx(ne,{className:"w-12 h-12 text-white"})}),a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400 mt-2",children:"ملف مرفق"})]})}})()}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-white mb-1",children:q.fileName}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 text-sm",children:"ملف مرفق جاهز للعرض"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4 sm:space-x-reverse",children:[a.jsxs("button",{onClick:()=>wt(q.fileUrl,q.fileName),className:"group flex items-center px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform text-sm",children:[a.jsx(rs,{className:"w-4 h-4 ml-2 group-hover:animate-bounce"}),a.jsx("span",{className:"font-semibold",children:"تحميل الملف"})]}),a.jsxs("button",{onClick:()=>{const w=new Blob([Uint8Array.from(atob(q.fileData),we=>we.charCodeAt(0))],{type:"application/octet-stream"}),Q=window.URL.createObjectURL(w);window.open(Q,"_blank")},className:"group flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform text-sm",children:[a.jsx(xc,{className:"w-4 h-4 ml-2 group-hover:animate-pulse"}),a.jsx("span",{className:"font-semibold",children:"فتح في تبويب جديد"})]})]})]}),a.jsxs("div",{className:"bg-white/30 dark:bg-jet-700/30 backdrop-blur-sm rounded-2xl p-4 border border-white/20 dark:border-jet-600/20",children:[a.jsxs("h4",{className:"font-bold text-jet-800 dark:text-white mb-3 text-base flex items-center",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center ml-2",children:a.jsx(ne,{className:"w-3 h-3 text-white"})}),"معلومات الملف"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white/20 dark:bg-jet-600/20 rounded-xl p-3",children:[a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 text-xs font-medium",children:"اسم الملف:"}),a.jsx("span",{className:"block font-bold text-jet-800 dark:text-white text-sm mt-1 truncate",children:q.fileName})]}),a.jsxs("div",{className:"bg-white/20 dark:bg-jet-600/20 rounded-xl p-3",children:[a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 text-xs font-medium",children:"حجم البيانات:"}),a.jsxs("span",{className:"block font-bold text-jet-800 dark:text-white text-sm mt-1",children:[Math.round(q.fileData.length*.75/1024)," KB"]})]})]})]})]}):a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-jet-700 dark:to-jet-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:a.jsx(ne,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-white mb-2",children:"لا يمكن عرض الملف"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"يرجى تحميل الملف لعرضه"})]})})]})]})})]}),N==="moderators"&&a.jsxs(a.Fragment,{children:[i?.role==="admin"&&a.jsx(Lg,{isDarkMode:e}),i?.role!=="admin"&&a.jsx("div",{className:"flex-1 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white/20 dark:bg-jet-800/20 backdrop-blur-md border border-white/30 dark:border-jet-600/30 rounded-2xl shadow-2xl p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-red-500/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ee,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"🔒 الوصول مرفوض"}),a.jsx("p",{className:"text-lg text-jet-600 dark:text-platinum-400 mb-6",children:"فقط الأدمن يمكنه الوصول إلى هذه الصفحة"}),a.jsx("div",{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border border-red-500/20 rounded-xl p-4",children:a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"هذه الصفحة مخصصة لإدارة المشرفين وتتطلب صلاحيات أدمن كاملة"})})]})})})]}),N==="health-insurance"&&a.jsxs(a.Fragment,{children:[(i?.role==="admin"||i?.role==="moderator")&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 md:mb-8 space-y-4 md:space-y-0",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-jet-800 dark:text-white text-center md:text-right",children:"إدارة التأمين الصحي"}),C==="list"&&a.jsxs("button",{onClick:()=>U("create"),className:"w-full md:w-auto flex items-center justify-center px-4 py-2 bg-gradient-to-r from-red-600 to-pink-700 text-white rounded-lg font-semibold hover:from-red-700 hover:to-pink-800 transition-all duration-300",children:[a.jsx(Ct,{className:"w-4 h-4 ml-2"}),"نموذج تفعيل التأمين الصحي"]})]}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"flex border-b border-platinum-200 dark:border-jet-700 overflow-x-auto",children:[a.jsx("button",{onClick:()=>U("list"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${C==="list"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ee,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"إدارة التأمين الصحي"})]})}),a.jsx("button",{onClick:()=>U("create"),className:`px-3 md:px-6 py-3 md:py-4 font-medium transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${C==="create"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rt,{className:"w-4 h-4 md:w-5 md:h-5 ml-1 md:ml-2"}),a.jsx("span",{className:"text-sm md:text-base",children:"نموذج تفعيل التأمين الصحي"})]})})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:C==="list"?a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-jet-800 dark:text-white mb-4",children:"قائمة نماذج تفعيل التأمين الصحي"}),a.jsx("p",{className:"text-jet-600 dark:text-jet-400",children:"سيتم إضافة قائمة النماذج المنشأة هنا قريباً"})]}):a.jsx(Ao,{isDarkMode:e})})]}),i?.role!=="admin"&&i?.role!=="moderator"&&a.jsx("div",{className:"flex-1 p-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"bg-white/20 dark:bg-jet-800/20 backdrop-blur-md border border-white/30 dark:border-jet-600/30 rounded-2xl shadow-2xl p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-red-500/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ee,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"🔒 الوصول مرفوض"}),a.jsx("p",{className:"text-lg text-jet-600 dark:text-platinum-400 mb-6",children:"فقط الأدمن والمشرفين يمكنهم الوصول إلى هذه الصفحة"}),a.jsx("div",{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border border-red-500/20 rounded-xl p-4",children:a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"هذه الصفحة مخصصة لإدارة التأمين الصحي وتتطلب صلاحيات أدمن أو مشرف"})})]})})})]}),V&&a.jsx("div",{className:"fixed top-4 right-4 z-50",children:a.jsxs("div",{className:"bg-white/20 dark:bg-jet-800/20 backdrop-blur-md border border-white/30 dark:border-jet-600/30 rounded-2xl shadow-2xl p-6 text-center animate-fade-in",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-in",children:a.jsx(fe,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"text-lg font-bold text-jet-800 dark:text-white mb-2",children:"تم الحفظ بنجاح! ✨"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 text-sm",children:"تم تحديث البيانات بنجاح"}),a.jsx("div",{className:"mt-4 w-full bg-white/20 dark:bg-jet-700/20 rounded-full h-1 overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500/60 rounded-full animate-expand-width"})})]})})]}):a.jsxs("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:[a.jsx(Pe,{isDarkMode:e}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"غير مصرح"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"يجب تسجيل الدخول للوصول إلى لوحة التحكم"})]})]})},zg=({onBack:s,isDarkMode:e})=>{const{user:t,profile:r}=Le(),{language:i}=$e(),n=i==="ar",o=(E,G)=>E?G?a.jsx("span",{className:"phone-number",style:{direction:"ltr",textAlign:"left",unicodeBidi:"bidi-override"},children:E}):E:"",[l,c]=k.useState([]),[d,u]=k.useState(!0),[h,m]=k.useState(""),[f,b]=k.useState("all"),[x,g]=k.useState(null),[p,j]=k.useState({title:"",description:""}),[v,N]=k.useState(null),[y,S]=k.useState(!1),_=async(E,G,z)=>{try{console.log("محاولة عرض الملف:",E);let K=null,B="application/octet-stream";if(E.startsWith("base64://")){const Y=E.replace("base64://","");let{data:ee,error:se}=await H.from("file_attachments").select("file_data, file_type").eq("id",Y).single();if(se||!ee)if(console.log("الملف غير موجود في file_attachments، محاولة جلب من service_requests..."),z){const{data:q,error:oe}=await H.from("service_requests").select("file_data, file_name").eq("id",z).single();if(oe||!q||!q.file_data)throw new Error("فشل في جلب الملف من قاعدة البيانات");K=q.file_data;const Z=q.file_name?.toLowerCase()||"";Z.endsWith(".pdf")?B="application/pdf":Z.endsWith(".jpg")||Z.endsWith(".jpeg")?B="image/jpeg":Z.endsWith(".png")?B="image/png":Z.endsWith(".gif")?B="image/gif":Z.endsWith(".txt")?B="text/plain":(Z.endsWith(".doc")||Z.endsWith(".docx"))&&(B="application/msword")}else throw new Error("فشل في جلب الملف من قاعدة البيانات");else K=ee.file_data,B=ee.file_type}else{const Y=await fetch(E,{method:"GET",headers:{Accept:"*/*"}});if(!Y.ok)throw console.error("فشل في تحميل الملف:",Y.status,Y.statusText),new Error(`فشل في تحميل الملف: ${Y.status}`);const ee=await Y.blob(),se=new FileReader;return new Promise(q=>{se.onload=()=>{K=se.result.split(",")[1],B=ee.type;const Z=window.URL.createObjectURL(ee);window.open(Z,"_blank")||alert("يرجى السماح بفتح النوافذ المنبثقة لعرض الملف"),setTimeout(()=>{window.URL.revokeObjectURL(Z)},5e3)},se.readAsDataURL(ee)})}const W=new Blob([Uint8Array.from(atob(K),Y=>Y.charCodeAt(0))],{type:B}),X=window.URL.createObjectURL(W);window.open(X,"_blank")||alert("يرجى السماح بفتح النوافذ المنبثقة لعرض الملف"),setTimeout(()=>{window.URL.revokeObjectURL(X)},5e3)}catch(K){console.error("خطأ في عرض الملف:",K),alert("فشل في عرض الملف. يرجى المحاولة مرة أخرى أو تحميل الملف مباشرة.")}},C=async(E,G,z)=>{try{console.log("محاولة تحميل الملف:",E);let K;if(E.startsWith("base64://")){const X=E.replace("base64://","");let{data:V,error:Y}=await H.from("file_attachments").select("file_data, file_type").eq("id",X).single();if(Y||!V)if(console.log("الملف غير موجود في file_attachments، محاولة جلب من service_requests..."),z){const{data:ee,error:se}=await H.from("service_requests").select("file_data, file_name").eq("id",z).single();if(se||!ee||!ee.file_data)throw new Error("فشل في جلب الملف من قاعدة البيانات");const q=atob(ee.file_data),oe=new Array(q.length);for(let De=0;De<q.length;De++)oe[De]=q.charCodeAt(De);const Z=new Uint8Array(oe),be=ee.file_name?.toLowerCase()||"";let U="application/octet-stream";be.endsWith(".pdf")?U="application/pdf":be.endsWith(".jpg")||be.endsWith(".jpeg")?U="image/jpeg":be.endsWith(".png")?U="image/png":be.endsWith(".gif")?U="image/gif":be.endsWith(".txt")?U="text/plain":(be.endsWith(".doc")||be.endsWith(".docx"))&&(U="application/msword"),K=new Blob([Z],{type:U})}else throw new Error("فشل في جلب الملف من قاعدة البيانات");else{const ee=atob(V.file_data),se=new Array(ee.length);for(let oe=0;oe<ee.length;oe++)se[oe]=ee.charCodeAt(oe);const q=new Uint8Array(se);K=new Blob([q],{type:V.file_type})}}else{const X=await fetch(E,{method:"GET",headers:{Accept:"*/*"}});if(!X.ok)throw console.error("فشل في تحميل الملف:",X.status,X.statusText),new Error(`فشل في تحميل الملف: ${X.status}`);K=await X.blob()}console.log("تم تحميل الملف بنجاح:",K.size,"bytes");const B=window.URL.createObjectURL(K),W=document.createElement("a");W.href=B,W.download=G||"file",W.style.display="none",document.body.appendChild(W),W.click(),setTimeout(()=>{window.URL.revokeObjectURL(B),document.body.removeChild(W)},1e3)}catch(K){console.error("خطأ في تحميل الملف:",K),alert("فشل في تحميل الملف. يرجى المحاولة مرة أخرى.")}};k.useEffect(()=>{t&&T()},[t]),k.useEffect(()=>{console.log("🔄 تحديث profile في UserAccount:",r),r&&(console.log("📋 بيانات الملف الشخصي في UserAccount:"),console.log("- الاسم:",r.full_name),console.log("- البريد الإلكتروني:",r.email),console.log("- الهاتف:",r.phone),console.log("- رمز البلد:",r.country_code))},[r]);const T=async()=>{try{u(!0),console.log("🔍 جلب طلبات المستخدم:",t?.id);const{data:E,error:G}=await H.from("service_requests").select("*").eq("user_id",t?.id).order("created_at",{ascending:!1});if(G){console.error("خطأ في جلب الطلبات:",G);return}console.log("📋 طلبات المستخدم:",E?.length||0),c(E||[])}catch(E){console.error("خطأ غير متوقع:",E)}finally{u(!1)}},I=E=>{g(E),j({title:E.title,description:E.description||""})},F=async()=>{if(x)try{const{error:E}=await H.from("service_requests").update({title:p.title,description:p.description||null,updated_at:new Date().toISOString()}).eq("id",x.id);if(E){console.error("خطأ في تحديث الطلب:",E);return}await T(),g(null)}catch(E){console.error("خطأ غير متوقع:",E)}},M=async E=>{try{const{error:G}=await H.from("service_requests").delete().eq("id",E);if(G){console.error("خطأ في حذف الطلب:",G);return}await T(),N(null),S(!0),setTimeout(()=>{S(!1)},2e3)}catch(G){console.error("خطأ غير متوقع:",G)}},R=l.filter(E=>{const G=E.title.toLowerCase().includes(h.toLowerCase())||E.description?.toLowerCase().includes(h.toLowerCase()),z=f==="all"||E.status===f;return G&&z}),L=E=>{switch(E){case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";case"in_progress":return"text-blue-600 bg-blue-100 dark:bg-blue-900/20";case"completed":return"text-green-600 bg-green-100 dark:bg-green-900/20";case"cancelled":return"text-red-600 bg-red-100 dark:bg-red-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20"}},D=E=>{switch(E){case"pending":return a.jsx(at,{className:"w-4 h-4"});case"in_progress":return a.jsx(Ae,{className:"w-4 h-4"});case"completed":return a.jsx(fe,{className:"w-4 h-4"});case"cancelled":return a.jsx(Ga,{className:"w-4 h-4"});default:return a.jsx(ne,{className:"w-4 h-4"})}},A=E=>{switch(E){case"urgent":return"text-red-600 bg-red-100 dark:bg-red-900/20";case"high":return"text-orange-600 bg-orange-100 dark:bg-orange-900/20";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";case"low":return"text-green-600 bg-green-100 dark:bg-green-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20"}},O=E=>{switch(E){case"pending":return"قيد الانتظار";case"in_progress":return"قيد التنفيذ";case"completed":return"مكتملة";case"cancelled":return"ملغية";default:return E}},$=E=>{switch(E){case"urgent":return"عاجل";case"high":return"عالية";case"medium":return"متوسطة";case"low":return"منخفضة";default:return E}};return d?a.jsxs("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:[a.jsx(Pe,{isDarkMode:e}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-caribbean-600 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"جاري تحميل طلباتك..."})]})]}):a.jsxs("div",{className:"min-h-screen bg-platinum-50 dark:bg-jet-900 pt-16",dir:n?"rtl":"ltr",children:[a.jsx(Pe,{isDarkMode:e}),a.jsx("div",{className:"bg-white dark:bg-jet-800 shadow-sm border-b border-platinum-200 dark:border-jet-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"حسابي"}),a.jsx("div",{className:"flex items-center space-x-4 space-x-reverse",children:a.jsxs("div",{className:"text-sm text-jet-600 dark:text-platinum-400",children:["مرحباً، ",r?.full_name]})})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-caribbean-100 dark:bg-caribbean-900/20 rounded-lg ml-4",children:a.jsx(ze,{className:"w-8 h-8 text-caribbean-600 dark:text-caribbean-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-jet-800 dark:text-white mb-2",children:"معلومات الحساب"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"الاسم"}),a.jsx("p",{className:"font-medium text-jet-800 dark:text-white",children:r?.full_name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"البريد الإلكتروني"}),a.jsx("p",{className:"font-medium text-jet-800 dark:text-white email-address",children:r?.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"رقم الهاتف"}),a.jsx("p",{className:"font-medium text-jet-800 dark:text-white font-mono",children:r?.phone?o(`${r.country_code}${r.phone}`,n):"غير محدد"})]})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-caribbean-100 dark:bg-caribbean-900/20 rounded-lg",children:a.jsx(ne,{className:"w-6 h-6 text-caribbean-600 dark:text-caribbean-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"إجمالي الطلبات"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white stat-number",children:l.length})]})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:a.jsx(at,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"قيد الانتظار"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white stat-number",children:l.filter(E=>E.status==="pending").length})]})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(Ae,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"قيد التنفيذ"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white stat-number",children:l.filter(E=>E.status==="in_progress").length})]})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(fe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("p",{className:"text-sm text-jet-600 dark:text-platinum-400",children:"مكتملة"}),a.jsx("p",{className:"text-2xl font-bold text-jet-800 dark:text-white stat-number",children:l.filter(E=>E.status==="completed").length})]})]})})]}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-500 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"البحث في طلباتك...",value:h,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]}),a.jsxs("select",{value:f,onChange:E=>b(E.target.value),className:"px-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"جميع الحالات"}),a.jsx("option",{value:"pending",children:"قيد الانتظار"}),a.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),a.jsx("option",{value:"completed",children:"مكتملة"}),a.jsx("option",{value:"cancelled",children:"ملغية"})]})]})}),a.jsx("div",{className:"space-y-6",children:R.length===0?a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-12 text-center",children:[a.jsx(ne,{className:"w-16 h-16 text-jet-400 dark:text-platinum-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-jet-800 dark:text-white mb-2",children:"لا توجد طلبات"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"لم تقم بإنشاء أي طلبات بعد"})]}):R.map(E=>a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-6",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-jet-800 dark:text-white ml-3",children:E.title}),a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(E.status)}`,children:[D(E.status),a.jsx("span",{className:"mr-1",children:O(E.status)})]})]}),a.jsx("p",{className:"font-medium text-jet-800 dark:text-white font-mono",dir:"ltr",children:new Date(E.updated_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}),E.description&&a.jsx("p",{className:"text-jet-700 dark:text-platinum-300 mb-3",children:E.description}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse text-sm text-jet-500 dark:text-platinum-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(it,{className:"w-4 h-4 ml-1"}),a.jsx("span",{className:"font-mono",dir:"ltr",children:xe(E.created_at)})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${A(E.priority)}`,children:$(E.priority)})]}),E.admin_notes&&a.jsx("div",{className:"mt-3 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/10 dark:to-teal-900/10 rounded-lg border border-emerald-200 dark:border-emerald-700/30",children:a.jsxs("p",{className:"text-sm text-emerald-800 dark:text-emerald-300",children:[a.jsx("strong",{children:"ملاحظات الإدارة:"})," ",E.admin_notes]})}),E.file_url&&a.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/10 dark:to-orange-900/10 rounded-lg border border-amber-200 dark:border-amber-700/30",children:[a.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 mb-2",children:[a.jsx("strong",{children:"الملف المرفق:"})," ",E.file_name||"ملف مرفق",E.file_url.startsWith("base64://")&&a.jsx("span",{className:"ml-2 text-xs text-emerald-600 dark:text-emerald-400",children:"(محفوظ في قاعدة البيانات)"})]}),a.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[a.jsxs("button",{onClick:()=>_(E.file_url,E.file_name||"file",E.id),className:"group flex items-center px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-sm rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx(ts,{className:"w-4 h-4 ml-2 group-hover:animate-pulse"}),a.jsx("span",{className:"font-semibold",children:"عرض"})]}),a.jsxs("button",{onClick:()=>C(E.file_url,E.file_name||"file",E.id),className:"group flex items-center px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white text-sm rounded-xl hover:from-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform",children:[a.jsx(rs,{className:"w-4 h-4 ml-2 group-hover:animate-bounce"}),a.jsx("span",{className:"font-semibold",children:"تحميل"})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(E.status==="pending"||E.status==="in_progress")&&a.jsx("button",{onClick:()=>I(E),className:"p-2 text-caribbean-600 hover:text-caribbean-700 dark:text-caribbean-400 dark:hover:text-caribbean-300 hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 rounded-lg transition-colors duration-200",title:"تعديل الطلب",children:a.jsx(tr,{className:"w-4 h-4"})}),E.status==="pending"&&a.jsx("button",{onClick:()=>N(E.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:"حذف الطلب",children:a.jsx(Tt,{className:"w-4 h-4"})})]})]})},E.id))})]}),x&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>g(null)}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"تعديل الطلب"}),a.jsx("button",{onClick:()=>g(null),className:"text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200",children:a.jsx(_e,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"عنوان الطلب"}),a.jsx("input",{type:"text",value:p.title,onChange:E=>j({...p,title:E.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"وصف الطلب"}),a.jsx("textarea",{value:p.description,onChange:E=>j({...p,description:E.target.value}),rows:4,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse pt-4",children:[a.jsxs("button",{onClick:F,className:"flex-1 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 flex items-center justify-center",children:[a.jsx(ss,{className:"w-4 h-4 ml-2"}),"حفظ التغييرات"]}),a.jsx("button",{onClick:()=>g(null),className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300",children:"إلغاء"})]})]})]})]}),v&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>N(null)}),a.jsx("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Tt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"تأكيد الحذف"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-6",children:"هل أنت متأكد من حذف هذا الطلب؟ لا يمكن التراجع عن هذا الإجراء."}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[a.jsx("button",{onClick:()=>M(v),className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-red-700 transition-colors duration-300",children:"حذف الطلب"}),a.jsx("button",{onClick:()=>N(null),className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300",children:"إلغاء"})]})]})})]}),y&&a.jsx("div",{className:"fixed top-4 right-4 z-50",children:a.jsxs("div",{className:"bg-white/20 dark:bg-jet-800/20 backdrop-blur-md border border-white/30 dark:border-jet-600/30 rounded-2xl shadow-2xl p-6 text-center animate-fade-in",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-in",children:a.jsx(fe,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"text-lg font-bold text-jet-800 dark:text-white mb-2",children:"تم الحذف بنجاح! ✨"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 text-sm",children:"تم حذف طلبك من النظام"}),a.jsx("div",{className:"mt-4 w-full bg-white/20 dark:bg-jet-700/20 rounded-full h-1 overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500/60 rounded-full animate-expand-width"})})]})})]})},Bg=({onBack:s,isDarkMode:e})=>{const{user:t,profile:r}=Le(),[i,n]=k.useState(!1),[o,l]=k.useState(!1),[c,d]=k.useState(null),[u,h]=k.useState(!1),[m,f]=k.useState(""),[b,x]=k.useState({full_name:"",email:"",phone:"",country_code:"+90"});k.useEffect(()=>{r&&x({full_name:r.full_name||"",email:r.email||"",phone:r.phone||"",country_code:r.country_code||"+90"})},[r]);const g=ys.filter(v=>v.name.includes(m)||v.dialCode.includes(m)||v.code.toLowerCase().includes(m.toLowerCase())),p=ys.find(v=>v.dialCode===b.country_code)||ys[0],j=async v=>{if(v.preventDefault(),!t||!r){d("يجب تسجيل الدخول أولاً");return}if(!b.full_name.trim()){d("يرجى إدخال الاسم الكامل");return}if(!b.email.trim()){d("يرجى إدخال البريد الإلكتروني");return}n(!0),d(null);try{const{error:N}=await H.from("user_profiles").update({full_name:b.full_name.trim(),email:b.email.trim(),phone:b.phone.trim()||null,country_code:b.country_code,updated_at:new Date().toISOString()}).eq("id",t.id);if(N){console.error("خطأ في تحديث الملف الشخصي:",N),d("حدث خطأ في تحديث البيانات. يرجى المحاولة مرة أخرى.");return}if(b.email!==t.email){const{error:y}=await H.auth.updateUser({email:b.email});y&&(console.error("خطأ في تحديث البريد الإلكتروني:",y),d("تم تحديث البيانات الأساسية، لكن فشل في تحديث البريد الإلكتروني."))}l(!0),setTimeout(()=>{l(!1)},3e3)}catch(N){console.error("خطأ غير متوقع:",N),d("حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.")}finally{n(!1)}};return a.jsxs("div",{className:"min-h-screen bg-platinum-50 dark:bg-jet-900 pt-16",children:[a.jsx(Pe,{isDarkMode:e}),a.jsx("div",{className:"bg-white dark:bg-jet-800 shadow-sm border-b border-platinum-200 dark:border-jet-700",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsx("h1",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"تعديل الملف الشخصي"})})}),a.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-2xl shadow-sm border border-platinum-200 dark:border-jet-700 p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-caribbean-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ze,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:r?.full_name||"المستخدم"}),a.jsxs("p",{className:"text-jet-600 dark:text-platinum-400",children:["عضو منذ ",r?.created_at?xe(r.created_at):"غير محدد"]})]}),o&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center",children:[a.jsx(fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 ml-2"}),a.jsx("p",{className:"text-green-600 dark:text-green-400 text-sm",children:"تم تحديث بياناتك بنجاح!"})]}),c&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center",children:[a.jsx(Ae,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:c})]}),a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"الاسم الكامل *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:b.full_name,onChange:v=>x({...b,full_name:v.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب اسمك الكامل",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(ze,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"البريد الإلكتروني *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"email",value:b.email,onChange:v=>x({...b,email:v.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"example@email.com",required:!0}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(He,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]}),a.jsx("p",{className:"text-xs text-jet-500 dark:text-platinum-500 mt-1",children:"سيتم إرسال رسالة تأكيد إذا تم تغيير البريد الإلكتروني"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"رقم الهاتف"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>h(!u),className:"flex items-center px-3 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white min-w-[120px]",children:[a.jsx("span",{className:"text-lg mr-2",children:p.flag}),a.jsx("span",{className:"text-sm",children:p.dialCode}),a.jsx(Dt,{className:"w-4 h-4 mr-2"})]}),u&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-jet-700 border border-platinum-300 dark:border-jet-600 rounded-lg shadow-lg z-50 max-h-60 overflow-hidden",children:[a.jsx("div",{className:"p-2 border-b border-platinum-200 dark:border-jet-600",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:m,onChange:v=>f(v.target.value),placeholder:"ابحث عن دولة...",className:"w-full px-3 py-2 pl-8 text-sm border border-platinum-300 dark:border-jet-600 rounded focus:outline-none focus:ring-1 focus:ring-caribbean-500 bg-white dark:bg-jet-800 text-jet-900 dark:text-white"}),a.jsx(Qt,{className:"w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-400"})]})}),a.jsx("div",{className:"max-h-40 overflow-y-auto",children:g.map(v=>a.jsxs("button",{type:"button",onClick:()=>{x({...b,country_code:v.dialCode}),h(!1),f("")},className:"w-full flex items-center px-3 py-2 text-right hover:bg-platinum-100 dark:hover:bg-jet-600 transition-colors duration-200",children:[a.jsx("span",{className:"text-lg ml-3",children:v.flag}),a.jsx("span",{className:"text-sm text-jet-600 dark:text-platinum-400 ml-2",children:v.dialCode}),a.jsx("span",{className:"text-sm text-jet-800 dark:text-white",children:v.name})]},v.code))})]})]}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"tel",value:b.phone,onChange:v=>x({...b,phone:v.target.value}),className:"w-full px-4 py-3 pl-12 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"5XX XXX XX XX"}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:a.jsx(Mt,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]})]}),a.jsx("p",{className:"text-xs text-jet-500 dark:text-platinum-500 mt-1",children:"رقم الهاتف للتواصل معك فقط - اختياري"})]}),a.jsxs("div",{className:"flex space-x-4 space-x-reverse pt-4",children:[a.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"جاري الحفظ..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ss,{className:"w-5 h-5 ml-2"}),"حفظ التغييرات"]})}),a.jsxs("button",{type:"button",onClick:s,className:"flex-1 bg-gray-200 dark:bg-jet-600 text-jet-800 dark:text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-jet-500 transition-colors duration-300 flex items-center justify-center",children:[a.jsx(_e,{className:"w-5 h-5 ml-2"}),"إلغاء"]})]})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)})]})},Wg=({onBack:s,isDarkMode:e})=>{const{user:t,profile:r}=Le(),[i,n]=k.useState([]),[o,l]=k.useState(!0),[c,d]=k.useState(""),[u,h]=k.useState("الكل"),[m,f]=k.useState(null),[b,x]=k.useState(!1),[g,p]=k.useState({subject:"",message:""}),[j,v]=k.useState(!1),[N,y]=k.useState(!1),[S,_]=k.useState(null),[C,T]=k.useState([]),[I,F]=k.useState(!1);k.useEffect(()=>{M(),t&&R()},[t]);const M=async()=>{try{l(!0);const{data:O,error:$}=await H.from("faqs").select("*").eq("is_active",!0).order("order_index",{ascending:!0});if($){console.error("خطأ في جلب الأسئلة المتكررة:",$);return}n(O||[])}catch(O){console.error("خطأ غير متوقع:",O)}finally{l(!1)}},R=async()=>{if(t)try{F(!0);const{data:O,error:$}=await H.from("support_messages").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if($){console.error("خطأ في جلب رسائل المستخدم:",$);return}T(O||[])}catch(O){console.error("خطأ غير متوقع:",O)}finally{F(!1)}},L=async O=>{if(O.preventDefault(),!t||!r){_("يجب تسجيل الدخول أولاً");return}if(!g.subject.trim()||!g.message.trim()){_("يرجى ملء جميع الحقول");return}v(!0),_(null);try{const{error:$}=await H.from("support_messages").insert({user_id:t.id,name:r.full_name,email:r.email||t.email,subject:g.subject.trim(),message:g.message.trim(),status:"pending"});if($){console.error("خطأ في إرسال الرسالة:",$),_("حدث خطأ في إرسال الرسالة. يرجى المحاولة مرة أخرى.");return}y(!0),p({subject:"",message:""}),await R(),setTimeout(()=>{y(!1),x(!1)},2e3)}catch($){console.error("خطأ غير متوقع:",$),_("حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.")}finally{v(!1)}},D=["الكل",...Array.from(new Set(i.map(O=>O.category)))],A=i.filter(O=>{const $=O.question.toLowerCase().includes(c.toLowerCase())||O.answer.toLowerCase().includes(c.toLowerCase()),E=u==="الكل"||O.category===u;return $&&E});return o?a.jsxs("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:[a.jsx(Pe,{isDarkMode:e}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-caribbean-600 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"جاري تحميل المساعدة..."})]})]}):a.jsxs("div",{className:"min-h-screen bg-platinum-50 dark:bg-jet-900 pt-16",children:[a.jsx(Pe,{isDarkMode:e}),a.jsx("div",{className:"bg-white dark:bg-jet-800 shadow-sm border-b border-platinum-200 dark:border-jet-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:"المساعدة والدعم"}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center px-4 py-2 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105",children:[a.jsx(yr,{className:"w-4 h-4 ml-2"}),"تواصل معنا"]})]})})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t&&C.length>0&&a.jsxs("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-jet-800 dark:text-white mb-4 flex items-center",children:[a.jsx(yr,{className:"w-5 h-5 ml-2"}),"رسائلك السابقة"]}),a.jsx("div",{className:"space-y-4",children:C.slice(0,3).map(O=>a.jsxs("div",{className:"border border-platinum-200 dark:border-jet-600 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-jet-800 dark:text-white",children:O.subject}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.status==="resolved"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":O.status==="in_progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-sky-100 text-sky-800 dark:bg-sky-900/20 dark:text-sky-400"}`,children:O.status==="resolved"?"محلولة":O.status==="in_progress"?"قيد المعالجة":"قيد الانتظار"})]}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 text-sm mb-2",children:O.message}),O.admin_reply&&a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg mt-2",children:[a.jsxs("p",{className:"text-green-800 dark:text-green-300 text-sm",children:[a.jsx("strong",{children:"رد الإدارة:"})," ",O.admin_reply]}),O.admin_reply_date&&a.jsx("p",{className:"text-green-600 dark:text-green-400 text-xs mt-1",children:xe(O.admin_reply_date)})]}),a.jsx("p",{className:"text-jet-500 dark:text-platinum-500 text-xs mt-2",children:xe(O.created_at)})]},O.id))})]}),a.jsx("div",{className:"bg-white dark:bg-jet-800 p-6 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-jet-400 dark:text-platinum-500 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"ابحث في الأسئلة المتكررة...",value:c,onChange:O=>d(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white"})]}),a.jsx("select",{value:u,onChange:O=>h(O.target.value),className:"px-4 py-2 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent bg-white dark:bg-jet-700 text-jet-900 dark:text-white",children:D.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"space-y-4",children:A.length===0?a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 p-12 text-center",children:[a.jsx(Vr,{className:"w-16 h-16 text-jet-400 dark:text-platinum-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-jet-800 dark:text-white mb-2",children:"لا توجد أسئلة"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"لم نجد أسئلة تطابق بحثك"})]}):A.map(O=>a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 overflow-hidden",children:[a.jsxs("button",{onClick:()=>f(m===O.id?null:O.id),className:"w-full px-6 py-4 text-right hover:bg-platinum-50 dark:hover:bg-jet-700 transition-colors duration-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-jet-800 dark:text-white mb-1",children:O.question}),a.jsx("span",{className:"inline-block px-2 py-1 bg-caribbean-100 dark:bg-caribbean-900/20 text-caribbean-700 dark:text-caribbean-400 text-xs rounded-full",children:O.category})]}),a.jsx("div",{className:"mr-4",children:m===O.id?a.jsx(Ua,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"}):a.jsx(Dt,{className:"w-5 h-5 text-jet-400 dark:text-platinum-400"})})]}),m===O.id&&a.jsx("div",{className:"px-6 pb-4 border-t border-platinum-200 dark:border-jet-700",children:a.jsx("div",{className:"pt-4",children:a.jsx("p",{className:"text-jet-700 dark:text-platinum-300 leading-relaxed whitespace-pre-line",children:O.answer})})})]},O.id))}),a.jsxs("div",{className:"mt-12 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white p-8 rounded-2xl text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"لم تجد ما تبحث عنه؟"}),a.jsx("p",{className:"text-white/90 mb-6",children:"تواصل معنا مباشرة وسيقوم فريق الدعم بالرد عليك في أقرب وقت ممكن"}),a.jsxs("button",{onClick:()=>x(!0),className:"bg-white text-caribbean-700 px-8 py-3 rounded-lg font-semibold hover:bg-platinum-100 transition-colors duration-300 flex items-center justify-center mx-auto",children:[a.jsx(yr,{className:"w-5 h-5 ml-2"}),"تواصل معنا الآن"]})]})]}),b&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>x(!1)}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-8 border border-platinum-300 dark:border-jet-600",children:[a.jsx("button",{onClick:()=>x(!1),className:"absolute top-4 right-4 p-2 text-jet-400 hover:text-jet-600 dark:text-platinum-400 dark:hover:text-platinum-200 transition-colors duration-300",children:a.jsx(_e,{className:"w-5 h-5"})}),N?a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(fe,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"تم إرسال رسالتك بنجاح!"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"سيتم الرد عليك قريباً من قبل فريق الدعم"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-caribbean-100 dark:bg-caribbean-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(yr,{className:"w-6 h-6 text-caribbean-600 dark:text-caribbean-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:"تواصل معنا"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:"أرسل لنا رسالة وسنرد عليك قريباً"})]}),S&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center",children:[a.jsx(Ae,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:S})]}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"موضوع الرسالة"}),a.jsx("input",{type:"text",value:g.subject,onChange:O=>p({...g,subject:O.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"مثال: استفسار عن خدمة الترجمة",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2",children:"نص الرسالة"}),a.jsx("textarea",{value:g.message,onChange:O=>p({...g,message:O.target.value}),rows:4,className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-700 text-jet-900 dark:text-white",placeholder:"اكتب رسالتك هنا...",required:!0})]}),a.jsx("button",{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:j?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"جاري الإرسال..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"w-5 h-5 ml-2"}),"إرسال الرسالة"]})})]})]})]})]})]})},Do=({children:s,requireAdmin:e=!1,fallback:t})=>{const{user:r,profile:i,loading:n}=Le(),{t:o,language:l}=$e();return console.log("🔒 ProtectedRoute render:",{hasUser:!!r,hasProfile:!!i,loading:n,requireAdmin:e,userEmail:r?.email}),n?a.jsx("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-caribbean-600 mx-auto mb-4"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400",children:l==="ar"?"جاري التحقق من الصلاحيات...":"Yetkiler kontrol ediliyor..."}),a.jsx("p",{className:"text-sm text-jet-500 dark:text-platinum-500 mt-2",children:l==="ar"?"يرجى الانتظار...":"Lütfen bekleyin..."})]})}):!r&&!n?t||a.jsx("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:l==="ar"?"غير مصرح":"Yetkisiz Erişim"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-6",children:l==="ar"?"يجب تسجيل الدخول للوصول إلى هذه الصفحة":"Bu sayfaya erişmek için giriş yapmanız gerekiyor"}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300",children:l==="ar"?"تسجيل الدخول":"Giriş Yap"})]})}):e&&r&&!(r?.email==="admin@tevasul.group")?t||a.jsx("div",{className:"min-h-screen bg-white dark:bg-jet-800 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[a.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:l==="ar"?"صلاحيات غير كافية":"Yetersiz Yetki"}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-6",children:l==="ar"?"تحتاج إلى صلاحيات المدير للوصول إلى هذه الصفحة":"Bu sayfaya erişmek için yönetici yetkilerine ihtiyacınız var"}),a.jsx("button",{onClick:()=>window.location.href="/home",className:"bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300",children:l==="ar"?"العودة للرئيسية":"Ana Sayfaya Dön"})]})}):(console.log("✅ ProtectedRoute: User authenticated and authorized"),a.jsx(a.Fragment,{children:s}))},Ug=({onBack:s,isDarkMode:e})=>{const{t,language:r}=$e(),{user:i,profile:n}=Le(),[o,l]=k.useState("list");return i?.email==="admin@tevasul.group"?a.jsx(Do,{requireAdmin:!0,children:a.jsxs("div",{className:"min-h-screen bg-platinum-50 dark:bg-jet-900",children:[a.jsx(Pe,{isDarkMode:e}),a.jsx("div",{className:"bg-white dark:bg-jet-800 shadow-sm border-b border-platinum-200 dark:border-jet-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("button",{onClick:s,className:"flex items-center text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400 transition-colors duration-300 ml-4",children:[a.jsx(er,{className:"w-5 h-5 ml-2"}),t("nav.home")]}),a.jsx("h1",{className:"text-2xl font-bold text-jet-800 dark:text-white",children:r==="ar"?"إدارة العودة الطوعية":"Gönüllü Dönüş Yönetimi"})]}),o==="list"&&a.jsxs("button",{onClick:()=>l("create"),className:"flex items-center px-4 py-2 bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105",children:[a.jsx(Ct,{className:"w-4 h-4 ml-2"}),r==="ar"?"إضافة نموذج جديد":"Yeni Form Ekle"]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700 mb-8",children:a.jsxs("div",{className:"flex border-b border-platinum-200 dark:border-jet-700",children:[a.jsx("button",{onClick:()=>l("list"),className:`px-6 py-4 font-medium transition-colors duration-200 ${o==="list"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-5 h-5 ml-2"}),r==="ar"?"قائمة النماذج":"Form Listesi"]})}),a.jsx("button",{onClick:()=>l("create"),className:`px-6 py-4 font-medium transition-colors duration-200 ${o==="create"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ct,{className:"w-5 h-5 ml-2"}),r==="ar"?"إنشاء نموذج جديد":"Yeni Form Oluştur"]})}),a.jsx("button",{onClick:()=>l("chart"),className:`px-6 py-4 font-medium transition-colors duration-200 ${o==="chart"?"text-caribbean-600 dark:text-caribbean-400 border-b-2 border-caribbean-600 dark:border-caribbean-400":"text-jet-600 dark:text-platinum-400 hover:text-caribbean-600 dark:hover:text-caribbean-400"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(xi,{className:"w-5 h-5 ml-2"}),r==="ar"?"الإحصائيات":"İstatistikler"]})})]})}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-sm border border-platinum-200 dark:border-jet-700",children:o==="list"?a.jsx(ul,{isDarkMode:e}):o==="create"?a.jsx(hl,{isDarkMode:e}):a.jsx(sc,{isDarkMode:e})})]})]})}):a.jsx(Do,{requireAdmin:!0,children:a.jsx("div",{children:"This should not be visible"})})},rc=({isDarkMode:s})=>{const{t:e}=$e(),[t,r]=k.useState("loading"),[i,n]=k.useState(null),[o,l]=k.useState(null),[c,d]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const{data:{session:f},error:b}=await H.auth.getSession();if(b){console.error("Session error:",b),r("error"),n("خطأ في جلب الجلسة");return}if(f?.user)l(f.user.email),f.user.email_confirmed_at?r("success"):r("pending");else{const x=new URLSearchParams(window.location.search),g=x.get("token"),p=x.get("type");if(g&&p==="signup"){const{data:j,error:v}=await H.auth.verifyOtp({token_hash:g,type:"signup"});v?(console.error("Verification error:",v),r("error"),n("فشل في تأكيد البريد الإلكتروني. يرجى المحاولة مرة أخرى.")):(r("success"),l(j.user?.email||null))}else r("error"),n("رابط غير صحيح")}}catch(f){console.error("Verification error:",f),r("error"),n("حدث خطأ غير متوقع")}})()},[]);const u=async()=>{if(o){d(!0);try{const{error:m}=await H.auth.resend({type:"signup",email:o,options:{emailRedirectTo:`${window.location.origin}/auth/verify-email`}});m?(console.error("Resend error:",m),n("فشل في إعادة إرسال البريد الإلكتروني")):(n(null),setTimeout(()=>{n("تم إرسال بريد التأكيد بنجاح")},100))}catch(m){console.error("Resend error:",m),n("فشل في إعادة إرسال البريد الإلكتروني")}finally{d(!1)}}},h=()=>{window.history.back()};return t==="loading"?a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-caribbean-50 to-indigo-50 dark:from-jet-900 dark:to-jet-800",children:[a.jsx(Pe,{isDarkMode:s}),a.jsx("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-lg p-8 max-w-md w-full mx-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-caribbean-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-jet-800 dark:text-white mb-2",children:"جاري التحقق..."}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"يرجى الانتظار بينما نتحقق من بريدك الإلكتروني"})]})})]}):a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-caribbean-50 to-indigo-50 dark:from-jet-900 dark:to-jet-800",children:[a.jsx(Pe,{isDarkMode:s}),a.jsxs("div",{className:"bg-white dark:bg-jet-800 rounded-xl shadow-lg p-8 max-w-md w-full mx-4",children:[t==="success"&&a.jsxs("div",{className:"text-center",children:[a.jsx(fe,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"تم تأكيد البريد الإلكتروني بنجاح!"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"يمكنك الآن استخدام جميع ميزات التطبيق"}),a.jsx("button",{onClick:()=>window.location.href="/home",className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white py-3 px-6 rounded-lg hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300",children:"الانتقال إلى الصفحة الرئيسية"})]}),t==="pending"&&a.jsxs("div",{className:"text-center",children:[a.jsx(He,{className:"w-16 h-16 text-caribbean-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"تحقق من بريدك الإلكتروني"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"لقد أرسلنا رابط تأكيد إلى:"}),a.jsx("p",{className:"font-semibold text-caribbean-600 dark:text-caribbean-400 mb-6",children:o}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"انقر على الرابط في البريد الإلكتروني لتأكيد حسابك"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:u,disabled:c,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white py-3 px-6 rounded-lg hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300 disabled:opacity-50 flex items-center justify-center",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Zs,{className:"w-4 h-4 ml-2 animate-spin"}),"جاري الإرسال..."]}):"إعادة إرسال بريد التأكيد"}),a.jsxs("button",{onClick:h,className:"w-full bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition-all duration-300 flex items-center justify-center",children:[a.jsx(er,{className:"w-4 h-4 ml-2"}),"العودة"]})]})]}),t==="error"&&a.jsxs("div",{className:"text-center",children:[a.jsx(Ae,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-4",children:"خطأ في التحقق"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:i||"حدث خطأ أثناء التحقق من البريد الإلكتروني"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:u,disabled:c,className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white py-3 px-6 rounded-lg hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300 disabled:opacity-50 flex items-center justify-center",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Zs,{className:"w-4 h-4 ml-2 animate-spin"}),"جاري الإرسال..."]}):"إعادة إرسال بريد التأكيد"}),a.jsxs("button",{onClick:h,className:"w-full bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition-all duration-300 flex items-center justify-center",children:[a.jsx(er,{className:"w-4 h-4 ml-2"}),"العودة"]})]})]}),i&&t!=="error"&&a.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center",children:[a.jsx(Ae,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("span",{className:"text-red-800 dark:text-red-200",children:i})]})]})]})},Hg=({isOpen:s,onClose:e,userRole:t,userName:r,onRedirect:i})=>{const[n,o]=k.useState(0),[l,c]=k.useState(!1);if(k.useEffect(()=>{if(s){o(0),c(!1);const h=setInterval(()=>{o(m=>m>=100?(clearInterval(h),c(!0),setTimeout(()=>{i()},500),100):m+2)},50);return()=>clearInterval(h)}},[s,i]),!s)return null;const u=(()=>{switch(t){case"admin":return{title:"مرحباً بك أيها المدير! 👑",message:"🎉 مرحباً بك في لوحة تحكم مجموعة تواصل! لديك صلاحيات كاملة لإدارة النظام.",icon:a.jsx(Hr,{className:"w-6 h-6 text-yellow-400"}),badge:"مدير النظام",badgeColor:"from-yellow-500 to-orange-500",roleText:"مدير النظام",redirectText:"لوحة التحكم"};case"moderator":return{title:"مرحباً بك أيها المشرف! 🛡️",message:"🎉 مرحباً بك في لوحة إشراف مجموعة تواصل! يمكنك إدارة المحتوى والمستخدمين.",icon:a.jsx(Ee,{className:"w-6 h-6 text-blue-400"}),badge:"مشرف النظام",badgeColor:"from-blue-500 to-cyan-500",roleText:"مشرف",redirectText:"لوحة التحكم"};default:return{title:"مرحباً بك! 👋",message:"🎉 مرحباً بك في مجموعة تواصل! تم تسجيل دخولك بنجاح.",icon:a.jsx(ze,{className:"w-6 h-6 text-white"}),badge:"عضو مميز",badgeColor:"from-green-500 to-emerald-500",roleText:"مستخدم",redirectText:"الصفحة الرئيسية"}}})();return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),a.jsxs("div",{className:"relative bg-white dark:bg-jet-800 rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-100",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center animate-pulse",children:a.jsx(fe,{className:"w-12 h-12 text-white"})}),a.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-green-400/30 animate-ping"}),a.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-green-400/20 animate-ping",style:{animationDelay:"0.5s"}})]})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-jet-800 dark:text-white mb-2",children:u.title}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 mb-3 text-sm leading-relaxed",children:u.message}),a.jsx("div",{className:"flex items-center justify-center mb-3",children:a.jsxs("div",{className:`bg-gradient-to-r ${u.badgeColor} text-white px-4 py-2 rounded-full text-sm font-medium flex items-center`,children:[t==="admin"&&a.jsx(Hr,{className:"w-4 h-4 ml-1"}),t==="moderator"&&a.jsx(Ee,{className:"w-4 h-4 ml-1"}),(!t||t==="user")&&a.jsx(Qs,{className:"w-4 h-4 ml-1"}),a.jsx("span",{children:u.badge})]})}),a.jsxs("p",{className:"text-sm text-jet-500 dark:text-platinum-500",children:["مرحباً بك، ",a.jsx("span",{className:"font-semibold text-caribbean-600 dark:text-caribbean-400",children:r})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm text-jet-600 dark:text-platinum-400 mb-2",children:[a.jsx("span",{children:l?"جاري التوجيه...":"جاري التحضير..."}),a.jsxs("span",{children:[n,"%"]})]}),a.jsx("div",{className:"w-full bg-jet-200 dark:bg-jet-700 rounded-full h-3 overflow-hidden",children:a.jsxs("div",{className:"h-full bg-gradient-to-r from-caribbean-500 via-emerald-500 to-teal-500 rounded-full transition-all duration-300 ease-out relative",style:{width:`${n}%`},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-caribbean-400 to-emerald-400 blur-sm opacity-50"})]})})]}),l&&a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-caribbean-600 dark:text-caribbean-400",children:[a.jsx(Oo,{className:"w-5 h-5 animate-spin"}),a.jsxs("span",{className:"font-medium",children:["جاري التوجيه إلى ",u.redirectText,"..."]})]})}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce"})}),a.jsx("div",{className:"absolute top-6 right-6",children:a.jsx("div",{className:"w-1 h-1 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})}),a.jsx("div",{className:"absolute bottom-4 left-4",children:a.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})})]})]})},fi=[{id:"health-insurance",icon:Ee,titleKey:"services.healthInsurance.title",descriptionKey:"services.healthInsurance.description",fullDescriptionKey:"services.healthInsurance.fullDescription",featuresKey:"services.healthInsurance.features",benefitsKey:"services.healthInsurance.benefits",processKey:"services.healthInsurance.process"},{id:"translation",icon:rt,titleKey:"services.translation.title",descriptionKey:"services.translation.description",fullDescriptionKey:"services.translation.fullDescription",featuresKey:"services.translation.features",benefitsKey:"services.translation.benefits",processKey:"services.translation.process"},{id:"travel",icon:Jt,titleKey:"services.travel.title",descriptionKey:"services.travel.description",fullDescriptionKey:"services.travel.fullDescription",featuresKey:"services.travel.features",benefitsKey:"services.travel.benefits",processKey:"services.travel.process"},{id:"legal",icon:Qs,titleKey:"services.legal.title",descriptionKey:"services.legal.description",fullDescriptionKey:"services.legal.fullDescription",featuresKey:"services.legal.features",benefitsKey:"services.legal.benefits",processKey:"services.legal.process"},{id:"government",icon:ne,titleKey:"services.government.title",descriptionKey:"services.government.description",fullDescriptionKey:"services.government.fullDescription",featuresKey:"services.government.features",benefitsKey:"services.government.benefits",processKey:"services.government.process"},{id:"insurance",icon:Rt,titleKey:"services.insurance.title",descriptionKey:"services.insurance.description",fullDescriptionKey:"services.insurance.fullDescription",featuresKey:"services.insurance.features",benefitsKey:"services.insurance.benefits",processKey:"services.insurance.process"}];function qg(){const s=Ro(),e=gi(),[t,r]=k.useState(!1),[i,n]=k.useState(0),[o,l]=k.useState(!0),[c,d]=k.useState(!1),[u,h]=k.useState(null),[m,f]=k.useState(!1),[b,x]=k.useState(!1),[g,p]=k.useState(!1),[j,v]=k.useState(!1),[N,y]=k.useState(!1),[S,_]=k.useState(!1),[C,T]=k.useState(!1),[I,F]=k.useState(!1),[M,R]=k.useState(!1),[L,D]=k.useState(null),[A,O]=k.useState({isOpen:!1,serviceType:"",serviceTitle:""}),[$,E]=k.useState({name:"",email:"",serviceType:"",message:""}),[G,z]=k.useState(!1),[K,B]=k.useState(!1),[W,X]=k.useState(null),{user:V,profile:Y,loading:ee,signOut:se,hasNotifications:q,clearNotifications:oe}=Le(),{language:Z,setLanguage:be,t:U}=$e(),De=k.useCallback(()=>{if(!L)return;const{userRole:P}=L;P==="admin"||P==="moderator"?(console.log("🔧 إعادة توجيه الأدمن/المشرف إلى لوحة التحكم"),e("/admin",{replace:!0})):(console.log("👤 إعادة توجيه المستخدم العادي إلى الصفحة الرئيسية"),e("/home",{replace:!0})),R(!1),D(null)},[L,e]),Qe=[{name:U("nav.home"),href:"/home",isSection:!1},{name:U("nav.services"),href:"#services",isSection:!0},{name:U("nav.about"),href:"#about",isSection:!0},{name:U("nav.contact"),href:"#contact",isSection:!0}],Se=P=>{d(!0),be(P),setTimeout(()=>{d(!1)},800)},$t=P=>{switch(P){case"ar":return"/6211558.png";case"tr":return"/pngtree-turkey-flag-icon-template-picture-image_8141270.png";case"en":return"/pngtree-united-kingdom-flag-icon-template-png-image_5098880.png";default:return"/6211558.png"}},Ft=P=>{switch(P){case"ar":return"العربية";case"tr":return"Türkçe";case"en":return"English";default:return"العربية"}},xa=k.useMemo(()=>fi.map(P=>({id:P.id,icon:(()=>{switch(P.id){case"health-insurance":return a.jsx(Ee,{className:"w-8 h-8 text-caribbean-500"});case"translation":return a.jsx(rt,{className:"w-8 h-8 text-caribbean-500"});case"travel":return a.jsx(Jt,{className:"w-8 h-8 text-caribbean-500"});case"legal":return a.jsx(Qs,{className:"w-8 h-8 text-caribbean-500"});case"government":return a.jsx(ne,{className:"w-8 h-8 text-caribbean-500"});case"insurance":return a.jsx(Rt,{className:"w-8 h-8 text-caribbean-500"});default:return a.jsx(rt,{className:"w-8 h-8 text-caribbean-500"})}})(),title:U(P.titleKey),description:U(P.descriptionKey)})),[U]);k.useEffect(()=>{const P=()=>n(window.scrollY);window.addEventListener("scroll",P,{passive:!0});const J=()=>{f(!0)};return window.addEventListener("openLogin",J),()=>{window.removeEventListener("scroll",P),window.removeEventListener("openLogin",J)}},[]),k.useEffect(()=>{const P=s.pathname;if(console.log("📍 Current route:",P),P.startsWith("/services/")){const J=P.split("/services/")[1];h(J)}else h(null);P==="/login"?(console.log("🔍 Route handler - /login:",{user:!!V,authLoading:ee,userEmail:V?.email}),!V||ee?(console.log("🔍 Showing login modal - user not authenticated or still loading"),f(!0),x(!1)):(console.log("🔍 User already authenticated, redirecting to home"),f(!1),x(!1),e("/home",{replace:!0}))):P==="/signup"?(console.log("🔍 Route handler - /signup:",{user:!!V,authLoading:ee,userEmail:V?.email}),!V||ee?(console.log("🔍 Showing signup modal - user not authenticated or still loading"),x(!0),f(!1)):(console.log("🔍 User already authenticated, redirecting to home"),f(!1),x(!1),e("/home",{replace:!0}))):(m||b)&&(console.log("🔄 إغلاق المودال - الانتقال لمسار آخر"),f(!1),x(!1)),y(P==="/account"),_(P==="/profile"),T(P==="/help"),P.startsWith("/admin")?(console.log("🔧 تم اكتشاف مسار الأدمن، فتح لوحة التحكم"),v(!0)):v(!1)},[s.pathname]),k.useEffect(()=>{const P=`${V?.email}-${ee}-${g}`;window.authDebugLogs||(window.authDebugLogs=new Set),window.authDebugLogs.has(P)||(console.log("🔍 Auth State Debug:",{user:V?.email||"null",profile:Y?.full_name||"null",loading:ee,showWelcome:g,userExists:!!V,profileExists:!!Y}),window.authDebugLogs.add(P))},[V,Y,ee,g]),k.useEffect(()=>{if(!ee&&V&&Y){const P=s.pathname;(P==="/login"||P==="/signup")&&(console.log("🔄 المستخدم مسجل دخول، عرض رسالة النجاح"),console.log("👤 بيانات الملف الشخصي:",{role:Y.role,email:Y.email}),f(!1),x(!1),D({userRole:Y.role,userName:Y.full_name||V.email||"مستخدم"}),R(!0))}},[V,ee,Y,s.pathname]),k.useEffect(()=>{!ee&&V&&Y&&(m||b)&&(console.log("🔒 إغلاق قسري للمودال - المستخدم مسجل دخول بالفعل"),f(!1),x(!1),(s.pathname==="/login"||s.pathname==="/signup")&&(console.log("🔄 عرض رسالة النجاح من صفحة تسجيل الدخول"),D({userRole:Y.role,userName:Y.full_name||V.email||"مستخدم"}),R(!0)))},[V,ee,Y,m,b,s.pathname]),k.useEffect(()=>{const P=localStorage.getItem("justLoggedIn"),J=localStorage.getItem("openServiceRequest");if(!ee&&V&&P==="true"){console.log("🎉 المستخدم سجل دخوله للتو، عرض رسالة الترحيب"),console.log("👤 بيانات المستخدم:",{email:V.email,name:Y?.full_name||V.email});const ie=Y?.role==="admin",ce=Y?.role==="moderator";if(localStorage.removeItem("justLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),!ie&&!ce&&p(!0),J&&!ie)try{const Fe=JSON.parse(J);setTimeout(()=>{O({isOpen:!0,serviceType:Fe.serviceType,serviceTitle:Fe.serviceTitle})},2e3),localStorage.removeItem("openServiceRequest")}catch(Fe){console.error("خطأ في تحليل بيانات طلب الخدمة:",Fe),localStorage.removeItem("openServiceRequest")}else J&&ie&&(console.log("🔧 الأدمن سجل دخول، حذف طلب الخدمة المعلق"),localStorage.removeItem("openServiceRequest"));const Ce=setTimeout(()=>{console.log("⏰ إخفاء رسالة الترحيب تلقائياً"),p(!1)},5e3);return()=>clearTimeout(Ce)}},[V,Y,ee]),k.useEffect(()=>{if(!ee&&V){const P=Y?.role==="admin",J=Y?.role==="moderator",ie=s.pathname,ce=sessionStorage.getItem(`user-visited-${V.email}`);(P||J)&&!ce&&(ie==="/home"||ie==="/")&&(console.log("🔧 أول تسجيل دخول للأدمن/المشرف، إعادة توجيه إلى لوحة التحكم"),sessionStorage.setItem(`user-visited-${V.email}`,"true"),e("/admin",{replace:!0}))}},[V,ee,s.pathname,e]),k.useEffect(()=>{V||(console.log("🧹 تنظيف البيانات عند تسجيل الخروج..."),Object.keys(sessionStorage).forEach(ce=>{ce.startsWith("admin-redirect-")&&sessionStorage.removeItem(ce)}),window.adminDashboardLogged=!1,window.adminRedirectLogs=new Set,window.authDebugLogs=new Set,Object.keys(sessionStorage).forEach(ce=>{ce.startsWith("profile-loading-")&&sessionStorage.removeItem(ce)}),Object.keys(sessionStorage).forEach(ce=>{ce.startsWith("user-visited-")&&sessionStorage.removeItem(ce)}),localStorage.removeItem("justLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("openServiceRequest"),localStorage.removeItem("pendingServiceRequest"),console.log("✅ تم تنظيف جميع البيانات بنجاح"))},[V]),k.useEffect(()=>{const P=document.body,J=document.documentElement;o?(J.classList.add("dark"),P.classList.add("dark")):(J.classList.remove("dark"),P.classList.remove("dark"))},[o]);const zt=()=>{l(!o)},br=()=>{const P=document.getElementById("services");P&&P.scrollIntoView({behavior:"smooth",block:"start"})},Ds=()=>{const P=document.getElementById("contact");P&&P.scrollIntoView({behavior:"smooth",block:"start"})},ba=P=>{e(`/services/${P}`)},pr=()=>{e("/home")},wt=()=>{console.log("🚀 تنفيذ navigateToMainHome"),console.log("📍 المسار الحالي:",s.pathname),s.pathname==="/login"||s.pathname==="/signup"?(console.log("🔄 إعادة توجيه من صفحة تسجيل الدخول إلى الصفحة الرئيسية"),e("/home",{replace:!0})):(console.log("🔄 الانتقال إلى الصفحة الرئيسية"),e("/home"))},Rs=()=>{e("/login")},Os=()=>{e("/signup")},ls=()=>{f(!1),s.pathname==="/login"&&(console.log("🔄 إغلاق مودال تسجيل الدخول - إعادة توجيه للصفحة الرئيسية"),e("/home",{replace:!0}))},cs=()=>{x(!1),s.pathname==="/signup"&&(console.log("🔄 إغلاق مودال تسجيل الحساب - إعادة توجيه للصفحة الرئيسية"),e("/home",{replace:!0}))},ds=()=>{f(!1),x(!0)},us=()=>{x(!1),f(!0)},vr=async()=>{console.log("🔄 بدء عملية تسجيل الخروج..."),p(!1);const{error:P}=await se();P?console.error("❌ خطأ في تسجيل الخروج:",P):console.log("✅ تم تسجيل الخروج بنجاح من التطبيق")},jr=()=>{e("/account"),F(!1),console.log("👤 فتح حساب المستخدم - تنظيف الإشعارات"),q&&oe()},hs=Y?.role==="admin",pa=Y?.role==="moderator",w=(P,J)=>{if(!V){localStorage.setItem("pendingServiceRequest",JSON.stringify({serviceType:P,serviceTitle:J})),Rs();return}O({isOpen:!0,serviceType:P,serviceTitle:J})},Q=()=>{O({isOpen:!1,serviceType:"",serviceTitle:""})},we=async P=>{if(P.preventDefault(),G){console.log("⚠️ منع الإرسال المزدوج");return}if(console.log("🔍 بدء إرسال رسالة التواصل..."),console.log("👤 المستخدم:",V?.email),console.log("📝 بيانات النموذج:",$),!V){console.log("❌ المستخدم غير مسجل دخول"),X(Z==="ar"?"يجب تسجيل الدخول أولاً لإرسال الرسالة":"Mesaj göndermek için önce giriş yapmalısınız");return}if(!$.name.trim()||!$.email.trim()||!$.message.trim()){console.log("❌ النموذج غير مكتمل"),X(Z==="ar"?"يرجى ملء جميع الحقول المطلوبة":"Lütfen tüm gerekli alanları doldurun");return}z(!0),X(null),B(!1),console.log("⏳ بدء عملية الإرسال...");try{const J=new Promise((yt,va)=>{setTimeout(()=>va(new Error("Request timeout")),1e4)});if(!H||!H.from){console.error("❌ Supabase غير مُعد بشكل صحيح"),X(Z==="ar"?"مشكلة في إعداد قاعدة البيانات. يرجى المحاولة مرة أخرى لاحقاً.":"Veritabanı yapılandırmasında sorun. Lütfen daha sonra tekrar deneyin."),z(!1);return}console.log("🔍 اختبار الاتصال مع Supabase...");const ie=H.from("support_messages").select("count").limit(1),{data:ce,error:Ce}=await Promise.race([ie,J]);if(console.log("🔍 نتيجة اختبار الاتصال:",{testData:ce,testError:Ce}),Ce){console.error("❌ فشل في اختبار الاتصال:",Ce),X(Z==="ar"?"فشل في الاتصال بقاعدة البيانات. يرجى التحقق من اتصال الإنترنت والمحاولة مرة أخرى.":"Veritabanına bağlantı başarısız. Lütfen internet bağlantınızı kontrol edin ve tekrar deneyin."),z(!1);return}const Fe={user_id:V.id,name:$.name.trim(),email:$.email.trim(),subject:$.serviceType?`${$.serviceType} - ${Z==="ar"?"طلب خدمة":"Service Request"}`:Z==="ar"?"رسالة تواصل":"Contact Message",message:$.message.trim(),status:"pending"};console.log("📤 إرسال البيانات:",Fe);const Ve=H.from("support_messages").insert(Fe).select(),{data:Re,error:ut}=await Promise.race([Ve,J]);if(console.log("📥 استجابة قاعدة البيانات:",{data:Re,error:ut}),ut){console.error("❌ خطأ في إرسال الرسالة:",ut),X(Z==="ar"?"حدث خطأ في إرسال الرسالة. يرجى المحاولة مرة أخرى.":"Mesaj gönderilirken hata oluştu. Lütfen tekrar deneyin."),z(!1);return}console.log("✅ تم إرسال الرسالة بنجاح:",Re),B(!0),E({name:"",email:"",serviceType:"",message:""}),z(!1),setTimeout(()=>{B(!1)},3e3)}catch(J){console.error("💥 خطأ غير متوقع:",J),J instanceof Error&&J.message==="Request timeout"?X(Z==="ar"?"انتهت مهلة الطلب. يرجى التحقق من اتصال الإنترنت والمحاولة مرة أخرى.":"İstek zaman aşımına uğradı. Lütfen internet bağlantınızı kontrol edin ve tekrar deneyin."):X(Z==="ar"?"حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.":"Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin.")}finally{console.log("🏁 إنهاء عملية الإرسال"),z(!1)}};if(u){const P=fi.find(J=>J.id===u);if(P){if(P.id==="health-insurance")return a.jsxs("div",{className:`min-h-screen bg-white dark:bg-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria ${c?"language-change-blur language-change-animation":""}`,children:[a.jsx(Pe,{isDarkMode:o}),a.jsx(Vu,{onBack:pr,isDarkMode:o,onNavigateToContact:Ds,onOpenProfile:()=>_(!0),onOpenAccount:()=>{console.log("onOpenAccount تم استدعاؤه من HealthInsurancePage"),y(!0)},onOpenHelp:()=>T(!0),onToggleDarkMode:zt,onNavigateToMainHome:wt})]});const J={...P,icon:a.jsx(P.icon,{className:"w-8 h-8 text-white"}),titleKey:P.titleKey,descriptionKey:P.descriptionKey,fullDescriptionKey:P.fullDescriptionKey,featuresKey:P.featuresKey,benefitsKey:P.benefitsKey,processKey:P.processKey};return a.jsxs("div",{className:`min-h-screen bg-white dark:bg-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria ${c?"language-change-blur language-change-animation":""}`,children:[a.jsx(Pe,{isDarkMode:o}),a.jsx(Hu,{service:J,onBack:pr,isDarkMode:o,onNavigateToContact:Ds,onOpenProfile:()=>_(!0),onOpenAccount:()=>{console.log("onOpenAccount تم استدعاؤه من ServicePage"),y(!0)},onOpenHelp:()=>T(!0),onToggleDarkMode:zt,onNavigateToMainHome:wt}),a.jsx(Ea,{isLoginOpen:m,isSignupOpen:b,onCloseLogin:ls,onCloseSignup:cs,onSwitchToSignup:ds,onSwitchToLogin:us,isDarkMode:o,setShowWelcome:p,onNavigateToHome:wt}),g&&V&&Y&&a.jsx(Pa,{userName:Y.full_name||V.email||"مستخدم",userRole:Y.role,onClose:()=>p(!1)}),a.jsx(Br,{isOpen:A.isOpen,onClose:Q,serviceType:A.serviceType,serviceTitle:A.serviceTitle,isDarkMode:o})]})}}return j?(window.adminDashboardLogged||(console.log("🔧 عرض لوحة تحكم الأدمن"),window.adminDashboardLogged=!0),a.jsx(Fg,{onBack:()=>e("/home"),isDarkMode:o,onToggleDarkMode:zt})):N?a.jsx(zg,{onBack:()=>y(!1),isDarkMode:o}):S?a.jsx(Bg,{onBack:()=>_(!1),isDarkMode:o}):C?a.jsx(Wg,{onBack:()=>T(!1),isDarkMode:o}):s.pathname==="/voluntary-return"?a.jsxs("div",{className:`min-h-screen bg-white dark:bg-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria ${c?"language-change-blur language-change-animation":""}`,children:[a.jsx(Pe,{isDarkMode:o}),a.jsx(Ug,{onBack:()=>e("/home"),isDarkMode:o}),a.jsx(Ea,{isLoginOpen:m,isSignupOpen:b,onCloseLogin:ls,onCloseSignup:cs,onSwitchToSignup:ds,onSwitchToLogin:us,isDarkMode:o,setShowWelcome:p,onNavigateToHome:wt}),g&&V&&a.jsx(Pa,{userName:Y?.full_name||V.email||"مستخدم",userRole:Y?.role,onClose:()=>p(!1)}),a.jsx(Br,{isOpen:A.isOpen,onClose:Q,serviceType:A.serviceType,serviceTitle:A.serviceTitle,isDarkMode:o})]}):s.pathname==="/auth/verify-email"?a.jsxs("div",{className:`min-h-screen ${o?"dark":""} transition-colors duration-500`,children:[a.jsx(Pe,{isDarkMode:o}),a.jsx(rc,{isDarkMode:o})]}):a.jsxs("div",{className:`min-h-screen bg-white dark:bg-jet-800 text-jet-800 dark:text-white overflow-x-hidden font-alexandria ${c?"language-change-blur language-change-animation":""}`,children:[a.jsx(Pe,{isDarkMode:o}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
          /* تحسين الأداء: تقليل الأنيميشن على الأجهزة المحمولة */
          @media (max-width: 768px) {
            .animate-float,
            .animate-float-slow,
            .animate-float-reverse,
            .animate-float-wide-slower {
              animation: none !important;
            }
            
            .animate-spin-slow,
            .animate-spin-slow-reverse,
            .animate-orbit,
            .animate-orbit-reverse {
              animation: none !important;
            }
            
            .animate-speed-line,
            .animate-speed-line-delayed,
            .animate-speed-line-delayed-2 {
              animation: none !important;
            }
          }
        `}}),a.jsxs("nav",{className:`fixed top-0 w-full z-50 transition-all duration-300 ${i>50?"bg-white/95 dark:bg-jet-800/95 backdrop-blur-md shadow-xl border-b border-platinum-300 dark:border-jet-700":"bg-transparent"}`,children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-3 md:py-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("img",{src:Z==="ar"?"/logo-text.png":"/logo-text-en.png",className:`h-8 md:h-10 w-auto max-w-none rounded-lg object-contain transition-all duration-300 ${c?"language-change-logo":""} ${i>50?"brightness-0 dark:brightness-100":"brightness-0 invert dark:brightness-100 dark:invert-0"}`,alt:Z==="ar"?"مجموعة تواصل":Z==="tr"?"Tevasul Grubu":"Tevasul Group"}),a.jsx("span",{className:`text-lg md:text-xl font-bold transition-colors duration-300 ${i>50?"text-caribbean-700 dark:text-caribbean-400":"text-white drop-shadow-lg"}`})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse",children:[Qe.map(P=>P.isSection?a.jsxs("button",{onClick:()=>{const J=P.href.replace("#",""),ie=document.getElementById(J);ie&&ie.scrollIntoView({behavior:"smooth",block:"start"})},className:`relative transition-colors duration-300 group font-medium ${c?"language-change-text":""} ${i>50?"text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400":"text-white/90 hover:text-white drop-shadow-md"}`,children:[P.name,a.jsx("span",{className:`absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600":"bg-white"}`})]},P.name):a.jsxs(zi,{to:P.href,className:`relative transition-colors duration-300 group font-medium ${c?"language-change-text":""} ${i>50?"text-jet-800 dark:text-platinum-200 hover:text-caribbean-700 dark:hover:text-caribbean-400":"text-white/90 hover:text-white drop-shadow-md"}`,children:[P.name,a.jsx("span",{className:`absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600":"bg-white"}`})]},P.name)),V?a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[hs&&a.jsxs("button",{onClick:()=>e("/admin"),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white hover:from-caribbean-700 hover:to-indigo-700":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30"}`,children:[a.jsx(ja,{className:"w-4 h-4 ml-1"}),a.jsx("span",{className:"hidden sm:inline",children:"لوحة التحكم"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>F(!I),className:`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white hover:from-caribbean-700 hover:to-indigo-700":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30"}`,children:[q&&a.jsxs("div",{className:"relative ml-2",children:[a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-400 rounded-full animate-ping"})]}),a.jsx(ze,{className:"w-4 h-4 ml-2"}),a.jsx("span",{className:"hidden sm:inline",children:U("navbar.account")}),a.jsx(Dt,{className:`w-4 h-4 mr-2 transition-transform duration-300 ${I?"rotate-180":""}`})]}),I&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white/95 dark:bg-jet-800/95 backdrop-blur-md rounded-xl shadow-2xl border border-platinum-300 dark:border-jet-600 py-2 z-50",children:[a.jsx("div",{className:"px-4 py-3 border-b border-platinum-200 dark:border-jet-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-caribbean-500 to-indigo-500 rounded-full flex items-center justify-center ml-3",children:a.jsx(ze,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-jet-800 dark:text-white text-sm",children:Y?.full_name||V.email}),a.jsx("p",{className:"text-xs text-jet-600 dark:text-platinum-400",children:V.email})]})]})}),a.jsxs("div",{className:"py-2",children:[a.jsxs("button",{onClick:()=>{_(!0),F(!1)},className:"w-full flex items-center px-4 py-2 text-right text-jet-700 dark:text-platinum-300 hover:bg-platinum-100 dark:hover:bg-jet-700 transition-colors duration-200",children:[a.jsx(ja,{className:"w-4 h-4 ml-3"}),U("user.profile")]}),a.jsxs("button",{onClick:jr,className:"w-full flex items-center px-4 py-2 text-right text-jet-700 dark:text-platinum-300 hover:bg-platinum-100 dark:hover:bg-jet-700 transition-colors duration-200",children:[a.jsx(ne,{className:"w-4 h-4 ml-3"}),U("user.transactions"),q&&a.jsxs("div",{className:"relative mr-2",children:[a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-400 rounded-full animate-ping"})]})]}),a.jsxs("button",{onClick:()=>{T(!0),F(!1)},className:"w-full flex items-center px-4 py-2 text-right text-jet-700 dark:text-platinum-300 hover:bg-platinum-100 dark:hover:bg-jet-700 transition-colors duration-200",children:[a.jsx(Vr,{className:"w-4 h-4 ml-3"}),U("user.help")]})]}),a.jsx("div",{className:"border-t border-platinum-200 dark:border-jet-700 my-2"}),a.jsxs("button",{onClick:()=>{vr(),F(!1)},className:"w-full flex items-center px-4 py-2 text-right text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",children:[a.jsx(Mo,{className:"w-4 h-4 ml-3"}),U("user.logout")]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:Rs,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white hover:from-caribbean-700 hover:to-indigo-700":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30"}`,children:[a.jsx(qi,{className:"w-4 h-4 ml-2"}),a.jsx("span",{className:"hidden sm:inline",children:U("auth.login")})]}),a.jsxs("button",{onClick:Os,className:`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white hover:from-caribbean-700 hover:to-indigo-700":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30"}`,children:[a.jsx(Ya,{className:"w-4 h-4 ml-2"}),a.jsx("span",{className:"hidden sm:inline",children:U("auth.signup")})]})]}),a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:`flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-300 ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white hover:from-caribbean-700 hover:to-indigo-700":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30"}`,title:"تغيير اللغة",children:[a.jsx(Jt,{className:"w-4 h-4 ml-2"}),a.jsx("img",{src:$t(Z),alt:`${Ft(Z)} flag`,className:"w-5 h-5 rounded-full object-cover"}),a.jsx("span",{className:"hidden sm:inline mr-2",children:U(`language.${Z==="ar"?"arabic":Z==="tr"?"turkish":"english"}`)})]}),a.jsx("div",{className:"absolute top-full right-0 mt-2 bg-white dark:bg-jet-800 border border-platinum-200 dark:border-jet-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50 min-w-[140px]",children:["ar","tr","en"].map(P=>a.jsxs("button",{onClick:()=>Se(P),className:`w-full flex items-center px-4 py-3 text-left hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 transition-colors duration-200 ${Z===P?"bg-caribbean-100 dark:bg-caribbean-900/30 text-caribbean-700 dark:text-caribbean-400":"text-jet-600 dark:text-platinum-400"} ${P==="ar"?"first:rounded-t-lg":""} ${P==="en"?"last:rounded-b-lg":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flag-shadow flag-gloss transition-all duration-200 ${Z===P?"ring-2 ring-caribbean-400 ring-offset-2 ring-offset-white dark:ring-offset-jet-800":"hover:ring-2 hover:ring-caribbean-200 hover:ring-offset-2 hover:ring-offset-white dark:hover:ring-offset-jet-800"}`,children:a.jsx("img",{src:$t(P),alt:`${Ft(P)} flag`,className:"w-6 h-6 rounded-full object-cover"})}),a.jsx("span",{className:"text-sm mr-3",children:U(`language.${P==="ar"?"arabic":P==="tr"?"turkish":"english"}`)})]},P))})]}),a.jsx("button",{onClick:zt,className:`relative w-14 h-8 rounded-full transition-all duration-300 ${i>50?o?"bg-gradient-to-r from-caribbean-500 to-indigo-500 shadow-lg":"bg-gray-300 dark:bg-gray-600 shadow-md":o?"bg-gradient-to-r from-caribbean-400/80 to-indigo-400/80 backdrop-blur-sm border border-caribbean-300/50":"bg-gray-200/80 backdrop-blur-sm border border-gray-300/50"}`,children:a.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full transition-all duration-300 flex items-center justify-center ${o?"left-7 bg-white shadow-xl transform scale-105":"left-1 bg-white shadow-lg"}`,children:o?a.jsx(qa,{className:"w-3 h-3 text-sky-400"}):a.jsx(Va,{className:"w-3 h-3 text-gray-600"})})})]}),a.jsxs("div",{className:"md:hidden flex items-center space-x-2 space-x-reverse",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:`flex items-center px-3 py-1.5 rounded-lg font-medium transition-all duration-300 ${i>50?"bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white hover:from-caribbean-700 hover:to-indigo-700":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/30"}`,title:"تغيير اللغة",children:[a.jsx(Jt,{className:"w-3 h-3 ml-1"}),a.jsx("img",{src:$t(Z),alt:`${Ft(Z)} flag`,className:"w-4 h-4 rounded-full object-cover"})]}),a.jsx("div",{className:"absolute top-full right-0 mt-2 bg-white dark:bg-jet-800 border border-platinum-200 dark:border-jet-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50 min-w-[140px]",children:["ar","tr","en"].map(P=>a.jsxs("button",{onClick:()=>Se(P),className:`w-full flex items-center px-4 py-3 text-left hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 transition-colors duration-200 ${Z===P?"bg-caribbean-100 dark:bg-caribbean-900/30 text-caribbean-700 dark:text-caribbean-400":"text-jet-600 dark:text-platinum-400"} ${P==="ar"?"first:rounded-t-lg":""} ${P==="en"?"last:rounded-b-lg":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flag-shadow flag-gloss transition-all duration-200 ${Z===P?"ring-2 ring-caribbean-400 ring-offset-2 ring-offset-white dark:ring-offset-jet-800":"hover:ring-2 hover:ring-caribbean-200 hover:ring-offset-2 hover:ring-offset-white dark:hover:ring-offset-jet-800"}`,children:a.jsx("img",{src:$t(P),alt:`${Ft(P)} flag`,className:"w-6 h-6 rounded-full object-cover"})}),a.jsx("span",{className:"text-sm mr-3",children:U(`language.${P==="ar"?"arabic":P==="tr"?"turkish":"english"}`)})]},P))})]}),a.jsx("button",{onClick:zt,className:`relative w-10 h-6 rounded-full transition-all duration-300 ${i>50?o?"bg-gradient-to-r from-caribbean-500 to-indigo-500 shadow-lg":"bg-gray-300 dark:bg-gray-600 shadow-md":o?"bg-gradient-to-r from-caribbean-400/80 to-indigo-400/80 backdrop-blur-sm border border-caribbean-300/50":"bg-gray-200/80 backdrop-blur-sm border border-gray-300/50"}`,children:a.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full transition-all duration-300 flex items-center justify-center ${o?"left-5 bg-white shadow-xl transform scale-105":"left-0.5 bg-white shadow-lg"}`,children:o?a.jsx(qa,{className:"w-2 h-2 text-sky-400"}):a.jsx(Va,{className:"w-2 h-2 text-gray-600"})})}),a.jsx("button",{className:`p-2 transition-colors duration-300 ${i>50?"text-jet-800 dark:text-platinum-200":"text-white drop-shadow-md"}`,onClick:()=>r(!t),children:t?a.jsx(_e,{className:"w-6 h-6"}):a.jsx(bc,{className:"w-6 h-6"})})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>F(!1)}),t&&a.jsx("div",{className:"md:hidden bg-white/95 dark:bg-jet-800/95 backdrop-blur-md border-t dark:border-jet-700 max-h-[80vh] overflow-y-auto",children:a.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[Qe.map(P=>P.isSection?a.jsx("button",{onClick:()=>{const J=P.href.replace("#",""),ie=document.getElementById(J);ie&&ie.scrollIntoView({behavior:"smooth",block:"start"}),r(!1)},className:`block w-full text-left px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm ${c?"language-change-text":""}`,children:P.name},P.name):a.jsx(zi,{to:P.href,className:`block px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm ${c?"language-change-text":""}`,onClick:()=>r(!1),children:P.name},P.name)),a.jsx("div",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex items-center justify-between p-3 bg-platinum-100 dark:bg-jet-700 rounded-lg",children:[a.jsx("span",{className:`text-jet-800 dark:text-platinum-200 font-medium text-sm ${c?"language-change-text":""}`,children:U("language.change")}),a.jsx("div",{className:"flex space-x-2 space-x-reverse",children:["ar","tr","en"].map(P=>a.jsx("button",{onClick:()=>Se(P),className:`w-8 h-8 rounded-full flex items-center justify-center flag-shadow flag-gloss transition-all duration-200 ${Z===P?"ring-2 ring-caribbean-400 ring-offset-1 ring-offset-white dark:ring-offset-jet-700":"bg-white dark:bg-jet-600 hover:ring-2 hover:ring-caribbean-200 hover:ring-offset-1 hover:ring-offset-white dark:hover:ring-offset-jet-700"}`,title:U(`language.${P==="ar"?"arabic":P==="tr"?"turkish":"english"}`),children:a.jsx("img",{src:$t(P),alt:`${Ft(P)} flag`,className:"w-6 h-6 rounded-full object-cover"})},P))})]})}),a.jsx("div",{className:"px-3 py-2 space-y-2",children:V?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-3 py-2 text-center",children:a.jsxs("span",{className:`text-jet-800 dark:text-platinum-200 font-medium text-sm ${c?"language-change-text":""}`,children:[U("user.welcome")," ",Y?.full_name||V.email]})}),(hs||pa)&&a.jsxs("button",{onClick:()=>{e("/admin"),r(!1),F(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm",children:[a.jsx(ja,{className:"w-4 h-4 ml-2"}),hs?"لوحة التحكم":"لوحة الإشراف"]}),a.jsxs("button",{onClick:()=>{jr(),r(!1),F(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm",children:[q&&a.jsxs("div",{className:"relative ml-2",children:[a.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-400 rounded-full animate-ping"})]}),U("user.transactions")]}),a.jsx("button",{onClick:()=>{_(!0),r(!1),F(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm",children:U("user.profile")}),a.jsx("button",{onClick:()=>{T(!0),r(!1),F(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm",children:U("user.help")}),a.jsx("button",{onClick:()=>{vr(),r(!1),F(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm",children:U("user.logout")})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{Rs(),r(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 text-jet-800 dark:text-platinum-200 hover:bg-platinum-100 dark:hover:bg-jet-700 rounded-md transition-colors duration-300 text-sm",children:[a.jsx(qi,{className:"w-4 h-4 ml-2"}),U("auth.login")]}),a.jsxs("button",{onClick:()=>{Os(),r(!1)},className:"w-full flex items-center justify-center px-3 py-2.5 bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white rounded-md hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300 text-sm",children:[a.jsx(Ya,{className:"w-4 h-4 ml-2"}),U("auth.signup")]})]})})]})})]}),I&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>F(!1)}),a.jsxs("section",{id:"home",className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-20 md:pt-24",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 dark:from-jet-900 dark:via-indigo-900 dark:to-jet-800",children:a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
                linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)
              `,backgroundSize:"50px 50px",animation:"grid-move 20s linear infinite"}})})}),a.jsxs("div",{className:"absolute inset-0",children:[a.jsxs("div",{className:"hidden md:block",children:[a.jsx("div",{className:"absolute top-20 left-10 w-16 h-16 bg-white/10 rounded-full shadow-lg animate-float-slow transform rotate-12 flex items-center justify-center",children:a.jsx(ne,{className:"w-8 h-8 text-white/60"})}),a.jsx("div",{className:"absolute top-1/4 right-20 w-32 h-1 bg-gradient-to-r from-transparent via-caribbean-400/50 to-transparent animate-speed-line"}),a.jsx("div",{className:"absolute top-1/3 right-16 w-24 h-1 bg-gradient-to-r from-transparent via-indigo-400/40 to-transparent animate-speed-line-delayed"}),a.jsx("div",{className:"absolute top-2/5 right-24 w-20 h-1 bg-gradient-to-r from-transparent via-caribbean-300/30 to-transparent animate-speed-line-delayed-2"}),a.jsx("div",{className:"absolute bottom-20 left-10 w-16 h-16 bg-caribbean-500/40 rounded-full flex items-center justify-center animate-float-wide-slower shadow-lg",children:a.jsx(ne,{className:"w-8 h-8 text-caribbean-300"})}),a.jsx("div",{className:"absolute top-20 right-10 w-16 h-16 bg-indigo-500/40 rounded-full flex items-center justify-center animate-pulse-wide-slower shadow-lg",children:a.jsx(rt,{className:"w-8 h-8 text-indigo-300"})}),a.jsx("div",{className:"absolute bottom-1/3 left-1/6 w-16 h-16 bg-caribbean-600/40 rounded-full flex items-center justify-center animate-bounce-wide-slower shadow-lg",children:a.jsx(qr,{className:"w-8 h-8 text-caribbean-300"})}),a.jsx("div",{className:"absolute top-1/3 left-1/6 w-16 h-16 bg-purple-500/40 rounded-full flex items-center justify-center animate-float-wide-slower delay-1000 shadow-lg",children:a.jsx(Jt,{className:"w-8 h-8 text-purple-300"})}),a.jsx("div",{className:"absolute bottom-1/3 right-1/6 w-16 h-16 bg-blue-500/40 rounded-full flex items-center justify-center animate-pulse-wide-slow delay-2000 shadow-lg",children:a.jsx(sr,{className:"w-8 h-8 text-blue-300"})}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-green-500/40 rounded-full flex items-center justify-center animate-bounce-wide-slower delay-1500 shadow-lg",children:a.jsx(Ee,{className:"w-8 h-8 text-green-300"})}),a.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-16 h-16 bg-blue-500/40 rounded-full flex items-center justify-center animate-float-wide-slower delay-3000 shadow-lg",children:a.jsx(Io,{className:"w-8 h-8 text-blue-300"})}),a.jsx("div",{className:"absolute top-1/4 right-1/4 w-16 h-16 bg-red-500/40 rounded-full flex items-center justify-center animate-pulse-wide-slower delay-2500 shadow-lg",children:a.jsx(Rt,{className:"w-8 h-8 text-red-300"})}),a.jsx("div",{className:"absolute top-1/6 right-1/6 w-24 h-24 bg-gradient-to-r from-caribbean-400/20 to-indigo-400/20 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute bottom-1/6 left-1/6 w-20 h-20 bg-gradient-to-r from-purple-400/20 to-pink-400/20 rounded-full animate-spin-slow-reverse"}),a.jsx("div",{className:"absolute top-1/2 left-1/6 w-16 h-16 bg-gradient-to-r from-sky-400/20 to-blue-400/20 rounded-full animate-bounce-slow"}),a.jsx("div",{className:"absolute top-1/2 right-1/6 w-18 h-18 bg-gradient-to-r from-green-400/20 to-teal-400/20 rounded-full animate-pulse-slow delay-500"}),a.jsx("div",{className:"absolute top-1/4 left-1/2 w-32 h-0.5 bg-gradient-to-r from-transparent via-caribbean-400/30 to-transparent animate-pulse-slow"}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-24 h-0.5 bg-gradient-to-r from-transparent via-indigo-400/30 to-transparent animate-pulse-slow delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-20 h-0.5 bg-gradient-to-r from-transparent via-purple-400/30 to-transparent animate-pulse-slow delay-2000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:a.jsxs("div",{className:"relative w-96 h-96",children:[a.jsx("div",{className:"absolute inset-0 border border-white/10 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute top-0 left-1/2 w-3 h-3 bg-caribbean-400 rounded-full transform -translate-x-1/2 -translate-y-1/2 animate-orbit"}),a.jsx("div",{className:"absolute bottom-0 right-1/2 w-2 h-2 bg-indigo-400 rounded-full transform translate-x-1/2 translate-y-1/2 animate-orbit-reverse"})]})})]}),a.jsxs("div",{className:"md:hidden",children:[a.jsx("div",{className:"absolute top-20 left-10 w-12 h-12 bg-white/10 rounded-full shadow-lg animate-float-slow flex items-center justify-center",children:a.jsx(ne,{className:"w-6 h-6 text-white/60"})}),a.jsx("div",{className:"absolute bottom-20 right-10 w-12 h-12 bg-caribbean-500/40 rounded-full flex items-center justify-center animate-float-slow delay-1000 shadow-lg",children:a.jsx(rt,{className:"w-6 h-6 text-caribbean-300"})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-gradient-to-r from-caribbean-400/20 to-indigo-400/20 rounded-full animate-pulse-slow"})]})]}),a.jsxs("div",{className:"relative text-center px-4 max-w-6xl mx-auto",children:[a.jsx("div",{className:"flex items-center justify-center mb-6 md:mb-8 animate-fade-in",children:a.jsx("img",{src:"/logo-fınal.png",alt:"مجموعة تواصل",className:`w-32 h-32 md:w-40 md:h-40 lg:w-56 lg:h-56 xl:w-64 xl:h-64 object-contain animate-float brightness-0 invert ${c?"language-change-logo":""}`})}),a.jsx("h1",{className:`text-2xl md:text-4xl lg:text-5xl xl:text-6xl font-bold mb-4 md:mb-6 animate-fade-in-up text-white drop-shadow-lg leading-relaxed ${c?"language-change-text":""}`,children:a.jsx("span",{className:"inline-block animate-text-shimmer bg-gradient-to-r from-white via-caribbean-200 to-white bg-clip-text text-transparent bg-[length:200%_100%] leading-relaxed",children:U("hero.mainTitle")})}),a.jsx("div",{className:`text-lg md:text-2xl lg:text-3xl xl:text-4xl font-semibold mb-6 md:mb-8 text-white/95 drop-shadow-md animate-fade-in-delay-1 ${c?"language-change-text":""}`,children:a.jsxs("span",{className:"relative",children:[U("hero.withUs"),a.jsx("div",{className:"absolute -bottom-2 left-0 right-0 h-1 bg-gradient-to-r from-caribbean-400 to-indigo-400 rounded-full animate-expand-width"})]})}),a.jsx("div",{className:`text-base md:text-lg lg:text-xl text-white/85 mb-8 md:mb-10 leading-relaxed animate-fade-in-delay-2 max-w-3xl mx-auto drop-shadow-sm px-4 ${c?"language-change-text":""}`,children:a.jsxs("span",{className:"inline-block animate-fade-in-up relative",children:[U("hero.description"),a.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-caribbean-400 to-indigo-400 animate-expand-width-delayed"})]})}),a.jsxs("div",{className:"flex justify-center items-center space-x-4 md:space-x-8 space-x-reverse mb-8 md:mb-10 animate-fade-in-delay-2",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-caribbean-300 animate-count-up",children:"5000+"}),a.jsx("div",{className:"text-xs md:text-sm text-white/70",children:U("hero.stats.clients")})]}),a.jsx("div",{className:"w-px h-8 md:h-12 bg-white/30"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-indigo-300 animate-count-up-delayed",children:"24/7"}),a.jsx("div",{className:"text-xs md:text-sm text-white/70",children:U("hero.stats.service")})]}),a.jsx("div",{className:"w-px h-8 md:h-12 bg-white/30"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-sky-300 animate-count-up-delayed-2",children:"10+"}),a.jsx("div",{className:"text-xs md:text-sm text-white/70",children:U("hero.stats.experience")})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 md:gap-6 justify-center animate-fade-in-delay-3",children:[a.jsxs("button",{onClick:br,className:"group relative bg-gradient-to-r from-caribbean-600 to-indigo-600 text-white px-6 md:px-10 py-3 md:py-5 rounded-full font-bold text-base md:text-lg hover:from-caribbean-700 hover:to-indigo-700 transition-all duration-300 transform hover:scale-110 shadow-2xl hover:shadow-3xl flex items-center justify-center overflow-hidden animate-pulse-glow border-2 border-white/20 hover:border-white/40",children:[a.jsx("div",{className:"absolute inset-0 bg-white/20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-caribbean-400/20 to-indigo-400/20 animate-pulse"}),a.jsx("span",{className:"relative z-10",children:U("hero.discoverServices")}),a.jsx(Dt,{className:"relative z-10 mr-2 md:mr-3 w-5 h-5 md:w-6 md:h-6 group-hover:translate-y-2 transition-transform duration-300 animate-bounce"})]}),a.jsxs("button",{onClick:Ds,className:"group relative border-3 border-white/80 text-white px-6 md:px-10 py-3 md:py-5 rounded-full font-bold text-base md:text-lg hover:bg-white/20 hover:border-white transition-all duration-300 transform hover:scale-110 shadow-2xl hover:shadow-3xl overflow-hidden animate-pulse-glow bg-gradient-to-r from-white/5 to-white/10",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent animate-pulse"}),a.jsxs("span",{className:"relative z-10 flex items-center justify-center",children:[U("hero.contactNow"),a.jsx(Mt,{className:"mr-2 md:mr-3 w-4 h-4 md:w-5 md:h-5 group-hover:animate-pulse group-hover:scale-110 transition-all duration-300"})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center space-y-2 md:space-y-0 md:space-x-12 space-x-reverse mt-12 md:mt-16 animate-fade-in-delay-4",children:[a.jsxs("div",{className:"flex items-center text-white/70 text-sm md:text-lg",children:[a.jsx(Ee,{className:"w-5 h-5 md:w-7 md:h-7 ml-2 md:ml-3 text-green-400"}),a.jsx("span",{className:"text-base md:text-xl font-semibold",children:U("hero.trust.licensed")})]}),a.jsxs("div",{className:"flex items-center text-white/70 text-sm md:text-lg",children:[a.jsx(at,{className:"w-5 h-5 md:w-7 md:h-7 ml-2 md:ml-3 text-caribbean-400"}),a.jsx("span",{className:"text-base md:text-xl font-semibold",children:U("hero.trust.fast")})]}),a.jsxs("div",{className:"flex items-center text-white/70 text-sm md:text-lg",children:[a.jsx(Qs,{className:"w-5 h-5 md:w-7 md:h-7 ml-2 md:ml-3 text-sky-400"}),a.jsx("span",{className:"text-base md:text-xl font-semibold",children:U("hero.trust.excellent")})]})]})]}),a.jsx("div",{className:"absolute bottom-10 left-10 animate-bounce-slow hidden md:block",children:a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-full p-4 border border-white/20 flex items-center justify-center",children:a.jsxs("div",{className:"flex items-center text-white text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse ml-2"}),U("hero.available")]})})}),a.jsx("div",{className:"absolute bottom-10 right-10 animate-float hidden md:block",children:a.jsx("div",{className:"bg-caribbean-500/20 backdrop-blur-sm rounded-full p-4 border border-caribbean-400/30 flex items-center justify-center",children:a.jsxs("button",{onClick:br,className:"flex items-center text-white text-sm hover:text-caribbean-200 transition-colors duration-300",children:[U("hero.discoverServicesShort"),a.jsx(Dt,{className:"mr-2 w-5 h-5 group-hover:translate-y-1 transition-transform duration-300 animate-bounce"}),a.jsx(Vi,{className:"w-4 h-4 mr-2"})]})})})]}),a.jsxs("section",{id:"services",className:"py-20 bg-gradient-to-br from-caribbean-50/30 via-indigo-50/20 to-platinum-50 dark:from-caribbean-900/10 dark:via-indigo-900/5 dark:to-jet-700 relative overflow-hidden pt-24 md:pt-20",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-caribbean-200/20 to-indigo-200/20 dark:from-caribbean-800/10 dark:to-indigo-800/10 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-tr from-indigo-200/20 to-caribbean-200/20 dark:from-indigo-800/10 dark:to-caribbean-800/10 rounded-full blur-3xl animate-float-reverse"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-r from-caribbean-100/30 to-indigo-100/30 dark:from-caribbean-900/20 dark:to-indigo-900/20 rounded-full blur-2xl animate-pulse-slow"})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[a.jsxs("div",{className:"text-center mb-16 animate-fade-in",children:[a.jsx("h2",{className:`text-4xl md:text-5xl font-bold bg-gradient-to-r from-caribbean-700 via-indigo-700 to-caribbean-600 dark:from-caribbean-400 dark:via-indigo-400 dark:to-caribbean-300 bg-clip-text text-transparent mb-6 animate-text-shimmer bg-[length:200%_100%] ${c?"language-change-text":""}`,children:U("services.title")}),a.jsx("p",{className:`text-xl text-jet-700 dark:text-platinum-300 max-w-3xl mx-auto leading-relaxed ${c?"language-change-text":""}`,children:U("services.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:xa.map((P,J)=>a.jsxs("div",{className:"group bg-white dark:bg-jet-800 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-platinum-300 dark:border-jet-600 hover:border-caribbean-300 dark:hover:border-caribbean-500",children:[a.jsx("div",{className:"mb-6 p-3 bg-gradient-to-r from-caribbean-50 to-indigo-50 dark:from-caribbean-900/20 dark:to-indigo-900/20 rounded-2xl w-fit group-hover:scale-110 transition-transform duration-300",children:P.icon}),a.jsx("h3",{className:"text-2xl font-bold mb-4 text-jet-800 dark:text-platinum-200 group-hover:text-caribbean-700 dark:group-hover:text-caribbean-400 transition-colors duration-300",children:P.title}),a.jsx("p",{className:"text-jet-600 dark:text-platinum-400 leading-relaxed mb-6",children:P.description}),a.jsxs("button",{onClick:()=>ba(P.id),className:"w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center group",children:[U("services.discoverMore"),a.jsx(Vi,{className:"mr-2 w-4 h-4 group-hover:translate-x-1 transition-transform duration-300"})]}),V&&a.jsx("button",{onClick:()=>w(P.id,P.title),className:"w-full mt-2 bg-white dark:bg-jet-700 text-caribbean-600 dark:text-caribbean-400 border-2 border-caribbean-600 dark:border-caribbean-400 py-2 px-6 rounded-lg font-semibold hover:bg-caribbean-50 dark:hover:bg-caribbean-900/20 transition-all duration-300 flex items-center justify-center",children:U("services.quickRequest")}),!V&&a.jsx("button",{onClick:()=>w(P.id,P.title),className:"w-full mt-2 bg-blue-500 text-white border-2 border-blue-500 py-2 px-6 rounded-lg font-semibold hover:bg-blue-600 hover:border-blue-600 transition-all duration-300 flex items-center justify-center",children:U("services.loginToRequest")})]},J))})]})]}),a.jsx("section",{id:"about",className:"py-20 bg-white dark:bg-jet-800 pt-24 md:pt-20",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:`text-4xl md:text-5xl font-bold mb-6 ${c?"language-change-text":""}`,children:a.jsx("span",{className:"bg-gradient-to-r from-caribbean-600 via-indigo-600 to-caribbean-800 bg-clip-text text-transparent",children:a.jsx("span",{className:"pb-2 block",children:U("about.title")})})}),a.jsx("p",{className:`text-xl text-jet-600 dark:text-platinum-400 mb-6 leading-relaxed ${c?"language-change-text":""}`,children:U("about.description1")}),a.jsx("p",{className:`text-lg text-jet-600 dark:text-platinum-400 mb-8 leading-relaxed ${c?"language-change-text":""}`,children:U("about.description2")}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-caribbean-600 dark:text-caribbean-400 mb-2",children:"5000+"}),a.jsx("div",{className:"text-jet-600 dark:text-platinum-400",children:U("about.stats.clients")})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:"10+"}),a.jsx("div",{className:"text-jet-600 dark:text-platinum-400",children:U("about.stats.experience")})]})]})]}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:"bg-gradient-to-br from-caribbean-100 to-indigo-100 dark:from-caribbean-900/20 dark:to-indigo-900/20 rounded-2xl p-8",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-jet-700 p-4 rounded-lg text-center",children:[a.jsx(rt,{className:"w-8 h-8 text-caribbean-500 mx-auto mb-2"}),a.jsx("div",{className:"font-semibold text-jet-800 dark:text-platinum-200",children:U("about.features.team")})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-700 p-4 rounded-lg text-center",children:[a.jsx(qr,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),a.jsx("div",{className:"font-semibold text-jet-800 dark:text-platinum-200",children:U("about.features.speed")})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-700 p-4 rounded-lg text-center",children:[a.jsx(Ee,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),a.jsx("div",{className:"font-semibold text-jet-800 dark:text-platinum-200",children:U("about.features.security")})]}),a.jsxs("div",{className:"bg-white dark:bg-jet-700 p-4 rounded-lg text-center",children:[a.jsx(Rt,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),a.jsx("div",{className:"font-semibold text-jet-800 dark:text-platinum-200",children:U("about.features.care")})]})]})})})]})})}),a.jsx("section",{id:"contact",className:"py-20 bg-gradient-to-br from-caribbean-50/30 via-indigo-50/20 to-platinum-50 dark:from-caribbean-900/10 dark:via-indigo-900/5 dark:to-jet-700 pt-24 md:pt-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:`text-4xl md:text-5xl font-bold bg-gradient-to-r from-caribbean-700 via-indigo-700 to-caribbean-600 dark:from-caribbean-400 dark:via-indigo-400 dark:to-caribbean-300 bg-clip-text text-transparent mb-6 ${c?"language-change-text":""}`,children:U("contact.title")}),a.jsx("p",{className:`text-xl text-jet-700 dark:text-platinum-300 max-w-3xl mx-auto ${c?"language-change-text":""}`,children:U("contact.subtitle")})]}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[a.jsx("div",{children:a.jsxs("div",{className:"bg-white dark:bg-jet-800 p-8 rounded-2xl shadow-lg border border-platinum-300 dark:border-jet-600",children:[a.jsx("h3",{className:`text-2xl font-bold mb-6 text-jet-800 dark:text-platinum-200 ${c?"language-change-text":""}`,children:U("contact.info.title")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(He,{className:"w-6 h-6 text-caribbean-500 ml-3"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:"info@tevasul.group"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"w-6 h-6 text-indigo-500 ml-3"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400 font-mono text-left font-bold",dir:"ltr",children:"+90 555 123 4567"}),a.jsx("a",{href:"https://wa.me/905551234567",target:"_blank",rel:"noopener noreferrer",className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors cursor-pointer",title:"فتح الواتساب",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(sr,{className:"w-6 h-6 text-green-500 ml-3"}),a.jsx("span",{className:"text-jet-600 dark:text-platinum-400",children:U("contact.info.address")})]})]})]})}),a.jsx("div",{children:a.jsxs("form",{onSubmit:we,className:"bg-white dark:bg-jet-800 p-8 rounded-2xl shadow-lg border border-platinum-300 dark:border-jet-600 space-y-6",children:[K&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(fe,{className:"w-5 h-5 text-green-600 dark:text-green-400 ml-2"}),a.jsx("span",{className:"text-green-800 dark:text-green-200",children:Z==="ar"?"تم إرسال رسالتك بنجاح! سنتواصل معك قريباً.":"Mesajınız başarıyla gönderildi! Yakında sizinle iletişime geçeceğiz."})]})}),W&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(_e,{className:"w-5 h-5 text-red-600 dark:text-red-400 ml-2"}),a.jsx("span",{className:"text-red-800 dark:text-red-200",children:W})]})}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2 ${c?"language-change-text":""}`,children:U("contact.form.name")}),a.jsx("input",{type:"text",value:$.name,onChange:P=>E({...$,name:P.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:U("contact.form.name"),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2 ${c?"language-change-text":""}`,children:U("contact.form.email")}),a.jsx("input",{type:"email",value:$.email,onChange:P=>E({...$,email:P.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:"example@email.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2 ${c?"language-change-text":""}`,children:U("contact.form.serviceType")}),a.jsxs("select",{value:$.serviceType,onChange:P=>E({...$,serviceType:P.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",children:[a.jsx("option",{value:"",children:U("contact.form.selectService")}),a.jsx("option",{value:U("contact.form.translation"),children:U("contact.form.translation")}),a.jsx("option",{value:U("contact.form.travel"),children:U("contact.form.travel")}),a.jsx("option",{value:U("contact.form.legal"),children:U("contact.form.legal")}),a.jsx("option",{value:U("contact.form.government"),children:U("contact.form.government")}),a.jsx("option",{value:U("contact.form.insurance"),children:U("contact.form.insurance")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium text-jet-700 dark:text-platinum-300 mb-2 ${c?"language-change-text":""}`,children:U("contact.form.message")}),a.jsx("textarea",{rows:5,value:$.message,onChange:P=>E({...$,message:P.target.value}),className:"w-full px-4 py-3 border border-platinum-300 dark:border-jet-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-caribbean-500 focus:border-transparent transition-all duration-300 bg-white dark:bg-jet-800 text-jet-900 dark:text-white",placeholder:U("contact.form.message"),required:!0})]}),a.jsx("button",{type:"submit",disabled:G,className:`w-full bg-gradient-to-r from-caribbean-600 to-indigo-700 text-white py-4 rounded-lg font-semibold hover:from-caribbean-700 hover:to-indigo-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center ${c?"language-change-text":""}`,children:G?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),Z==="ar"?"جاري الإرسال...":"Gönderiliyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"w-5 h-5 ml-2"}),U("contact.form.submit")]})})]})})]})]})}),a.jsx("footer",{className:"bg-jet-900 dark:bg-black text-white py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-3 space-x-reverse mb-4",children:[a.jsx("img",{src:"/logo-fınal.png",alt:"مجموعة تواصل",className:`w-8 h-8 rounded-lg object-cover shadow-md ${c?"language-change-logo":""}`}),a.jsx("span",{className:`text-xl font-bold bg-gradient-to-r from-caribbean-400 via-indigo-400 to-caribbean-600 bg-clip-text text-transparent ${c?"language-change-text":""}`,children:"مجموعة تواصل"})]}),a.jsx("p",{className:`text-platinum-400 mb-4 ${c?"language-change-text":""}`,children:U("footer.description")}),a.jsx("p",{className:`text-sm text-platinum-500 ${c?"language-change-text":""}`,children:U("footer.copyright")})]})}),a.jsx(Ea,{isLoginOpen:m,isSignupOpen:b,onCloseLogin:ls,onCloseSignup:cs,onSwitchToSignup:ds,onSwitchToLogin:us,isDarkMode:o,setShowWelcome:p,onNavigateToHome:wt}),g&&V&&Y&&Y.role==="user"&&a.jsx(Pa,{userName:Y.full_name||V.email||"مستخدم",userRole:Y.role,onClose:()=>p(!1)}),a.jsx(Br,{isOpen:A.isOpen,onClose:Q,serviceType:A.serviceType,serviceTitle:A.serviceTitle,isDarkMode:o}),M&&L&&a.jsx(Hg,{isOpen:M,onClose:()=>{R(!1),D(null)},userRole:L.userRole,userName:L.userName,onRedirect:De})]})}const Vg=()=>a.jsx(qg,{}),Kg=nc([{path:"/",element:a.jsx(Vg,{}),children:[{index:!0,element:a.jsx(oc,{to:"/home",replace:!0})},{path:"home",element:a.jsx(je,{})},{path:"services",element:a.jsx(je,{})},{path:"about",element:a.jsx(je,{})},{path:"contact",element:a.jsx(je,{})},{path:"login",element:a.jsx(je,{})},{path:"signup",element:a.jsx(je,{})},{path:"account",element:a.jsx(je,{})},{path:"profile",element:a.jsx(je,{})},{path:"help",element:a.jsx(je,{})},{path:"admin",element:a.jsx(je,{})},{path:"admin/dashboard",element:a.jsx(je,{})},{path:"admin/service-requests",element:a.jsx(je,{})},{path:"admin/support-messages",element:a.jsx(je,{})},{path:"admin/ready-forms",element:a.jsx(je,{})},{path:"admin/faq",element:a.jsx(je,{})},{path:"admin/analytics",element:a.jsx(je,{})},{path:"admin/moderators",element:a.jsx(je,{})},{path:"admin/health-insurance",element:a.jsx(je,{})},{path:"auth/verify-email",element:a.jsx(rc,{isDarkMode:!1})},{path:"voluntary-return",element:a.jsx(je,{})},...fi.map(s=>({path:`services/${s.id}`,element:a.jsx(je,{})}))]}]),Yg=({children:s})=>{const e=Uu();return a.jsx(dl.Provider,{value:e,children:s})};Fo(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(Bu,{children:a.jsx(Yg,{children:a.jsx(lc,{router:Kg})})})}));
