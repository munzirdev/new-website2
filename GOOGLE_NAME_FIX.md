# ุฅุตูุงุญ ูุดููุฉ ุนุฑุถ ุงุณู ุงููุณุชุฎุฏู ูู Google ๐ง

## ุงููุดููุฉ:
ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ Googleุ ูุธูุฑ ุงูุฌุฒุก ุงูุฃูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุฏูุงู ูู ุงุณู ุงููุณุชุฎุฏู ุงูุญูููู.

## ุงูุณุจุจ:
ุงูููุฏ ูุงู ูุณุชุฎุฏู `user.email?.split('@')[0]` ูู fallback ุจุฏูุงู ูู ุงุณุชุฎุฑุงุฌ ุงูุงุณู ุงูุตุญูุญ ูู ุจูุงูุงุช Google.

## ุงูุญููู ุงููุทุจูุฉ:

### 1. โ **ุชุญุณูู ุงุณุชุฎุฑุงุฌ ุงูุงุณู ูู AuthCallback.tsx**

#### ูุจู ุงูุชุญุฏูุซ:
```typescript
const fullName = googleData?.full_name || 
               googleData?.name || 
               googleData?.display_name || 
               data.session.user.email?.split('@')[0] || // โ ุงููุดููุฉ ููุง
               'ูุณุชุฎุฏู ุฌุฏูุฏ';
```

#### ุจุนุฏ ุงูุชุญุฏูุซ:
```typescript
// ูุญุงููุฉ ุงุณุชุฎุฑุงุฌ ุงูุงุณู ุจุทุฑู ูุฎุชููุฉ
let fullName = '';

// 1. ูุญุงููุฉ ูู user_metadata
if (googleData?.full_name) {
  fullName = googleData.full_name;
  console.log('โ ุชู ุงูุนุซูุฑ ุนูู ุงูุงุณู ูู full_name:', fullName);
} else if (googleData?.name) {
  fullName = googleData.name;
  console.log('โ ุชู ุงูุนุซูุฑ ุนูู ุงูุงุณู ูู name:', fullName);
} else if (googleData?.display_name) {
  fullName = googleData.display_name;
  console.log('โ ุชู ุงูุนุซูุฑ ุนูู ุงูุงุณู ูู display_name:', fullName);
} else if (googleData?.given_name && googleData?.family_name) {
  fullName = `${googleData.given_name} ${googleData.family_name}`;
  console.log('โ ุชู ุงูุนุซูุฑ ุนูู ุงูุงุณู ูู given_name + family_name:', fullName);
} else if (googleData?.given_name) {
  fullName = googleData.given_name;
  console.log('โ ุชู ุงูุนุซูุฑ ุนูู ุงูุงุณู ูู given_name ููุท:', fullName);
} else {
  // ุฅุฐุง ูู ูุฌุฏ ุฃู ุงุณูุ ุงุณุชุฎุฏู "ูุณุชุฎุฏู ุฌุฏูุฏ" ุจุฏูุงู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  fullName = 'ูุณุชุฎุฏู ุฌุฏูุฏ';
  console.log('โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ุงุณูุ ุงุณุชุฎุฏุงู "ูุณุชุฎุฏู ุฌุฏูุฏ"');
}
```

### 2. โ **ุชุญุณูู UserAvatar.tsx**

#### ุฅุถุงูุฉ ุฏุงูุฉ ุฐููุฉ ูุงุณุชุฎุฑุงุฌ ุงูุงุณู:
```typescript
const getUserName = () => {
  // ุฃููุงู: ุงุณุชุฎุฏู ุงูุงุณู ูู ุงูููู ุงูุดุฎุตู
  if (profile?.full_name && profile.full_name !== 'ูุณุชุฎุฏู ุฌุฏูุฏ') {
    return profile.full_name;
  }
  
  // ุซุงููุงู: ุงุณุชุฎุฏู ุงูุงุณู ูู user_metadata
  const googleData = user?.user_metadata;
  if (googleData?.full_name) {
    return googleData.full_name;
  } else if (googleData?.name) {
    return googleData.name;
  } else if (googleData?.display_name) {
    return googleData.display_name;
  } else if (googleData?.given_name && googleData?.family_name) {
    return `${googleData.given_name} ${googleData.family_name}`;
  } else if (googleData?.given_name) {
    return googleData.given_name;
  }
  
  // ุซุงูุซุงู: ุฅุฐุง ูุงู ุงูุงุณู ูู ุงูููู ุงูุดุฎุตู ูู "ูุณุชุฎุฏู ุฌุฏูุฏ"ุ ุงุณุชุฎุฏู "ูุณุชุฎุฏู"
  if (profile?.full_name === 'ูุณุชุฎุฏู ุฌุฏูุฏ') {
    return 'ูุณุชุฎุฏู';
  }
  
  // ุฑุงุจุนุงู: ุงุณุชุฎุฏู "ูุณุชุฎุฏู" ุจุฏูุงู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  return 'ูุณุชุฎุฏู';
};
```

### 3. โ **ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู ุงูููุฌูุฏ**

#### ุฅุถุงูุฉ ุชุญุฏูุซ ููุงุณู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู:
```typescript
// ุชุญุฏูุซ ุงูุงุณู ุฅุฐุง ูุงู ูุชููุฑุงู
let updatedName = profile.full_name;
if (googleData?.full_name && profile.full_name !== googleData.full_name) {
  updatedName = googleData.full_name;
  console.log('โ ุชุญุฏูุซ ุงูุงุณู ูู Google:', updatedName);
} else if (googleData?.name && profile.full_name !== googleData.name) {
  updatedName = googleData.name;
  console.log('โ ุชุญุฏูุซ ุงูุงุณู ูู Google:', updatedName);
} else if (googleData?.given_name && googleData?.family_name) {
  const newName = `${googleData.given_name} ${googleData.family_name}`;
  if (profile.full_name !== newName) {
    updatedName = newName;
    console.log('โ ุชุญุฏูุซ ุงูุงุณู ูู Google:', updatedName);
  }
}
```

### 4. โ **ุฅุถุงูุฉ ุณุฌูุงุช ุชุดุฎูุต ููุตูุฉ**

#### ุทุจุงุนุฉ ุฌููุน ุงูุจูุงูุงุช ุงููุชููุฑุฉ:
```typescript
console.log('๐ ุฌููุน ุจูุงูุงุช user_metadata:', googleData);
console.log('๐ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุงููุฉ:', data.session.user);
console.log('๐ ุฌููุน ุงูููุงุชูุญ ุงููุชููุฑุฉ ูู user_metadata:', Object.keys(googleData || {}));
```

## ุงููููุงุช ุงููุญุฏุซุฉ:

1. **`src/components/AuthCallback.tsx`**
   - ุชุญุณูู ุงุณุชุฎุฑุงุฌ ุงูุงุณู ูู Google
   - ุฅุถุงูุฉ ุณุฌูุงุช ุชุดุฎูุต ููุตูุฉ
   - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู ุงูููุฌูุฏ

2. **`src/components/UserAvatar.tsx`**
   - ุฅุถุงูุฉ ุฏุงูุฉ ุฐููุฉ ูุงุณุชุฎุฑุงุฌ ุงูุงุณู
   - ุชุญุณูู fallback logic
   - ุฏุนู ุฃุณูุงุก ูุชุนุฏุฏุฉ ูู Google

3. **`test-google-data.js`** (ุฌุฏูุฏ)
   - ููู ุงุฎุชุจุงุฑ ููุนุฑูุฉ ุงูุจูุงูุงุช ุงููุนููุฉ ูู Google
   - ุชุดุฎูุต ุดุงูู ูุจูุงูุงุช user_metadata

## ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

### 1. **ุงุฎุชุจุงุฑ ุงูุจูุงูุงุช ุงููุนููุฉ:**
```bash
node test-google-data.js
```

### 2. **ุชุณุฌูู ุฏุฎูู ุฌุฏูุฏ ุนุจุฑ Google:**
- ูุฌุจ ุฃู ูุธูุฑ ุงูุงุณู ุงููุงูู ูู Google
- ูุฌุจ ุฃู ุชุธูุฑ ุณุฌูุงุช ููุตูุฉ ูู Console
- ูุฌุจ ุฃู ูุชู ุฅูุดุงุก ููู ุดุฎุตู ุจุงูุงุณู ุงูุตุญูุญ

### 3. **ุชุณุฌูู ุฏุฎูู ูุณุชุฎุฏู ููุฌูุฏ:**
- ูุฌุจ ุฃู ูุชู ุชุญุฏูุซ ุงูุงุณู ุฅุฐุง ูุงู ูุฎุชููุงู
- ูุฌุจ ุฃู ุชุธูุฑ ุณุฌูุงุช ุงูุชุญุฏูุซ

## ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

### โ **ูููุณุชุฎุฏููู ุงูุฌุฏุฏ:**
- ุงูุงุณู ุงููุงูู ูู Google ูุธูุฑ ูู ุฌููุน ุฃูุญุงุก ุงููููุน
- ูุง ูุธูุฑ ุงูุฌุฒุก ุงูุฃูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### โ **ูููุณุชุฎุฏููู ุงูุญุงูููู:**
- ุชุญุฏูุซ ุงูุงุณู ุชููุงุฆูุงู ูู Google
- ุงูุญูุงุธ ุนูู ุงูุจูุงูุงุช ุงูุฃุฎุฑู

### โ **ูู ุญุงูุฉ ุนุฏู ุชููุฑ ุงูุงุณู:**
- ุนุฑุถ "ูุณุชุฎุฏู ุฌุฏูุฏ" ุจุฏูุงู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุนุฑุถ "ูุณุชุฎุฏู" ูู ุงููุงุฌูุฉ

## ููุงุญุธุงุช ูููุฉ:

1. **ุงูุชุดุฎูุต:** ุงูุณุฌูุงุช ุงูููุตูุฉ ุณุชุณุงุนุฏ ูู ูุนุฑูุฉ ุงูุจูุงูุงุช ุงููุชููุฑุฉ
2. **ุงููุฑููุฉ:** ุงูููุฏ ูุฏุนู ุนุฏุฉ ุชูุณููุงุช ูุฃุณูุงุก Google
3. **ุงูุฃูุงู:** ูุง ูุชู ุงุณุชุฎุฏุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุงุณู ุงูุชุฑุงุถู
4. **ุงูุชุญุฏูุซ:** ุงููููุงุช ุงูุดุฎุตูุฉ ุงูููุฌูุฏุฉ ูุชู ุชุญุฏูุซูุง ุชููุงุฆูุงู

---

## ๐ฏ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

ุงูุขู ุนูุฏูุง ูุณุฌู ุงููุณุชุฎุฏู ุฏุฎูู ุนุจุฑ Google:
- โ **ุณูุธูุฑ ุงุณูู ุงููุงูู** ูู Google
- โ **ูู ูุธูุฑ ุงูุฌุฒุก ุงูุฃูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**
- โ **ุณูุชู ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู ุชููุงุฆูุงู**
- โ **ุณุฌูุงุช ููุตูุฉ ููุชุดุฎูุต**
